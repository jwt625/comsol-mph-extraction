function out = model
%
% bipolar_transistor_thermal.m
%
% Model exported on May 26 2025, 21:33 by COMSOL 6.2.0.339.

import com.comsol.model.*
import com.comsol.model.util.*

model = ModelUtil.create('Model');

model.modelPath('/Applications/COMSOL62/Multiphysics/applications/Semiconductor_Module/Transistors');

model.modelNode.create('comp1', true);

model.geom.create('geom1', 2);
model.geom('geom1').model('comp1');

model.mesh.create('mesh1', 'geom1');

model.physics.create('semi', 'Semiconductor', 'geom1');
model.physics('semi').model('comp1');

model.study.create('std1');
model.study('std1').create('stat', 'Stationary');
model.study('std1').feature('stat').setSolveFor('/physics/semi', true);

% To import content from file, use:
% model.param.loadFile('FILENAME');
model.param.set('T0', '293.15[K]', 'Reference temperature');
model.param.set('w_BJT', '2.5[um]', 'BJT width');
model.param.set('d_BJT', '1[um]', 'BJT thickness');
model.param.set('l_BJT', '3[um]', 'BJT length');
model.param.set('w_E', '1.2[um]', 'Emitter width');
model.param.set('w_EB', '0.35[um]', 'Emitter-base spacing');
model.param.set('w_cE', 'w_E/2-d_E', 'Emitter contact width');
model.param.set('w_cB', 'w_BJT/2-w_EB-w_E/2', 'Base contact width');
model.param.set('w_cC', 'w_BJT/2', 'Collector contact width');
model.param.set('d_E', '0.15[um]', 'Emitter junction depth');
model.param.set('d_B', '0.3[um]', 'Base junction depth');
model.param.set('d_C', '0.3[um]', 'Collector junction depth');
model.param.set('N_epi', '2e16[1/cm^3]', 'Epitaxial layer doping');
model.param.set('N_B', '9e17[1/cm^3]', 'Base doping');
model.param.set('N_E', '2e20[1/cm^3]', 'Emitter doping');
model.param.set('N_C', '8e19[1/cm^3]', 'Collector doping');
model.param.set('V_C', '0.5[V]', 'Applied voltage: collector');
model.param.set('V_B', '0.5[V]', 'Applied voltage: base');
model.param.set('V_E', '0[V]', 'Applied voltage: emitter');
model.param.set('I_B', '1[uA]', 'Inward applied current: base');
model.param.set('I_C', '0[uA]', 'Inward applied current: collector');

model.geom('geom1').lengthUnit([native2unicode(hex2dec({'00' 'b5'}), 'unicode') 'm']);
model.geom('geom1').create('r1', 'Rectangle');
model.geom('geom1').feature('r1').set('size', {'w_BJT/2' 'd_BJT'});
model.geom('geom1').feature('r1').set('pos', {'0' '-d_BJT'});
model.geom('geom1').run('r1');
model.geom('geom1').create('pt1', 'Point');
model.geom('geom1').feature('pt1').setIndex('p', 'w_cE', 0);
model.geom('geom1').run('pt1');
model.geom('geom1').create('pt2', 'Point');
model.geom('geom1').feature('pt2').setIndex('p', 'w_BJT/2-w_cB', 0);
model.geom('geom1').runPre('fin');
model.geom('geom1').run;

model.material.create('mat1', 'Common', 'comp1');
model.material('mat1').propertyGroup.create('AroraMobilityModel', 'Arora mobility model');
model.material('mat1').propertyGroup.create('PowerLawMobilityModel', 'Power law mobility model');
model.material('mat1').propertyGroup.create('Auger', 'Auger recombination');
model.material('mat1').propertyGroup.create('Direct', 'Direct recombination');
model.material('mat1').propertyGroup.create('SRH', ['Shockley' native2unicode(hex2dec({'20' '13'}), 'unicode') 'Read' native2unicode(hex2dec({'20' '13'}), 'unicode') 'Hall recombination']);
model.material('mat1').propertyGroup.create('FletcherMobilityModel', 'Fletcher mobility model');
model.material('mat1').propertyGroup.create('CaugheyThomasMobilityModel', ['Caughey' native2unicode(hex2dec({'20' '13'}), 'unicode') 'Thomas mobility model']);
model.material('mat1').propertyGroup.create('SemicondMaterial', 'Semiconductor material');
model.material('mat1').propertyGroup.create('LombardiSurfaceMobilityModel', 'Lombardi surface mobility model');
model.material('mat1').propertyGroup.create('ImpactIonization', 'Impact ionization');
model.material('mat1').propertyGroup.create('SlotboomModel', 'Slotboom model');
model.material('mat1').propertyGroup.create('JainRoulstonModel', ['Jain' native2unicode(hex2dec({'20' '13'}), 'unicode') 'Roulston model']);
model.material('mat1').propertyGroup.create('KlaassenUnifiedMobilityModel', 'Klaassen unified mobility model');
model.material('mat1').label('Si - Silicon');
model.material('mat1').propertyGroup('def').set('relpermittivity', {'11.7' '0' '0' '0' '11.7' '0' '0' '0' '11.7'});
model.material('mat1').propertyGroup('def').set('thermalconductivity', {'131[W/(m*K)]' '0' '0' '0' '131[W/(m*K)]' '0' '0' '0' '131[W/(m*K)]'});
model.material('mat1').propertyGroup('def').set('density', '2329[kg/m^3]');
model.material('mat1').propertyGroup('def').set('heatcapacity', '700[J/(kg*K)]');
model.material('mat1').propertyGroup('AroraMobilityModel').set('mun0_ref_arora', '1252[cm^2/(V*s)]');
model.material('mat1').propertyGroup('AroraMobilityModel').set('mup0_ref_arora', '407[cm^2/(V*s)]');
model.material('mat1').propertyGroup('AroraMobilityModel').set('mun_min_ref_arora', '88[cm^2/(V*s)]');
model.material('mat1').propertyGroup('AroraMobilityModel').set('mup_min_ref_arora', '54.3[cm^2/(V*s)]');
model.material('mat1').propertyGroup('AroraMobilityModel').set('Nn0_ref_arora', '1.26e17[1/cm^3]');
model.material('mat1').propertyGroup('AroraMobilityModel').set('Np0_ref_arora', '2.35e17[1/cm^3]');
model.material('mat1').propertyGroup('AroraMobilityModel').set('alpha0_arora', '0.88');
model.material('mat1').propertyGroup('AroraMobilityModel').set('beta1_arora', '-0.57');
model.material('mat1').propertyGroup('AroraMobilityModel').set('beta2_arora', '-2.33');
model.material('mat1').propertyGroup('AroraMobilityModel').set('beta3_arora', '-2.33');
model.material('mat1').propertyGroup('AroraMobilityModel').set('beta4_arora', '-0.146');
model.material('mat1').propertyGroup('AroraMobilityModel').set('Tref_arora', '300[K]');
model.material('mat1').propertyGroup('PowerLawMobilityModel').set('mun0_pl', '1448[cm^2/(V*s)]');
model.material('mat1').propertyGroup('PowerLawMobilityModel').set('mup0_pl', '473[cm^2/(V*s)]');
model.material('mat1').propertyGroup('PowerLawMobilityModel').set('alphan_pl', '2.33');
model.material('mat1').propertyGroup('PowerLawMobilityModel').set('alphap_pl', '2.23');
model.material('mat1').propertyGroup('PowerLawMobilityModel').set('Tref_pl', '300[K]');
model.material('mat1').propertyGroup('Auger').set('Cn', '2.8e-31[cm^6/s]');
model.material('mat1').propertyGroup('Auger').set('Cp', '9.9e-32[cm^6/s]');
model.material('mat1').propertyGroup('Direct').set('C', '0[cm^3/s]');
model.material('mat1').propertyGroup('SRH').set('taun', '10[us]');
model.material('mat1').propertyGroup('SRH').set('taup', '10[us]');
model.material('mat1').propertyGroup('FletcherMobilityModel').set('F1_fl', '1.04e21[1/(cm^1*V*s)]');
model.material('mat1').propertyGroup('FletcherMobilityModel').set('F2_fl', '7.45e13[1/cm^2]');
model.material('mat1').propertyGroup('FletcherMobilityModel').set('Tref_fl', '300[K]');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').label(['Caughey' native2unicode(hex2dec({'20' '13'}), 'unicode') 'Thomas mobility model']);
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('alphan0_ct', '1.11');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('alphap0_ct', '1.21');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('vn0_ct', '1e7[cm/s]');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('vp0_ct', '8.37e6[cm/s]');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('betan1_ct', '0.66');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('betap1_ct', '0.17');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('betan2_ct', '-0.87');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('betap2_ct', '-0.52');
model.material('mat1').propertyGroup('CaugheyThomasMobilityModel').set('Tref_ct', '300[K]');
model.material('mat1').propertyGroup('SemicondMaterial').set('Eg0', '1.12[V]');
model.material('mat1').propertyGroup('SemicondMaterial').set('chi0', '4.05[V]');
model.material('mat1').propertyGroup('SemicondMaterial').set('Nv', '(T/300[K])^(3/2)*1.04e19[1/cm^3]');
model.material('mat1').propertyGroup('SemicondMaterial').set('Nc', '(T/300[K])^(3/2)*2.8e19[1/cm^3]');
model.material('mat1').propertyGroup('SemicondMaterial').set('mun', '1450[cm^2/(V*s)]');
model.material('mat1').propertyGroup('SemicondMaterial').set('mup', '500[cm^2/(V*s)]');
model.material('mat1').propertyGroup('SemicondMaterial').addInput('temperature');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('deltan_ls', '5.82e14[V/s]');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('deltap_ls', '2.05e14[V/s]');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('mun1_ls', '4.75e7[cm^2/(V*s)]');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('mup1_ls', '9.93e7[cm^2/(V*s)]');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('mun2_ls', '1.74e5[cm^2/(V*s)]');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('mup2_ls', '8.84e5[cm^2/(V*s)]');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('alphan_ls', '0.125');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('alphap_ls', '0.0317');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('Tref_ls', '1[K]');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('Eref_ls', '1[V/cm]');
model.material('mat1').propertyGroup('LombardiSurfaceMobilityModel').set('Nref_ls', '1[1/cm^3]');
model.material('mat1').propertyGroup('ImpactIonization').set('an', '0.426');
model.material('mat1').propertyGroup('ImpactIonization').set('ap', '0.243');
model.material('mat1').propertyGroup('ImpactIonization').set('bn', '4.81E5[V/cm]');
model.material('mat1').propertyGroup('ImpactIonization').set('bp', '6.53E5[V/cm]');
model.material('mat1').propertyGroup('ImpactIonization').set('cnii', '3.05E-4');
model.material('mat1').propertyGroup('ImpactIonization').set('cpii', '5.35E-4');
model.material('mat1').propertyGroup('ImpactIonization').set('dn', '6.86E-4');
model.material('mat1').propertyGroup('ImpactIonization').set('dp', '5.67E-4');
model.material('mat1').propertyGroup('SlotboomModel').set('Eref_sb', '0.00692[V]');
model.material('mat1').propertyGroup('SlotboomModel').set('Nref_sb', '1.3e17[1/cm^3]');
model.material('mat1').propertyGroup('SlotboomModel').set('alpha_sb', '0.5');
model.material('mat1').propertyGroup('JainRoulstonModel').set('An_jr', '3.5e-8[V]');
model.material('mat1').propertyGroup('JainRoulstonModel').set('Bn_jr', '0[V]');
model.material('mat1').propertyGroup('JainRoulstonModel').set('Cn_jr', '0[V]');
model.material('mat1').propertyGroup('JainRoulstonModel').set('Ap_jr', '3.5e-8[V]');
model.material('mat1').propertyGroup('JainRoulstonModel').set('Bp_jr', '0[V]');
model.material('mat1').propertyGroup('JainRoulstonModel').set('Cp_jr', '0[V]');
model.material('mat1').propertyGroup('JainRoulstonModel').set('Nref_jr', '1[1/cm^3]');
model.material('mat1').propertyGroup('JainRoulstonModel').set('alpha_jr', '0.5');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('T_ref_kl', '300[K]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('mu_e_max_kl', '1414.0[cm^2/V/s]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('mu_h_max_kl', '470.5[cm^2/V/s]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('mu_e_min_kl', '68.5[cm^2/V/s]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('mu_h_min_kl', '44.9[cm^2/V/s]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('theta_e_kl', '2.285');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('theta_h_kl', '2.247');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('alpha_e_1_kl', '0.711');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('alpha_h_1_kl', '0.719');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('N_ref_e_1_kl', '9.20e16[cm^-3]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('N_ref_h_1_kl', '2.23e17[cm^-3]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('c_D_kl', '0.21');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('c_A_kl', '0.50');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('N_ref_D_kl', '4.0e20[cm^-3]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('N_ref_A_kl', '7.2e20[cm^-3]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('f_BH_kl', '3.828');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('f_CW_kl', '2.459');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('N_BH_kl', '1.36e20[cm^-3]');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('P_CW_kl', '3.97e13');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('s_1_kl', '0.89233');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('s_2_kl', '0.41372');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('s_3_kl', '0.19778');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('s_4_kl', '0.28227');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('s_5_kl', '0.005978');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('s_6_kl', '1.80618');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('s_7_kl', '0.72169');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('r_1_kl', '0.7643');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('r_2_kl', '2.2999');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('r_3_kl', '6.5502');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('r_4_kl', '2.3670');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('r_5_kl', '-0.01552');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('r_6_kl', '0.6478');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('m_e_kl', 'me_const');
model.material('mat1').propertyGroup('KlaassenUnifiedMobilityModel').set('m_h_kl', '1.258*me_const');

model.physics('semi').prop('d').set('d', 'l_BJT');
model.physics('semi').prop('ShapeProperty').set('Formulation', 'FEM1log');
model.physics('semi').feature('smm1').set('minput_temperature', 'T0');
model.physics('semi').create('adm1', 'AnalyticDopingModel', 2);
model.physics('semi').feature('adm1').selection.all;
model.physics('semi').feature('adm1').set('impurityType', 'donor');
model.physics('semi').feature('adm1').set('NDc', 'N_epi');
model.physics('semi').create('adm2', 'AnalyticDopingModel', 2);
model.physics('semi').feature('adm2').selection.all;
model.physics('semi').feature('adm2').set('impurityDistribution', 'box');
model.physics('semi').feature('adm2').set('rb', {'0[um]' '-d_E' '0'});
model.physics('semi').feature('adm2').set('jwidth', 'w_BJT/2');
model.physics('semi').feature('adm2').set('jdepth', 'd_E');
model.physics('semi').feature('adm2').set('NAc', 'N_B+N_epi');
model.physics('semi').feature('adm2').set('jds', 'd_E');
model.physics('semi').feature('adm2').set('Nb_src', 'root.comp1.semi.adm1.NDc');
model.physics('semi').create('adm3', 'AnalyticDopingModel', 2);
model.physics('semi').feature('adm3').selection.all;
model.physics('semi').feature('adm3').set('impurityDistribution', 'box');
model.physics('semi').feature('adm3').set('jwidth', 'w_E/2-d_E');
model.physics('semi').feature('adm3').set('impurityType', 'donor');
model.physics('semi').feature('adm3').set('NDc', 'N_E+N_B');
model.physics('semi').feature('adm3').set('jds', 'd_E');
model.physics('semi').feature('adm3').set('Nb', 'N_B');
model.physics('semi').create('adm4', 'AnalyticDopingModel', 2);
model.physics('semi').feature('adm4').selection.all;
model.physics('semi').feature('adm4').set('impurityDistribution', 'box');
model.physics('semi').feature('adm4').set('rb', {'0[um]' '-d_BJT-d_C' '0'});
model.physics('semi').feature('adm4').set('jwidth', 'w_BJT/2');
model.physics('semi').feature('adm4').set('jdepth', 'd_C');
model.physics('semi').feature('adm4').set('impurityType', 'donor');
model.physics('semi').feature('adm4').set('NDc', 'N_C');
model.physics('semi').feature('adm4').set('jds', '1.3*d_C');
model.physics('semi').feature('adm4').set('Nb_src', 'root.comp1.semi.adm1.NDc');
model.physics('semi').create('tar1', 'TrapAssistedRecombination', 2);
model.physics('semi').feature('tar1').selection.all;
model.physics('semi').create('mc1', 'MetalContact', 1);
model.physics('semi').feature('mc1').selection.set([3]);
model.physics('semi').feature('mc1').set('V0', 'V_E');
model.physics('semi').feature('mc1').label('Emitter Voltage');
model.physics('semi').create('mc2', 'MetalContact', 1);
model.physics('semi').feature('mc2').selection.set([5]);
model.physics('semi').feature('mc2').set('V0', 'V_B');
model.physics('semi').feature('mc2').label('Base Voltage');
model.physics('semi').create('mc3', 'MetalContact', 1);
model.physics('semi').feature('mc3').selection.set([2]);
model.physics('semi').feature('mc3').set('V0', 'V_C');
model.physics('semi').feature('mc3').label('Collector Voltage');
model.physics('semi').feature.duplicate('mc4', 'mc2');
model.physics('semi').feature('mc4').label('Base Current');
model.physics('semi').feature('mc4').set('TerminalType', 'Current');
model.physics('semi').feature('mc4').set('I0', 'I_B');

model.mesh('mesh1').automatic(false);
model.mesh('mesh1').feature.remove('size1');
model.mesh('mesh1').feature.remove('ftri1');
model.mesh('mesh1').create('edg1', 'Edge');
model.mesh('mesh1').feature('edg1').selection.set([3 4 5]);
model.mesh('mesh1').feature('edg1').create('dis1', 'Distribution');
model.mesh('mesh1').feature('edg1').feature('dis1').set('type', 'predefined');
model.mesh('mesh1').feature('edg1').feature('dis1').set('elemcount', 40);
model.mesh('mesh1').feature('edg1').feature('dis1').set('elemratio', 5);
model.mesh('mesh1').feature('edg1').feature('dis1').set('symmetric', true);
model.mesh('mesh1').create('cpe1', 'CopyEdge');
model.mesh('mesh1').feature('cpe1').selection('source').geom(1);
model.mesh('mesh1').feature('cpe1').selection('destination').geom(1);
model.mesh('mesh1').feature('cpe1').selection('source').set([3 4 5]);
model.mesh('mesh1').feature('cpe1').selection('destination').set([2]);
model.mesh('mesh1').create('map1', 'Map');
model.mesh('mesh1').feature('map1').create('dis1', 'Distribution');
model.mesh('mesh1').feature('map1').feature('dis1').selection.set([1 6]);
model.mesh('mesh1').feature('map1').feature('dis1').set('type', 'predefined');
model.mesh('mesh1').feature('map1').feature('dis1').set('elemcount', 100);
model.mesh('mesh1').feature('map1').feature('dis1').set('elemratio', 100);
model.mesh('mesh1').feature('map1').feature('dis1').set('growthrate', 'exponential');
model.mesh('mesh1').feature('map1').feature('dis1').set('symmetric', true);
model.mesh('mesh1').run;

model.study('std1').label('V_C Sweep, V_B=0 V, V_E=0 V');
model.study('std1').setGenPlots(false);
model.study('std1').feature('stat').set('useadvanceddisable', true);
model.study('std1').feature('stat').set('disabledphysics', {'semi/mc4'});
model.study('std1').feature('stat').set('useparam', true);
model.study('std1').feature('stat').set('sweeptype', 'filled');
model.study('std1').feature('stat').setIndex('pname', 'T0', 0);
model.study('std1').feature('stat').setIndex('plistarr', '', 0);
model.study('std1').feature('stat').setIndex('punit', 'K', 0);
model.study('std1').feature('stat').setIndex('pname', 'T0', 0);
model.study('std1').feature('stat').setIndex('plistarr', '', 0);
model.study('std1').feature('stat').setIndex('punit', 'K', 0);
model.study('std1').feature('stat').setIndex('pname', 'V_B', 0);
model.study('std1').feature('stat').setIndex('plistarr', 0, 0);
model.study('std1').feature('stat').setIndex('pname', 'T0', 1);
model.study('std1').feature('stat').setIndex('plistarr', '', 1);
model.study('std1').feature('stat').setIndex('punit', 'K', 1);
model.study('std1').feature('stat').setIndex('pname', 'T0', 1);
model.study('std1').feature('stat').setIndex('plistarr', '', 1);
model.study('std1').feature('stat').setIndex('punit', 'K', 1);
model.study('std1').feature('stat').setIndex('pname', 'V_E', 1);
model.study('std1').feature('stat').setIndex('plistarr', 0, 1);
model.study('std1').feature('stat').setIndex('pname', 'T0', 2);
model.study('std1').feature('stat').setIndex('plistarr', '', 2);
model.study('std1').feature('stat').setIndex('punit', 'K', 2);
model.study('std1').feature('stat').setIndex('pname', 'T0', 2);
model.study('std1').feature('stat').setIndex('plistarr', '', 2);
model.study('std1').feature('stat').setIndex('punit', 'K', 2);
model.study('std1').feature('stat').setIndex('pname', 'V_C', 2);
model.study('std1').feature('stat').setIndex('plistarr', 'range(0,0.1,0.5)', 2);

model.sol.create('sol1');
model.sol('sol1').study('std1');
model.sol('sol1').create('st1', 'StudyStep');
model.sol('sol1').feature('st1').set('study', 'std1');
model.sol('sol1').feature('st1').set('studystep', 'stat');
model.sol('sol1').create('v1', 'Variables');
model.sol('sol1').feature('v1').feature('comp1_Ne').set('scalemethod', 'manual');
model.sol('sol1').feature('v1').feature('comp1_V').set('scalemethod', 'manual');
model.sol('sol1').feature('v1').feature('comp1_Ph').set('scalemethod', 'manual');
model.sol('sol1').feature('v1').feature('comp1_Ne').set('resscalemethod', 'parent');
model.sol('sol1').feature('v1').feature('comp1_V').set('resscalemethod', 'parent');
model.sol('sol1').feature('v1').feature('comp1_Ph').set('resscalemethod', 'parent');
model.sol('sol1').feature('v1').feature('comp1_Ne').set('scaleval', '1');
model.sol('sol1').feature('v1').feature('comp1_V').set('scaleval', '1');
model.sol('sol1').feature('v1').feature('comp1_Ph').set('scaleval', '1');
model.sol('sol1').feature('v1').set('control', 'stat');
model.sol('sol1').create('s1', 'Stationary');
model.sol('sol1').feature('s1').set('stol', 1.0E-4);
model.sol('sol1').feature('s1').create('p1', 'Parametric');
model.sol('sol1').feature('s1').feature.remove('pDef');
model.sol('sol1').feature('s1').feature('p1').set('porder', 'constant');
model.sol('sol1').feature('s1').feature('p1').set('control', 'stat');
model.sol('sol1').feature('s1').set('control', 'stat');
model.sol('sol1').feature('s1').feature('aDef').set('complexfun', false);
model.sol('sol1').feature('s1').feature('aDef').set('cachepattern', true);
model.sol('sol1').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').feature('s1').feature('aDef').set('assemtol', 0);
model.sol('sol1').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol1').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol1').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol1').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol1').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol1').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol1').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol1').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol1').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol1').feature('s1').create('d1', 'Direct');
model.sol('sol1').feature('s1').feature('d1').set('linsolver', 'mumps');
model.sol('sol1').feature('s1').feature('d1').set('mumpsalloc', 1.2);
model.sol('sol1').feature('s1').feature('d1').set('ooc', 'off');
model.sol('sol1').feature('s1').feature('d1').set('errorchk', 'off');
model.sol('sol1').feature('s1').feature('fc1').set('linsolver', 'd1');
model.sol('sol1').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol1').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol1').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol1').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol1').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol1').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol1').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol1').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol1').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol1').feature('s1').feature.remove('fcDef');
model.sol('sol1').attach('std1');
model.sol('sol1').runAll;

model.study.create('std2');
model.study('std2').create('stat', 'Stationary');
model.study('std2').feature('stat').setSolveFor('/physics/semi', true);
model.study('std2').label('V_B Sweep, V_C=0.5 V, V_E=0 V');
model.study('std2').setGenPlots(false);
model.study('std2').feature('stat').set('useadvanceddisable', true);
model.study('std2').feature('stat').set('disabledphysics', {'semi/mc4'});
model.study('std2').feature('stat').set('useinitsol', true);
model.study('std2').feature('stat').set('initmethod', 'sol');
model.study('std2').feature('stat').set('initstudy', 'std1');
model.study('std2').feature('stat').set('solnum', 'last');
model.study('std2').feature('stat').set('useparam', true);
model.study('std2').feature('stat').setIndex('pname', 'T0', 0);
model.study('std2').feature('stat').setIndex('plistarr', '', 0);
model.study('std2').feature('stat').setIndex('punit', 'K', 0);
model.study('std2').feature('stat').setIndex('pname', 'T0', 0);
model.study('std2').feature('stat').setIndex('plistarr', '', 0);
model.study('std2').feature('stat').setIndex('punit', 'K', 0);
model.study('std2').feature('stat').setIndex('pname', 'V_B', 0);
model.study('std2').feature('stat').setIndex('plistarr', 'range(0,0.025,1.1)', 0);

model.sol.create('sol2');
model.sol('sol2').study('std2');
model.sol('sol2').create('st1', 'StudyStep');
model.sol('sol2').feature('st1').set('study', 'std2');
model.sol('sol2').feature('st1').set('studystep', 'stat');
model.sol('sol2').create('v1', 'Variables');
model.sol('sol2').feature('v1').feature('comp1_Ne').set('scalemethod', 'manual');
model.sol('sol2').feature('v1').feature('comp1_V').set('scalemethod', 'manual');
model.sol('sol2').feature('v1').feature('comp1_Ph').set('scalemethod', 'manual');
model.sol('sol2').feature('v1').feature('comp1_Ne').set('resscalemethod', 'parent');
model.sol('sol2').feature('v1').feature('comp1_V').set('resscalemethod', 'parent');
model.sol('sol2').feature('v1').feature('comp1_Ph').set('resscalemethod', 'parent');
model.sol('sol2').feature('v1').feature('comp1_Ne').set('scaleval', '1');
model.sol('sol2').feature('v1').feature('comp1_V').set('scaleval', '1');
model.sol('sol2').feature('v1').feature('comp1_Ph').set('scaleval', '1');
model.sol('sol2').feature('v1').set('control', 'stat');
model.sol('sol2').create('s1', 'Stationary');
model.sol('sol2').feature('s1').set('stol', 1.0E-4);
model.sol('sol2').feature('s1').create('p1', 'Parametric');
model.sol('sol2').feature('s1').feature.remove('pDef');
model.sol('sol2').feature('s1').feature('p1').set('porder', 'constant');
model.sol('sol2').feature('s1').feature('p1').set('control', 'stat');
model.sol('sol2').feature('s1').set('control', 'stat');
model.sol('sol2').feature('s1').feature('aDef').set('complexfun', false);
model.sol('sol2').feature('s1').feature('aDef').set('cachepattern', true);
model.sol('sol2').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol2').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol2').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol2').feature('s1').feature('aDef').set('assemtol', 0);
model.sol('sol2').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol2').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol2').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol2').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol2').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol2').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol2').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol2').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol2').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol2').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol2').feature('s1').create('d1', 'Direct');
model.sol('sol2').feature('s1').feature('d1').set('linsolver', 'mumps');
model.sol('sol2').feature('s1').feature('d1').set('mumpsalloc', 1.2);
model.sol('sol2').feature('s1').feature('d1').set('ooc', 'off');
model.sol('sol2').feature('s1').feature('d1').set('errorchk', 'off');
model.sol('sol2').feature('s1').feature('fc1').set('linsolver', 'd1');
model.sol('sol2').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol2').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol2').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol2').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol2').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol2').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol2').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol2').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol2').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol2').feature('s1').feature.remove('fcDef');
model.sol('sol2').attach('std2');
model.sol('sol2').runAll;

model.result.create('pg1', 'PlotGroup1D');
model.result('pg1').run;
model.result('pg1').set('data', 'dset2');
model.result('pg1').create('glob1', 'Global');
model.result('pg1').feature('glob1').set('markerpos', 'datapoints');
model.result('pg1').feature('glob1').set('linewidth', 'preference');
model.result('pg1').feature('glob1').set('expr', {'semi.I0_1'});
model.result('pg1').feature('glob1').set('descr', {'Terminal current'});
model.result('pg1').feature('glob1').set('unit', {'A'});
model.result('pg1').feature('glob1').set('expr', {'semi.I0_1' 'semi.I0_2'});
model.result('pg1').feature('glob1').set('descr', {'Terminal current' 'Terminal current'});
model.result('pg1').feature('glob1').set('expr', {'semi.I0_1' 'semi.I0_2' 'semi.I0_3'});
model.result('pg1').feature('glob1').set('descr', {'Terminal current' 'Terminal current' 'Terminal current'});
model.result('pg1').feature('glob1').setIndex('unit', 'mA', 0);
model.result('pg1').feature('glob1').setIndex('descr', 'I_E', 0);
model.result('pg1').feature('glob1').setIndex('unit', 'mA', 1);
model.result('pg1').feature('glob1').setIndex('descr', 'I_B', 1);
model.result('pg1').feature('glob1').setIndex('unit', 'mA', 2);
model.result('pg1').feature('glob1').setIndex('descr', 'I_C', 2);
model.result('pg1').run;
model.result('pg1').run;
model.result('pg1').create('glob2', 'Global');
model.result('pg1').feature('glob2').set('markerpos', 'datapoints');
model.result('pg1').feature('glob2').set('linewidth', 'preference');
model.result('pg1').feature('glob2').setIndex('expr', '-(semi.I0_1+semi.I0_3)', 0);
model.result('pg1').feature('glob2').setIndex('unit', 'mA', 0);
model.result('pg1').feature('glob2').setIndex('descr', 'I_B calc', 0);
model.result('pg1').feature('glob2').set('linestyle', 'none');
model.result('pg1').feature('glob2').set('linecolor', 'magenta');
model.result('pg1').feature('glob2').set('linemarker', 'circle');
model.result('pg1').feature('glob2').set('markerpos', 'interp');
model.result('pg1').feature('glob2').set('markers', 30);
model.result('pg1').run;
model.result('pg1').set('titletype', 'none');
model.result('pg1').set('xlabelactive', true);
model.result('pg1').set('ylabelactive', true);
model.result('pg1').set('xlabel', 'V_BE (V)');
model.result('pg1').set('ylabel', 'I (mA)');
model.result('pg1').set('legendpos', 'lowerleft');
model.result('pg1').run;
model.result('pg1').label('I_E, I_B and I_C as a function of V_BE');
model.result.create('pg2', 'PlotGroup1D');
model.result('pg2').run;
model.result('pg2').set('data', 'dset2');
model.result('pg2').create('glob1', 'Global');
model.result('pg2').feature('glob1').set('markerpos', 'datapoints');
model.result('pg2').feature('glob1').set('linewidth', 'preference');
model.result('pg2').feature('glob1').setIndex('expr', 'abs(semi.I0_3)', 0);
model.result('pg2').feature('glob1').setIndex('unit', 'A', 0);
model.result('pg2').feature('glob1').setIndex('descr', 'Collector Current, I_C', 0);
model.result('pg2').feature('glob1').setIndex('expr', 'abs(semi.I0_2)', 1);
model.result('pg2').feature('glob1').setIndex('unit', 'A', 1);
model.result('pg2').feature('glob1').setIndex('descr', 'Base Current, I_B', 1);
model.result('pg2').run;
model.result('pg2').set('legendpos', 'upperleft');
model.result('pg2').set('titletype', 'manual');
model.result('pg2').set('title', 'Gummel Plot');
model.result('pg2').set('xlabelactive', true);
model.result('pg2').set('xlabel', 'Base Voltage (V)');
model.result('pg2').set('ylabelactive', true);
model.result('pg2').set('ylabel', 'Current (A)');
model.result('pg2').set('ylog', true);
model.result('pg2').setIndex('looplevelinput', 'manualindices', 0);
model.result('pg2').setIndex('looplevelindices', 'range(17,1,45)', 0);
model.result('pg2').run;
model.result('pg2').label('Gummel Plot, I_C and I_B as a function of V_BE');
model.result.create('pg3', 'PlotGroup1D');
model.result('pg3').run;
model.result('pg3').set('data', 'dset2');
model.result('pg3').set('xlog', true);
model.result('pg3').create('glob1', 'Global');
model.result('pg3').feature('glob1').set('markerpos', 'datapoints');
model.result('pg3').feature('glob1').set('linewidth', 'preference');
model.result('pg3').feature('glob1').setIndex('expr', 'abs(semi.I0_3/semi.I0_2)', 0);
model.result('pg3').feature('glob1').setIndex('unit', 1, 0);
model.result('pg3').feature('glob1').setIndex('descr', 'Gain (I_C/I_B)', 0);
model.result('pg3').feature('glob1').set('xdata', 'expr');
model.result('pg3').feature('glob1').set('xdataexpr', 'semi.I0_3');
model.result('pg3').run;
model.result('pg3').set('xlabelactive', true);
model.result('pg3').set('xlabel', 'Collector current (A)');
model.result('pg3').set('ylabelactive', true);
model.result('pg3').set('ylabel', 'Current Gain');
model.result('pg3').setIndex('looplevelinput', 'manualindices', 0);
model.result('pg3').setIndex('looplevelindices', 'range(17,1,45)', 0);
model.result('pg3').run;
model.result('pg3').label('Current Gain');

model.physics('semi').feature('mc4').set('V0_init', '0.8[V]');

model.study.create('std3');
model.study('std3').create('stat', 'Stationary');
model.study('std3').feature('stat').setSolveFor('/physics/semi', true);
model.study('std3').label('V_C Sweep, V_E=0 V, for I_B=2[uA]');
model.study('std3').setGenPlots(false);
model.study('std3').feature('stat').set('useinitsol', true);
model.study('std3').feature('stat').set('initmethod', 'sol');
model.study('std3').feature('stat').set('initstudy', 'std2');
model.study('std3').feature('stat').set('solnum', 35);
model.study('std3').feature('stat').set('useparam', true);
model.study('std3').feature('stat').set('sweeptype', 'filled');
model.study('std3').feature('stat').setIndex('pname', 'T0', 0);
model.study('std3').feature('stat').setIndex('plistarr', '', 0);
model.study('std3').feature('stat').setIndex('punit', 'K', 0);
model.study('std3').feature('stat').setIndex('pname', 'T0', 0);
model.study('std3').feature('stat').setIndex('plistarr', '', 0);
model.study('std3').feature('stat').setIndex('punit', 'K', 0);
model.study('std3').feature('stat').setIndex('pname', 'I_B', 0);
model.study('std3').feature('stat').setIndex('plistarr', '2[uA]', 0);
model.study('std3').feature('stat').setIndex('pname', 'T0', 1);
model.study('std3').feature('stat').setIndex('plistarr', '', 1);
model.study('std3').feature('stat').setIndex('punit', 'K', 1);
model.study('std3').feature('stat').setIndex('pname', 'T0', 1);
model.study('std3').feature('stat').setIndex('plistarr', '', 1);
model.study('std3').feature('stat').setIndex('punit', 'K', 1);
model.study('std3').feature('stat').setIndex('pname', 'V_C', 1);
model.study('std3').feature('stat').setIndex('plistarr', 'range(0,0.05,0.4) range(0.5,0.1,1.5)', 1);

model.sol.create('sol3');
model.sol('sol3').study('std3');
model.sol('sol3').create('st1', 'StudyStep');
model.sol('sol3').feature('st1').set('study', 'std3');
model.sol('sol3').feature('st1').set('studystep', 'stat');
model.sol('sol3').create('v1', 'Variables');
model.sol('sol3').feature('v1').feature('comp1_Ph_lm').set('scalemethod', 'manual');
model.sol('sol3').feature('v1').feature('comp1_Ne_lm').set('scalemethod', 'manual');
model.sol('sol3').feature('v1').feature('comp1_Ne').set('scalemethod', 'manual');
model.sol('sol3').feature('v1').feature('comp1_semi_mc4_V0_ode').set('scalemethod', 'manual');
model.sol('sol3').feature('v1').feature('comp1_V').set('scalemethod', 'manual');
model.sol('sol3').feature('v1').feature('comp1_V_lm').set('scalemethod', 'manual');
model.sol('sol3').feature('v1').feature('comp1_Ph').set('scalemethod', 'manual');
model.sol('sol3').feature('v1').feature('comp1_Ph_lm').set('resscalemethod', 'parent');
model.sol('sol3').feature('v1').feature('comp1_Ne_lm').set('resscalemethod', 'parent');
model.sol('sol3').feature('v1').feature('comp1_Ne').set('resscalemethod', 'parent');
model.sol('sol3').feature('v1').feature('comp1_semi_mc4_V0_ode').set('resscalemethod', 'parent');
model.sol('sol3').feature('v1').feature('comp1_V').set('resscalemethod', 'parent');
model.sol('sol3').feature('v1').feature('comp1_V_lm').set('resscalemethod', 'parent');
model.sol('sol3').feature('v1').feature('comp1_Ph').set('resscalemethod', 'parent');
model.sol('sol3').feature('v1').feature('comp1_Ph_lm').set('scaleval', '1000000');
model.sol('sol3').feature('v1').feature('comp1_Ne_lm').set('scaleval', '1000000');
model.sol('sol3').feature('v1').feature('comp1_Ne').set('scaleval', '1');
model.sol('sol3').feature('v1').feature('comp1_semi_mc4_V0_ode').set('scaleval', '1');
model.sol('sol3').feature('v1').feature('comp1_V').set('scaleval', '1');
model.sol('sol3').feature('v1').feature('comp1_V_lm').set('scaleval', '1000000');
model.sol('sol3').feature('v1').feature('comp1_Ph').set('scaleval', '1');
model.sol('sol3').feature('v1').set('control', 'stat');
model.sol('sol3').create('s1', 'Stationary');
model.sol('sol3').feature('s1').set('stol', 1.0E-4);
model.sol('sol3').feature('s1').create('p1', 'Parametric');
model.sol('sol3').feature('s1').feature.remove('pDef');
model.sol('sol3').feature('s1').feature('p1').set('porder', 'constant');
model.sol('sol3').feature('s1').feature('p1').set('control', 'stat');
model.sol('sol3').feature('s1').set('control', 'stat');
model.sol('sol3').feature('s1').feature('aDef').set('complexfun', false);
model.sol('sol3').feature('s1').feature('aDef').set('cachepattern', true);
model.sol('sol3').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol3').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol3').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol3').feature('s1').feature('aDef').set('assemtol', 0);
model.sol('sol3').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol3').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol3').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol3').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol3').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol3').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol3').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol3').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol3').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol3').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol3').feature('s1').create('d1', 'Direct');
model.sol('sol3').feature('s1').feature('d1').set('linsolver', 'mumps');
model.sol('sol3').feature('s1').feature('d1').set('mumpsalloc', 1.2);
model.sol('sol3').feature('s1').feature('d1').set('ooc', 'off');
model.sol('sol3').feature('s1').feature('d1').set('errorchk', 'off');
model.sol('sol3').feature('s1').feature('fc1').set('linsolver', 'd1');
model.sol('sol3').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol3').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol3').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol3').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol3').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol3').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol3').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol3').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol3').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol3').feature('s1').feature.remove('fcDef');
model.sol('sol3').attach('std3');
model.sol('sol3').runAll;

model.study.create('std4');
model.study('std4').setGenPlots(false);
model.study('std4').label('V_C Sweep, V_E=0 V, for I_B=10[uA]');
model.study('std4').feature.copy('stat1', 'std3/stat');
model.study('std4').feature('stat1').setIndex('plistarr', '10[uA]', 0);

model.sol.create('sol4');
model.sol('sol4').study('std4');
model.sol('sol4').create('st1', 'StudyStep');
model.sol('sol4').feature('st1').set('study', 'std4');
model.sol('sol4').feature('st1').set('studystep', 'stat1');
model.sol('sol4').create('v1', 'Variables');
model.sol('sol4').feature('v1').feature('comp1_Ph_lm').set('scalemethod', 'manual');
model.sol('sol4').feature('v1').feature('comp1_Ne_lm').set('scalemethod', 'manual');
model.sol('sol4').feature('v1').feature('comp1_Ne').set('scalemethod', 'manual');
model.sol('sol4').feature('v1').feature('comp1_semi_mc4_V0_ode').set('scalemethod', 'manual');
model.sol('sol4').feature('v1').feature('comp1_V').set('scalemethod', 'manual');
model.sol('sol4').feature('v1').feature('comp1_V_lm').set('scalemethod', 'manual');
model.sol('sol4').feature('v1').feature('comp1_Ph').set('scalemethod', 'manual');
model.sol('sol4').feature('v1').feature('comp1_Ph_lm').set('resscalemethod', 'parent');
model.sol('sol4').feature('v1').feature('comp1_Ne_lm').set('resscalemethod', 'parent');
model.sol('sol4').feature('v1').feature('comp1_Ne').set('resscalemethod', 'parent');
model.sol('sol4').feature('v1').feature('comp1_semi_mc4_V0_ode').set('resscalemethod', 'parent');
model.sol('sol4').feature('v1').feature('comp1_V').set('resscalemethod', 'parent');
model.sol('sol4').feature('v1').feature('comp1_V_lm').set('resscalemethod', 'parent');
model.sol('sol4').feature('v1').feature('comp1_Ph').set('resscalemethod', 'parent');
model.sol('sol4').feature('v1').feature('comp1_Ph_lm').set('scaleval', '1000000');
model.sol('sol4').feature('v1').feature('comp1_Ne_lm').set('scaleval', '1000000');
model.sol('sol4').feature('v1').feature('comp1_Ne').set('scaleval', '1');
model.sol('sol4').feature('v1').feature('comp1_semi_mc4_V0_ode').set('scaleval', '1');
model.sol('sol4').feature('v1').feature('comp1_V').set('scaleval', '1');
model.sol('sol4').feature('v1').feature('comp1_V_lm').set('scaleval', '1000000');
model.sol('sol4').feature('v1').feature('comp1_Ph').set('scaleval', '1');
model.sol('sol4').feature('v1').set('control', 'stat1');
model.sol('sol4').create('s1', 'Stationary');
model.sol('sol4').feature('s1').set('stol', 1.0E-4);
model.sol('sol4').feature('s1').create('p1', 'Parametric');
model.sol('sol4').feature('s1').feature.remove('pDef');
model.sol('sol4').feature('s1').feature('p1').set('porder', 'constant');
model.sol('sol4').feature('s1').feature('p1').set('control', 'stat1');
model.sol('sol4').feature('s1').set('control', 'stat1');
model.sol('sol4').feature('s1').feature('aDef').set('complexfun', false);
model.sol('sol4').feature('s1').feature('aDef').set('cachepattern', true);
model.sol('sol4').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol4').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol4').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol4').feature('s1').feature('aDef').set('assemtol', 0);
model.sol('sol4').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol4').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol4').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol4').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol4').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol4').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol4').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol4').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol4').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol4').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol4').feature('s1').create('d1', 'Direct');
model.sol('sol4').feature('s1').feature('d1').set('linsolver', 'mumps');
model.sol('sol4').feature('s1').feature('d1').set('mumpsalloc', 1.2);
model.sol('sol4').feature('s1').feature('d1').set('ooc', 'off');
model.sol('sol4').feature('s1').feature('d1').set('errorchk', 'off');
model.sol('sol4').feature('s1').feature('fc1').set('linsolver', 'd1');
model.sol('sol4').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol4').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol4').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol4').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol4').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol4').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol4').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol4').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol4').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol4').feature('s1').feature.remove('fcDef');
model.sol('sol4').attach('std4');
model.sol('sol4').runAll;

model.result.create('pg4', 'PlotGroup1D');
model.result('pg4').run;
model.result('pg4').label('Common-emitter output characteristics');
model.result('pg4').create('glob1', 'Global');
model.result('pg4').feature('glob1').set('markerpos', 'datapoints');
model.result('pg4').feature('glob1').set('linewidth', 'preference');
model.result('pg4').feature('glob1').set('data', 'dset3');
model.result('pg4').feature('glob1').setIndex('expr', 'abs(semi.I0_3)', 0);
model.result('pg4').feature('glob1').setIndex('unit', 'uA', 0);
model.result('pg4').feature('glob1').setIndex('descr', 'Collector Current I_B=2uA', 0);
model.result('pg4').feature('glob1').set('legendmethod', 'manual');
model.result('pg4').feature('glob1').setIndex('legends', 'I_B=2 uA', 0);
model.result('pg4').run;
model.result('pg4').create('glob2', 'Global');
model.result('pg4').feature('glob2').set('markerpos', 'datapoints');
model.result('pg4').feature('glob2').set('linewidth', 'preference');
model.result('pg4').feature('glob2').set('data', 'dset4');
model.result('pg4').feature('glob2').setIndex('expr', 'abs(semi.I0_3)', 0);
model.result('pg4').feature('glob2').setIndex('unit', 'uA', 0);
model.result('pg4').feature('glob2').setIndex('descr', 'Collector Current I_B=10 uA', 0);
model.result('pg4').feature('glob2').set('legendmethod', 'manual');
model.result('pg4').feature('glob2').setIndex('legends', 'I_B=10 uA', 0);
model.result('pg4').run;
model.result('pg4').set('titletype', 'manual');
model.result('pg4').set('title', 'Collector Current as a function of Collector Voltage');
model.result('pg4').set('xlabelactive', true);
model.result('pg4').set('xlabel', 'Collector Voltage (V)');
model.result('pg4').set('ylabelactive', true);
model.result('pg4').set('ylabel', 'Collector Current (uA)');
model.result('pg4').set('legendpos', 'middleright');
model.result('pg4').run;
model.result.create('pg5', 'PlotGroup2D');
model.result('pg5').run;
model.result('pg5').label('Voltage & Current Density');
model.result('pg5').set('data', 'dset3');
model.result('pg5').create('surf1', 'Surface');
model.result('pg5').feature('surf1').set('expr', 'V');
model.result('pg5').feature('surf1').set('resolution', 'norefine');
model.result('pg5').feature('surf1').set('smooth', 'everywhere');
model.result('pg5').run;
model.result('pg5').run;
model.result('pg5').create('arws1', 'ArrowSurface');
model.result('pg5').feature('arws1').set('expr', {'semi.JnX' 'semi.JnY'});
model.result('pg5').feature('arws1').set('descr', 'Electron current density');
model.result('pg5').feature('arws1').set('arrowlength', 'logarithmic');
model.result('pg5').feature('arws1').set('color', 'black');
model.result('pg5').feature.duplicate('arws2', 'arws1');
model.result('pg5').run;
model.result('pg5').feature('arws2').set('expr', {'semi.JpX' 'semi.JpY'});
model.result('pg5').feature('arws2').set('color', 'white');
model.result('pg5').run;
model.result('pg5').set('titletype', 'manual');
model.result('pg5').set('title', 'Voltage and Current Density');
model.result('pg5').run;

model.title('Bipolar Transistor');

model.description('This example shows how to set up a simulation of a simple bipolar transistor. The output current voltage characteristics in the common-emitter configuration are computed and the common emitter current gain is determined.');

model.label('bipolar_transistor.mph');

model.result('pg5').run;

model.param.set('V_C', '3[V]');
model.param.set('R', '100[K/W]');
model.param.descr('R', 'Effective thermal resistance');
model.param.set('h0', '1/R/((w_cE+w_cB+w_cC)*l_BJT)');
model.param.descr('h0', 'Effective heat transfer coefficient for contacts');

model.physics('semi').feature('smm1').set('Ionization', 'incomplete');
model.physics('semi').feature.duplicate('smm2', 'smm1');
model.physics('semi').feature('mc4').active(false);
model.physics.create('ht', 'HeatTransfer', 'geom1');
model.physics('ht').model('comp1');

model.study('std1').feature('stat').setSolveFor('/physics/ht', true);
model.study('std2').feature('stat').setSolveFor('/physics/ht', true);
model.study('std3').feature('stat').setSolveFor('/physics/ht', true);
model.study('std4').feature('stat1').setSolveFor('/physics/ht', true);

model.physics('ht').prop('PhysicalModelProperty').set('dz', 'l_BJT');
model.physics('ht').prop('ShapeProperty').set('order_temperature', 1);
model.physics('ht').feature('init1').set('Tinit', 'T0');
model.physics('ht').create('hs1', 'HeatSource', 2);
model.physics('ht').feature('hs1').selection.set([1]);
model.physics('ht').feature('hs1').set('Q0_src', 'root.comp1.semi.Q_tot');
model.physics('ht').create('hf1', 'HeatFluxBoundary', 1);
model.physics('ht').feature('hf1').selection.set([2 3 5 6]);
model.physics('ht').feature('hf1').set('HeatFluxType', 'ConvectiveHeatFlux');
model.physics('ht').feature('hf1').set('h', 'h0');
model.physics('ht').feature('hf1').set('Text', 'T0');
model.physics('semi').feature('smm2').set('minput_temperature_src', 'root.comp1.T');

model.study.create('std5');
model.study('std5').create('stat', 'Stationary');
model.study('std5').feature('stat').setSolveFor('/physics/semi', true);
model.study('std5').feature('stat').setSolveFor('/physics/ht', true);
model.study('std5').label('Incomplete Ionization: V_C Sweep, V_B=0 V, V_E=0 V');
model.study('std5').setGenPlots(false);
model.study('std5').feature('stat').set('useadvanceddisable', true);
model.study('std5').feature('stat').set('disabledphysics', {'semi/smm2'});
model.study('std5').feature('stat').setSolveFor('/physics/ht', false);
model.study('std5').feature('stat').set('useinitsol', true);
model.study('std5').feature('stat').set('initmethod', 'sol');
model.study('std5').feature('stat').set('initstudy', 'std1');
model.study('std5').feature('stat').set('useparam', true);
model.study('std5').feature('stat').setIndex('pname', 'T0', 0);
model.study('std5').feature('stat').setIndex('plistarr', '', 0);
model.study('std5').feature('stat').setIndex('punit', 'K', 0);
model.study('std5').feature('stat').setIndex('pname', 'T0', 0);
model.study('std5').feature('stat').setIndex('plistarr', '', 0);
model.study('std5').feature('stat').setIndex('punit', 'K', 0);
model.study('std5').feature('stat').setIndex('pname', 'V_B', 0);
model.study('std5').feature('stat').setIndex('plistarr', 0, 0);
model.study('std5').feature('stat').setIndex('pname', 'T0', 1);
model.study('std5').feature('stat').setIndex('plistarr', '', 1);
model.study('std5').feature('stat').setIndex('punit', 'K', 1);
model.study('std5').feature('stat').setIndex('pname', 'T0', 1);
model.study('std5').feature('stat').setIndex('plistarr', '', 1);
model.study('std5').feature('stat').setIndex('punit', 'K', 1);
model.study('std5').feature('stat').setIndex('pname', 'V_E', 1);
model.study('std5').feature('stat').setIndex('plistarr', 0, 1);
model.study('std5').feature('stat').setIndex('pname', 'T0', 2);
model.study('std5').feature('stat').setIndex('plistarr', '', 2);
model.study('std5').feature('stat').setIndex('punit', 'K', 2);
model.study('std5').feature('stat').setIndex('pname', 'T0', 2);
model.study('std5').feature('stat').setIndex('plistarr', '', 2);
model.study('std5').feature('stat').setIndex('punit', 'K', 2);
model.study('std5').feature('stat').setIndex('pname', 'V_C', 2);
model.study('std5').feature('stat').setIndex('plistarr', '0.5 1 2 3', 2);
model.study('std5').feature('stat').set('sweeptype', 'filled');

model.sol.create('sol5');
model.sol('sol5').study('std5');
model.sol('sol5').create('st1', 'StudyStep');
model.sol('sol5').feature('st1').set('study', 'std5');
model.sol('sol5').feature('st1').set('studystep', 'stat');
model.sol('sol5').create('v1', 'Variables');
model.sol('sol5').feature('v1').feature('comp1_Ne').set('scalemethod', 'manual');
model.sol('sol5').feature('v1').feature('comp1_V').set('scalemethod', 'manual');
model.sol('sol5').feature('v1').feature('comp1_Ph').set('scalemethod', 'manual');
model.sol('sol5').feature('v1').feature('comp1_Ne').set('resscalemethod', 'parent');
model.sol('sol5').feature('v1').feature('comp1_V').set('resscalemethod', 'parent');
model.sol('sol5').feature('v1').feature('comp1_Ph').set('resscalemethod', 'parent');
model.sol('sol5').feature('v1').feature('comp1_Ne').set('scaleval', '1');
model.sol('sol5').feature('v1').feature('comp1_V').set('scaleval', '1');
model.sol('sol5').feature('v1').feature('comp1_Ph').set('scaleval', '1');
model.sol('sol5').feature('v1').set('control', 'stat');
model.sol('sol5').create('s1', 'Stationary');
model.sol('sol5').feature('s1').set('stol', 1.0E-4);
model.sol('sol5').feature('s1').create('p1', 'Parametric');
model.sol('sol5').feature('s1').feature.remove('pDef');
model.sol('sol5').feature('s1').feature('p1').set('porder', 'constant');
model.sol('sol5').feature('s1').feature('p1').set('control', 'stat');
model.sol('sol5').feature('s1').set('control', 'stat');
model.sol('sol5').feature('s1').feature('aDef').set('complexfun', false);
model.sol('sol5').feature('s1').feature('aDef').set('cachepattern', true);
model.sol('sol5').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol5').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol5').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol5').feature('s1').feature('aDef').set('assemtol', 0);
model.sol('sol5').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol5').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol5').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol5').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol5').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol5').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol5').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol5').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol5').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol5').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol5').feature('s1').create('d1', 'Direct');
model.sol('sol5').feature('s1').feature('d1').set('linsolver', 'mumps');
model.sol('sol5').feature('s1').feature('d1').set('mumpsalloc', 1.2);
model.sol('sol5').feature('s1').feature('d1').set('ooc', 'off');
model.sol('sol5').feature('s1').feature('d1').set('errorchk', 'off');
model.sol('sol5').feature('s1').feature('fc1').set('linsolver', 'd1');
model.sol('sol5').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol5').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol5').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol5').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol5').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol5').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol5').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol5').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol5').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol5').feature('s1').feature.remove('fcDef');
model.sol('sol5').attach('std5');
model.sol('sol5').runAll;

model.study.create('std6');
model.study('std6').create('stat', 'Stationary');
model.study('std6').feature('stat').setSolveFor('/physics/semi', true);
model.study('std6').feature('stat').setSolveFor('/physics/ht', true);
model.study('std6').label('Incomplete Ionization: V_B Sweep, V_C=3 V, V_E=0 V');
model.study('std6').setGenPlots(false);
model.study('std6').feature('stat').setEntry('activate', 'ht', false);
model.study('std6').feature('stat').set('useinitsol', true);
model.study('std6').feature('stat').set('initmethod', 'sol');
model.study('std6').feature('stat').set('initstudy', 'std5');
model.study('std6').feature('stat').set('useparam', true);
model.study('std6').feature('stat').setIndex('pname', 'T0', 0);
model.study('std6').feature('stat').setIndex('plistarr', '', 0);
model.study('std6').feature('stat').setIndex('punit', 'K', 0);
model.study('std6').feature('stat').setIndex('pname', 'T0', 0);
model.study('std6').feature('stat').setIndex('plistarr', '', 0);
model.study('std6').feature('stat').setIndex('punit', 'K', 0);
model.study('std6').feature('stat').setIndex('pname', 'V_B', 0);
model.study('std6').feature('stat').setIndex('plistarr', 'range(0.4,0.1,0.7) range(0.8,0.05,1.1)', 0);

model.sol.create('sol6');
model.sol('sol6').study('std6');
model.sol('sol6').create('st1', 'StudyStep');
model.sol('sol6').feature('st1').set('study', 'std6');
model.sol('sol6').feature('st1').set('studystep', 'stat');
model.sol('sol6').create('v1', 'Variables');
model.sol('sol6').feature('v1').feature('comp1_Ne').set('scalemethod', 'manual');
model.sol('sol6').feature('v1').feature('comp1_V').set('scalemethod', 'manual');
model.sol('sol6').feature('v1').feature('comp1_Ph').set('scalemethod', 'manual');
model.sol('sol6').feature('v1').feature('comp1_Ne').set('resscalemethod', 'parent');
model.sol('sol6').feature('v1').feature('comp1_V').set('resscalemethod', 'parent');
model.sol('sol6').feature('v1').feature('comp1_Ph').set('resscalemethod', 'parent');
model.sol('sol6').feature('v1').feature('comp1_Ne').set('scaleval', '1');
model.sol('sol6').feature('v1').feature('comp1_V').set('scaleval', '1');
model.sol('sol6').feature('v1').feature('comp1_Ph').set('scaleval', '1');
model.sol('sol6').feature('v1').set('control', 'stat');
model.sol('sol6').create('s1', 'Stationary');
model.sol('sol6').feature('s1').set('stol', 1.0E-4);
model.sol('sol6').feature('s1').create('p1', 'Parametric');
model.sol('sol6').feature('s1').feature.remove('pDef');
model.sol('sol6').feature('s1').feature('p1').set('porder', 'constant');
model.sol('sol6').feature('s1').feature('p1').set('control', 'stat');
model.sol('sol6').feature('s1').set('control', 'stat');
model.sol('sol6').feature('s1').feature('aDef').set('complexfun', false);
model.sol('sol6').feature('s1').feature('aDef').set('cachepattern', true);
model.sol('sol6').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol6').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol6').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol6').feature('s1').feature('aDef').set('assemtol', 0);
model.sol('sol6').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol6').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol6').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol6').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol6').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol6').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol6').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol6').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol6').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol6').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol6').feature('s1').create('d1', 'Direct');
model.sol('sol6').feature('s1').feature('d1').set('linsolver', 'mumps');
model.sol('sol6').feature('s1').feature('d1').set('mumpsalloc', 1.2);
model.sol('sol6').feature('s1').feature('d1').set('ooc', 'off');
model.sol('sol6').feature('s1').feature('d1').set('errorchk', 'off');
model.sol('sol6').feature('s1').feature('fc1').set('linsolver', 'd1');
model.sol('sol6').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol6').feature('s1').feature('fc1').set('useminsteprecovery', 'auto');
model.sol('sol6').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol6').feature('s1').feature('fc1').set('minstep', 1.0E-4);
model.sol('sol6').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol6').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol6').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol6').feature('s1').feature('fc1').set('initstep', 0.1);
model.sol('sol6').feature('s1').feature('fc1').set('minsteprecovery', 0.001);
model.sol('sol6').feature('s1').feature.remove('fcDef');
model.sol('sol6').attach('std6');
model.sol('sol6').runAll;

model.study.create('std7');
model.study('std7').label('Full Thermal Coupling: V_B Sweep, V_C=3 V, V_E=0 V');
model.study('std7').setGenPlots(false);
model.study('std7').feature.copy('stat1', 'std6/stat');
model.study('std7').feature('stat1').setEntry('activate', 'ht', true);

model.sol.create('sol7');
model.sol('sol7').study('std7');
model.sol('sol7').create('st1', 'StudyStep');
model.sol('sol7').feature('st1').set('study', 'std7');
model.sol('sol7').feature('st1').set('studystep', 'stat1');
model.sol('sol7').create('v1', 'Variables');
model.sol('sol7').feature('v1').feature('comp1_Ne').set('scalemethod', 'manual');
model.sol('sol7').feature('v1').feature('comp1_V').set('scalemethod', 'manual');
model.sol('sol7').feature('v1').feature('comp1_Ph').set('scalemethod', 'manual');
model.sol('sol7').feature('v1').feature('comp1_Ne').set('resscalemethod', 'parent');
model.sol('sol7').feature('v1').feature('comp1_V').set('resscalemethod', 'parent');
model.sol('sol7').feature('v1').feature('comp1_Ph').set('resscalemethod', 'parent');
model.sol('sol7').feature('v1').feature('comp1_Ne').set('scaleval', '1');
model.sol('sol7').feature('v1').feature('comp1_V').set('scaleval', '1');
model.sol('sol7').feature('v1').feature('comp1_Ph').set('scaleval', '1');
model.sol('sol7').feature('v1').set('control', 'stat1');
model.sol('sol7').create('s1', 'Stationary');
model.sol('sol7').feature('s1').set('stol', 1.0E-4);
model.sol('sol7').feature('s1').create('p1', 'Parametric');
model.sol('sol7').feature('s1').feature.remove('pDef');
model.sol('sol7').feature('s1').feature('p1').set('porder', 'constant');
model.sol('sol7').feature('s1').feature('p1').set('control', 'stat1');
model.sol('sol7').feature('s1').set('control', 'stat1');
model.sol('sol7').feature('s1').feature('aDef').set('complexfun', false);
model.sol('sol7').feature('s1').feature('aDef').set('cachepattern', true);
model.sol('sol7').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol7').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol7').feature('s1').feature('aDef').set('assemtol', 0);
model.sol('sol7').feature('s1').create('seDef', 'Segregated');
model.sol('sol7').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol7').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol7').feature('s1').feature('fc1').set('initstep', 0.01);
model.sol('sol7').feature('s1').feature('fc1').set('minstep', 1.0E-6);
model.sol('sol7').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol7').feature('s1').feature('fc1').set('termonres', 'off');
model.sol('sol7').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol7').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol7').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol7').feature('s1').create('d1', 'Direct');
model.sol('sol7').feature('s1').feature('d1').set('linsolver', 'mumps');
model.sol('sol7').feature('s1').feature('d1').set('pivotperturb', 1.0E-13);
model.sol('sol7').feature('s1').feature('d1').set('mumpsalloc', 1.2);
model.sol('sol7').feature('s1').feature('d1').set('ooc', 'auto');
model.sol('sol7').feature('s1').feature('d1').label('Direct, heat transfer variables (ht) (Merged)');
model.sol('sol7').feature('s1').create('i1', 'Iterative');
model.sol('sol7').feature('s1').feature('i1').set('linsolver', 'gmres');
model.sol('sol7').feature('s1').feature('i1').set('prefuntype', 'left');
model.sol('sol7').feature('s1').feature('i1').set('itrestart', 50);
model.sol('sol7').feature('s1').feature('i1').set('rhob', 20);
model.sol('sol7').feature('s1').feature('i1').set('maxlinit', 10000);
model.sol('sol7').feature('s1').feature('i1').set('nlinnormuse', 'on');
model.sol('sol7').feature('s1').feature('i1').label('AMG, heat transfer variables (ht)');
model.sol('sol7').feature('s1').feature('i1').create('mg1', 'Multigrid');
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('prefun', 'saamg');
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('mgcycle', 'v');
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('maxcoarsedof', 50000);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('strconn', 0.01);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('nullspace', 'constant');
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('usesmooth', false);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('saamgcompwise', true);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('loweramg', true);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').set('compactaggregation', false);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('pr').create('so1', 'SOR');
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('pr').feature('so1').set('iter', 2);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('pr').feature('so1').set('relax', 0.9);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('po').create('so1', 'SOR');
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('po').feature('so1').set('iter', 2);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('po').feature('so1').set('relax', 0.9);
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('cs').create('d1', 'Direct');
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('cs').feature('d1').set('linsolver', 'pardiso');
model.sol('sol7').feature('s1').feature('i1').feature('mg1').feature('cs').feature('d1').set('pivotperturb', 1.0E-13);
model.sol('sol7').feature('s1').feature('fc1').set('linsolver', 'd1');
model.sol('sol7').feature('s1').feature('fc1').set('dtech', 'auto');
model.sol('sol7').feature('s1').feature('fc1').set('initstep', 0.01);
model.sol('sol7').feature('s1').feature('fc1').set('minstep', 1.0E-6);
model.sol('sol7').feature('s1').feature('fc1').set('maxiter', 50);
model.sol('sol7').feature('s1').feature('fc1').set('termonres', 'off');
model.sol('sol7').feature('s1').feature('fc1').set('ntolfact', 1);
model.sol('sol7').feature('s1').feature('fc1').set('ntermauto', 'tol');
model.sol('sol7').feature('s1').feature('fc1').set('rstep', 10);
model.sol('sol7').feature('s1').feature.remove('fcDef');
model.sol('sol7').feature('s1').feature.remove('seDef');
model.sol('sol7').attach('std7');
model.sol('sol7').runAll;

model.result('pg2').run;
model.result('pg2').feature('glob1').set('data', 'dset6');
model.result('pg2').feature('glob1').setIndex('descr', 'Collector Current, I_C - Uniform temperature', 0);
model.result('pg2').feature('glob1').setIndex('descr', 'Base Current, I_B - Uniform temperature', 1);
model.result('pg2').feature.duplicate('glob2', 'glob1');
model.result('pg2').run;
model.result('pg2').feature('glob2').set('data', 'dset7');
model.result('pg2').feature('glob2').setIndex('descr', 'Collector Current, I_C - Thermal coupling', 0);
model.result('pg2').feature('glob2').setIndex('descr', 'Base Current, I_B - Thermal coupling', 1);
model.result('pg2').feature('glob2').set('xdata', 'expr');
model.result('pg2').feature('glob2').set('xdataexpr', 'V_B');
model.result('pg2').feature('glob2').set('linestyle', 'dashed');
model.result('pg2').run;
model.result('pg2').set('data', 'none');
model.result('pg2').set('legendpos', 'lowerright');
model.result('pg2').run;
model.result('pg3').run;
model.result('pg3').feature('glob1').set('data', 'dset6');
model.result('pg3').feature('glob1').setIndex('descr', 'Gain (I_C/I_B) - Uniform temperature', 0);
model.result('pg3').feature.duplicate('glob2', 'glob1');
model.result('pg3').run;
model.result('pg3').feature('glob2').set('data', 'dset7');
model.result('pg3').feature('glob2').setIndex('descr', 'Gain (I_C/I_B) - Thermal coupling', 0);
model.result('pg3').feature('glob2').set('linestyle', 'dashed');
model.result('pg3').run;
model.result('pg3').set('legendpos', 'lowerleft');
model.result('pg3').run;
model.result.dataset.create('mir1', 'Mirror2D');
model.result.dataset('mir1').set('data', 'dset7');
model.result.create('pg6', 'PlotGroup2D');
model.result('pg6').run;
model.result('pg6').label('Semiconductor Heat Source');
model.result('pg6').set('data', 'mir1');
model.result('pg6').create('surf1', 'Surface');
model.result('pg6').feature('surf1').set('expr', 'semi.Q_tot');
model.result('pg6').feature('surf1').set('colortable', 'ThermalDark');
model.result('pg6').feature('surf1').set('rangecoloractive', true);
model.result('pg6').feature('surf1').set('rangecolormax', '1e17');
model.result('pg6').feature('surf1').set('rangecolormin', '-1e16');
model.result('pg6').feature('surf1').set('resolution', 'norefine');
model.result('pg6').feature('surf1').set('smooth', 'everywhere');
model.result('pg6').feature('surf1').set('titletype', 'manual');
model.result('pg6').feature('surf1').set('title', 'Semiconductor Heating');
model.result('pg6').run;
model.result.create('pg7', 'PlotGroup2D');
model.result('pg7').run;
model.result('pg7').label('Temperature and Voltage');
model.result('pg7').set('data', 'mir1');
model.result('pg7').create('surf1', 'Surface');
model.result('pg7').feature('surf1').label('Temperature');
model.result('pg7').feature('surf1').set('colortable', 'ThermalDark');
model.result('pg7').run;
model.result('pg7').create('arws1', 'ArrowSurface');
model.result('pg7').feature('arws1').label('Heat Flux');
model.result('pg7').feature('arws1').set('arrowlength', 'logarithmic');
model.result('pg7').feature('arws1').set('color', 'green');
model.result('pg7').run;
model.result('pg7').create('surf2', 'Surface');
model.result('pg7').feature('surf2').label('Voltage');
model.result('pg7').feature('surf2').set('expr', 'V');
model.result('pg7').feature('surf2').set('resolution', 'norefine');
model.result('pg7').feature('surf2').set('smooth', 'everywhere');
model.result('pg7').feature('surf2').create('def1', 'Deform');
model.result('pg7').run;
model.result('pg7').feature('surf2').feature('def1').set('expr', {'0' '1.1'});
model.result('pg7').feature('surf2').feature('def1').set('scaleactive', true);
model.result('pg7').feature('surf2').feature('def1').set('scale', 1);
model.result('pg7').run;
model.result('pg7').run;
model.result('pg7').create('arws2', 'ArrowSurface');
model.result('pg7').feature('arws2').label('Electron Current');
model.result('pg7').feature('arws2').set('expr', {'semi.JnX' 'semi.JnY'});
model.result('pg7').feature('arws2').set('arrowlength', 'logarithmic');
model.result('pg7').feature('arws2').set('color', 'black');
model.result('pg7').feature('arws2').create('def1', 'Deform');
model.result('pg7').run;
model.result('pg7').feature('arws2').feature('def1').set('expr', {'0' '1.1'});
model.result('pg7').feature('arws2').feature('def1').set('scaleactive', true);
model.result('pg7').feature('arws2').feature('def1').set('scale', 1);
model.result('pg7').run;
model.result('pg7').feature.duplicate('arws3', 'arws2');
model.result('pg7').run;
model.result('pg7').feature('arws3').label('Hole Current');
model.result('pg7').feature('arws3').set('expr', {'semi.JpX' 'semi.JpY'});
model.result('pg7').feature('arws3').set('color', 'white');
model.result('pg7').run;
model.result('pg7').set('titletype', 'manual');
model.result('pg7').set('title', 'Temperature and Voltage Distributions');
model.result('pg7').set('showlegendsunit', true);
model.result('pg7').set('legendpos', 'bottom');
model.result('pg7').run;

model.title('Thermal Analysis of a Bipolar Transistor');

model.description(['This model demonstrates how to couple the Semiconductor interface to the Heat Transfer in Solids interface. A thermal analysis is performed on the existing bipolar transistor model in the case when the device is operated in the active-forward configuration.' newline  newline 'The Semiconductor interface calculates the carrier dynamics and currents within the device and outputs a heating term due to electrical processes. This heating term is used as a heat source by the Heat Transfer in Solids interface to calculate the temperature distribution throughout the device.' newline  newline 'The temperature distribution from the Heat Transfer in Solids interface is used to specify the lattice temperature in the Semiconductor interface, which alters the electrical properties and causes changes to the heating term, resulting in a fully coupled model.']);

model.mesh.clearMeshes;

model.sol('sol1').clearSolutionData;
model.sol('sol2').clearSolutionData;
model.sol('sol3').clearSolutionData;
model.sol('sol4').clearSolutionData;
model.sol('sol5').clearSolutionData;
model.sol('sol6').clearSolutionData;
model.sol('sol7').clearSolutionData;

model.label('bipolar_transistor_thermal.mph');

model.modelNode.label('Components');

out = model;
