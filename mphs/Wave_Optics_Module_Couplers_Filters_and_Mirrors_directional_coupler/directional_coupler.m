function out = model
%
% directional_coupler.m
%
% Model exported on May 26 2025, 21:34 by COMSOL 6.2.0.339.

import com.comsol.model.*
import com.comsol.model.util.*

model = ModelUtil.create('Model');

model.modelPath('/Applications/COMSOL62/Multiphysics/applications/Wave_Optics_Module/Couplers_Filters_and_Mirrors');

model.modelNode.create('comp1', true);

model.geom.create('geom1', 3);
model.geom('geom1').model('comp1');

model.mesh.create('mesh1', 'geom1');

model.physics.create('ewbe', 'ElectromagneticWavesBeamEnvelopes', 'geom1');
model.physics('ewbe').model('comp1');

model.study.create('std1');
model.study('std1').create('bma', 'BoundaryModeAnalysis');
model.study('std1').feature('bma').set('shiftactive', false);
model.study('std1').feature('bma').set('conrad', '1');
model.study('std1').feature('bma').set('conradynhm', '1');
model.study('std1').feature('bma').set('linpsolnum', 'auto');
model.study('std1').feature('bma').set('solnum', 'auto');
model.study('std1').feature('bma').set('notsolnum', 'auto');
model.study('std1').feature('bma').set('outputmap', {});
model.study('std1').feature('bma').set('ngenAUX', '1');
model.study('std1').feature('bma').set('goalngenAUX', '1');
model.study('std1').feature('bma').set('ngenAUX', '1');
model.study('std1').feature('bma').set('goalngenAUX', '1');
model.study('std1').feature('bma').setSolveFor('/physics/ewbe', true);
model.study('std1').create('freq', 'Frequency');
model.study('std1').feature('freq').set('solnum', 'auto');
model.study('std1').feature('freq').set('notsolnum', 'auto');
model.study('std1').feature('freq').set('outputmap', {});
model.study('std1').feature('freq').set('ngenAUX', '1');
model.study('std1').feature('freq').set('goalngenAUX', '1');
model.study('std1').feature('freq').set('ngenAUX', '1');
model.study('std1').feature('freq').set('goalngenAUX', '1');
model.study('std1').feature('freq').setSolveFor('/physics/ewbe', true);

model.param.set('lda0', '1.15[um]');
model.param.descr('lda0', 'Wavelength');
model.param.set('f0', 'c_const/lda0');
model.param.descr('f0', 'Frequency');
model.param.set('a', '3[um]');
model.param.descr('a', 'Side of waveguide cross section');
model.param.set('d', '3[um]');
model.param.descr('d', 'Distance between the waveguides');
model.param.set('len', '2.1[mm]');
model.param.descr('len', 'Waveguide length');
model.param.set('width', '6*a');
model.param.descr('width', 'Width of calculation domain');
model.param.set('height', '4*a');
model.param.descr('height', 'Height of calculation domain');
model.param.set('ncl', '3.47');
model.param.descr('ncl', 'Refractive index of GaAs');
model.param.set('dn', '0.005');
model.param.descr('dn', 'Refractive index increase in waveguide core');
model.param.set('nco', 'ncl+dn');
model.param.descr('nco', 'Refractive index in waveguide core');

model.geom('geom1').create('blk1', 'Block');
model.geom('geom1').feature('blk1').set('size', {'len' 'width' 'height'});
model.geom('geom1').feature('blk1').set('base', 'center');
model.geom('geom1').run('blk1');
model.geom('geom1').create('blk2', 'Block');
model.geom('geom1').feature('blk2').set('size', {'len' 'a' 'a'});
model.geom('geom1').feature('blk2').set('base', 'center');
model.geom('geom1').feature('blk2').set('pos', {'0' '-d' '0'});
model.geom('geom1').feature.duplicate('blk3', 'blk2');
model.geom('geom1').feature('blk3').set('pos', {'0' 'd' '0'});
model.geom('geom1').runPre('fin');

model.view('view1').camera.set('viewscaletype', 'automatic');
model.view('view1').camera.set('autocontext', 'anisotropic');
model.view('view1').camera.set('autoupdate', true);

model.geom('geom1').run;

model.material.create('mat1', 'Common', 'comp1');
model.material('mat1').label('GaAs Cladding');
model.material('mat1').propertyGroup.create('RefractiveIndex', 'Refractive_index');
model.material('mat1').propertyGroup('RefractiveIndex').set('n', {'ncl'});
model.material.create('mat2', 'Common', 'comp1');
model.material('mat2').label('Implanted GaAs Core');
model.material('mat2').selection.set([2 3]);
model.material('mat2').propertyGroup.create('RefractiveIndex', 'Refractive_index');
model.material('mat2').propertyGroup('RefractiveIndex').set('n', {'nco'});

model.physics('ewbe').label('Electromagnetic Waves, Beam Envelopes, Unidirectional');
model.physics('ewbe').prop('WaveVector').set('dirCount', 'UniDirectionality');
model.physics('ewbe').prop('WaveVector').set('k1', {'ewbe.beta_1' '0' '0'});
model.physics('ewbe').create('port1', 'Port', 2);
model.physics('ewbe').feature('port1').selection.set([1 5 10]);
model.physics('ewbe').feature('port1').set('PortType', 'Numeric');
model.physics('ewbe').feature.duplicate('port2', 'port1');
model.physics('ewbe').create('port3', 'Port', 2);
model.physics('ewbe').feature('port3').selection.set([16 17 18]);
model.physics('ewbe').feature('port3').set('PortType', 'Numeric');
model.physics('ewbe').feature.duplicate('port4', 'port3');

model.mesh('mesh1').label('Mesh, Unidirectional');

model.physics('ewbe').prop('MeshControl').set('elemCountT', 20);
model.physics('ewbe').prop('MeshControl').set('elemCountL', 20);

model.mesh('mesh1').run;

model.study('std1').label('Study, Unidirectional');
model.study('std1').setGenPlots(false);
model.study('std1').feature('bma').set('neigsactive', true);
model.study('std1').feature('bma').set('neigs', 4);
model.study('std1').feature('bma').set('shiftactive', true);
model.study('std1').feature('bma').set('shift', 'nco');
model.study('std1').feature('bma').set('modeFreq', 'f0');

model.sol.create('sol1');
model.sol('sol1').study('std1');
model.sol('sol1').create('st1', 'StudyStep');
model.sol('sol1').feature('st1').set('study', 'std1');
model.sol('sol1').feature('st1').set('studystep', 'bma');
model.sol('sol1').create('v1', 'Variables');
model.sol('sol1').feature('v1').set('control', 'bma');
model.sol('sol1').create('e1', 'Eigenvalue');
model.sol('sol1').feature('e1').set('neigs', 1);
model.sol('sol1').feature('e1').set('shift', '1');
model.sol('sol1').feature('e1').set('eigref', 'nco');
model.sol('sol1').feature('e1').set('control', 'bma');
model.sol('sol1').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su1', 'StoreSolution');
model.sol('sol1').create('st2', 'StudyStep');
model.sol('sol1').feature('st2').set('study', 'std1');
model.sol('sol1').feature('st2').set('studystep', 'freq');
model.sol('sol1').create('v2', 'Variables');
model.sol('sol1').feature('v2').set('initmethod', 'sol');
model.sol('sol1').feature('v2').set('initsol', 'sol1');
model.sol('sol1').feature('v2').set('notsolmethod', 'sol');
model.sol('sol1').feature('v2').set('notsol', 'sol1');
model.sol('sol1').feature('v2').set('control', 'freq');
model.sol('sol1').create('s1', 'Stationary');
model.sol('sol1').feature('s1').create('p1', 'Parametric');
model.sol('sol1').feature('s1').feature.remove('pDef');
model.sol('sol1').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol1').feature('s1').feature('p1').set('plistarr', {'c_const/1[um]'});
model.sol('sol1').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol1').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol1').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol1').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plotgroup', 'Default');
model.sol('sol1').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol1').feature('s1').feature('p1').set('probes', {});
model.sol('sol1').feature('s1').feature('p1').set('control', 'freq');
model.sol('sol1').feature('s1').set('linpmethod', 'sol');
model.sol('sol1').feature('s1').set('linpsol', 'zero');
model.sol('sol1').feature('s1').set('control', 'freq');
model.sol('sol1').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol1').feature('s1').feature.remove('fcDef');
model.sol('sol1').feature('v2').set('notsolnum', 'auto');
model.sol('sol1').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('solnum', 'auto');
model.sol('sol1').feature('v2').set('solvertype', 'solnum');
model.sol('sol1').attach('std1');
model.sol('sol1').runFromTo('st1', 'su1');

model.result.create('pg1', 'PlotGroup3D');
model.result('pg1').run;
model.result('pg1').label('Electric Field, Unidirectional');
model.result('pg1').create('surf1', 'Surface');
model.result('pg1').feature('surf1').set('expr', 'ewbe.tEbm1z');
model.result('pg1').feature('surf1').set('descr', 'Boundary mode electric field, z-component');
model.result('pg1').feature('surf1').set('colortable', 'Wave');
model.result('pg1').run;
model.result('pg1').set('looplevel', [4]);
model.result('pg1').run;
model.result('pg1').set('looplevel', [2]);
model.result('pg1').run;
model.result('pg1').run;
model.result('pg1').feature('surf1').set('expr', 'ewbe.tEbm1y');
model.result('pg1').run;
model.result('pg1').set('looplevel', [3]);
model.result('pg1').run;
model.result('pg1').set('looplevel', [1]);
model.result('pg1').run;
model.result.numerical.create('gev1', 'EvalGlobal');
model.result.numerical('gev1').set('expr', {'ewbe.beta_1'});
model.result.numerical('gev1').set('descr', {'Propagation constant'});
model.result.numerical('gev1').set('unit', {'rad/m'});
model.result.table.create('tbl1', 'Table');
model.result.table('tbl1').comments('Global Evaluation 1');
model.result.numerical('gev1').set('table', 'tbl1');
model.result.numerical('gev1').setResult;

model.study('std1').feature('bma').set('neigs', 1);
model.study('std1').feature('bma').set('shift', '3.4716717443092047');
model.study('std1').feature.duplicate('bma1', 'bma');
model.study('std1').feature('bma1').set('shift', '3.4714219480792172');
model.study('std1').feature('bma1').set('PortName', '2');
model.study('std1').feature.duplicate('bma2', 'bma');
model.study('std1').feature.duplicate('bma3', 'bma1');
model.study('std1').feature('bma2').set('PortName', '3');
model.study('std1').feature('bma3').set('PortName', '4');
model.study('std1').feature('freq').set('plist', 'f0');
model.study('std1').feature.move('freq', 2);
model.study('std1').feature.move('freq', 3);
model.study('std1').feature.move('freq', 4);

model.sol('sol1').study('std1');

model.study('std1').feature('bma3').set('notsolnum', 'auto');
model.study('std1').feature('bma3').set('notsolvertype', 'solnum');
model.study('std1').feature('bma3').set('notsolnumhide', 'off');
model.study('std1').feature('bma3').set('notstudyhide', 'off');
model.study('std1').feature('bma3').set('notsolhide', 'off');
model.study('std1').feature('bma3').set('solnum', 'auto');
model.study('std1').feature('bma3').set('solvertype', 'solnum');
model.study('std1').feature('bma3').set('solnumhide', 'off');
model.study('std1').feature('bma3').set('initstudyhide', 'off');
model.study('std1').feature('bma3').set('initsolhide', 'off');
model.study('std1').feature('bma3').set('linpsolnum', 'auto');
model.study('std1').feature('bma3').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma3').set('linpsolnumhide', 'off');
model.study('std1').feature('bma3').set('linpstudyhide', 'off');
model.study('std1').feature('bma3').set('linpsolhide', 'off');
model.study('std1').feature('bma2').set('notsolnum', 'auto');
model.study('std1').feature('bma2').set('notsolvertype', 'solnum');
model.study('std1').feature('bma2').set('notsolnumhide', 'off');
model.study('std1').feature('bma2').set('notstudyhide', 'off');
model.study('std1').feature('bma2').set('notsolhide', 'off');
model.study('std1').feature('bma2').set('solnum', 'auto');
model.study('std1').feature('bma2').set('solvertype', 'solnum');
model.study('std1').feature('bma2').set('solnumhide', 'off');
model.study('std1').feature('bma2').set('initstudyhide', 'off');
model.study('std1').feature('bma2').set('initsolhide', 'off');
model.study('std1').feature('bma2').set('linpsolnum', 'auto');
model.study('std1').feature('bma2').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma2').set('linpsolnumhide', 'off');
model.study('std1').feature('bma2').set('linpstudyhide', 'off');
model.study('std1').feature('bma2').set('linpsolhide', 'off');
model.study('std1').feature('bma1').set('notsolnum', 'auto');
model.study('std1').feature('bma1').set('notsolvertype', 'solnum');
model.study('std1').feature('bma1').set('notsolnumhide', 'off');
model.study('std1').feature('bma1').set('notstudyhide', 'off');
model.study('std1').feature('bma1').set('notsolhide', 'off');
model.study('std1').feature('bma1').set('solnum', 'auto');
model.study('std1').feature('bma1').set('solvertype', 'solnum');
model.study('std1').feature('bma1').set('solnumhide', 'off');
model.study('std1').feature('bma1').set('initstudyhide', 'off');
model.study('std1').feature('bma1').set('initsolhide', 'off');
model.study('std1').feature('bma1').set('linpsolnum', 'auto');
model.study('std1').feature('bma1').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma1').set('linpsolnumhide', 'off');
model.study('std1').feature('bma1').set('linpstudyhide', 'off');
model.study('std1').feature('bma1').set('linpsolhide', 'off');

model.sol('sol2').copySolution('sol3');

model.result.dataset('dset2').set('solution', 'none');

model.sol('sol1').feature.remove('s1');
model.sol('sol1').feature.remove('v2');
model.sol('sol1').feature.remove('st2');
model.sol('sol1').feature.remove('su1');
model.sol('sol1').feature.remove('e1');
model.sol('sol1').feature.remove('v1');
model.sol('sol1').feature.remove('st1');
model.sol('sol3').copySolution('sol2');
model.sol.remove('sol3');
model.sol('sol2').label('Solution Store 1');

model.result.dataset.remove('dset4');

model.sol('sol1').create('st1', 'StudyStep');
model.sol('sol1').feature('st1').set('study', 'std1');
model.sol('sol1').feature('st1').set('studystep', 'bma');
model.sol('sol1').create('v1', 'Variables');
model.sol('sol1').feature('v1').set('control', 'bma');
model.sol('sol1').create('e1', 'Eigenvalue');
model.sol('sol1').feature('e1').set('neigs', 1);
model.sol('sol1').feature('e1').set('shift', '1');
model.sol('sol1').feature('e1').set('eigref', '3.4716717443092047');
model.sol('sol1').feature('e1').set('control', 'bma');
model.sol('sol1').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su1', 'StoreSolution');
model.sol('sol1').feature('su1').set('sol', 'sol2');
model.sol('sol1').feature('su1').label('Solution Store 1');
model.sol('sol1').create('st2', 'StudyStep');
model.sol('sol1').feature('st2').set('study', 'std1');
model.sol('sol1').feature('st2').set('studystep', 'bma1');
model.sol('sol1').create('v2', 'Variables');
model.sol('sol1').feature('v2').set('initmethod', 'sol');
model.sol('sol1').feature('v2').set('initsol', 'sol1');
model.sol('sol1').feature('v2').set('notsolmethod', 'sol');
model.sol('sol1').feature('v2').set('notsol', 'sol1');
model.sol('sol1').feature('v2').set('control', 'bma1');
model.sol('sol1').create('e2', 'Eigenvalue');
model.sol('sol1').feature('e2').set('neigs', 1);
model.sol('sol1').feature('e2').set('shift', '1');
model.sol('sol1').feature('e2').set('eigref', '3.4714219480792172');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').set('linpmethod', 'sol');
model.sol('sol1').feature('e2').set('linpsol', 'sol1');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su2', 'StoreSolution');
model.sol('sol1').create('st3', 'StudyStep');
model.sol('sol1').feature('st3').set('study', 'std1');
model.sol('sol1').feature('st3').set('studystep', 'bma2');
model.sol('sol1').create('v3', 'Variables');
model.sol('sol1').feature('v3').set('initmethod', 'sol');
model.sol('sol1').feature('v3').set('initsol', 'sol1');
model.sol('sol1').feature('v3').set('notsolmethod', 'sol');
model.sol('sol1').feature('v3').set('notsol', 'sol1');
model.sol('sol1').feature('v3').set('control', 'bma2');
model.sol('sol1').create('e3', 'Eigenvalue');
model.sol('sol1').feature('e3').set('neigs', 1);
model.sol('sol1').feature('e3').set('shift', '1');
model.sol('sol1').feature('e3').set('eigref', '3.4716717443092047');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').set('linpmethod', 'sol');
model.sol('sol1').feature('e3').set('linpsol', 'sol1');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su3', 'StoreSolution');
model.sol('sol1').create('st4', 'StudyStep');
model.sol('sol1').feature('st4').set('study', 'std1');
model.sol('sol1').feature('st4').set('studystep', 'bma3');
model.sol('sol1').create('v4', 'Variables');
model.sol('sol1').feature('v4').set('initmethod', 'sol');
model.sol('sol1').feature('v4').set('initsol', 'sol1');
model.sol('sol1').feature('v4').set('notsolmethod', 'sol');
model.sol('sol1').feature('v4').set('notsol', 'sol1');
model.sol('sol1').feature('v4').set('control', 'bma3');
model.sol('sol1').create('e4', 'Eigenvalue');
model.sol('sol1').feature('e4').set('neigs', 1);
model.sol('sol1').feature('e4').set('shift', '1');
model.sol('sol1').feature('e4').set('eigref', '3.4714219480792172');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').set('linpmethod', 'sol');
model.sol('sol1').feature('e4').set('linpsol', 'sol1');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su4', 'StoreSolution');
model.sol('sol1').create('st5', 'StudyStep');
model.sol('sol1').feature('st5').set('study', 'std1');
model.sol('sol1').feature('st5').set('studystep', 'freq');
model.sol('sol1').create('v5', 'Variables');
model.sol('sol1').feature('v5').set('initmethod', 'sol');
model.sol('sol1').feature('v5').set('initsol', 'sol1');
model.sol('sol1').feature('v5').set('notsolmethod', 'sol');
model.sol('sol1').feature('v5').set('notsol', 'sol1');
model.sol('sol1').feature('v5').set('control', 'freq');
model.sol('sol1').create('s1', 'Stationary');
model.sol('sol1').feature('s1').create('p1', 'Parametric');
model.sol('sol1').feature('s1').feature.remove('pDef');
model.sol('sol1').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol1').feature('s1').feature('p1').set('plistarr', {'f0'});
model.sol('sol1').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol1').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol1').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol1').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plotgroup', 'pg1');
model.sol('sol1').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol1').feature('s1').feature('p1').set('probes', {});
model.sol('sol1').feature('s1').feature('p1').set('control', 'freq');
model.sol('sol1').feature('s1').set('linpmethod', 'sol');
model.sol('sol1').feature('s1').set('linpsol', 'zero');
model.sol('sol1').feature('s1').set('control', 'freq');
model.sol('sol1').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol1').feature('s1').feature.remove('fcDef');

model.result.dataset('dset2').set('solution', 'sol2');

model.sol('sol1').feature('v5').set('notsolnum', 'auto');
model.sol('sol1').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v5').set('solnum', 'auto');
model.sol('sol1').feature('v5').set('solvertype', 'solnum');
model.sol('sol1').feature('e4').set('linpsolnum', 'auto');
model.sol('sol1').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('notsolnum', 'auto');
model.sol('sol1').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('solnum', 'auto');
model.sol('sol1').feature('v4').set('solvertype', 'solnum');
model.sol('sol1').feature('e3').set('linpsolnum', 'auto');
model.sol('sol1').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('notsolnum', 'auto');
model.sol('sol1').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('solnum', 'auto');
model.sol('sol1').feature('v3').set('solvertype', 'solnum');
model.sol('sol1').feature('e2').set('linpsolnum', 'auto');
model.sol('sol1').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('notsolnum', 'auto');
model.sol('sol1').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('solnum', 'auto');
model.sol('sol1').feature('v2').set('solvertype', 'solnum');

model.study('std1').feature('bma3').set('notsolnum', 'auto');
model.study('std1').feature('bma3').set('notsolvertype', 'solnum');
model.study('std1').feature('bma3').set('notsolnumhide', 'off');
model.study('std1').feature('bma3').set('notstudyhide', 'off');
model.study('std1').feature('bma3').set('notsolhide', 'off');
model.study('std1').feature('bma3').set('solnum', 'auto');
model.study('std1').feature('bma3').set('solvertype', 'solnum');
model.study('std1').feature('bma3').set('solnumhide', 'off');
model.study('std1').feature('bma3').set('initstudyhide', 'off');
model.study('std1').feature('bma3').set('initsolhide', 'off');
model.study('std1').feature('bma3').set('linpsolnum', 'auto');
model.study('std1').feature('bma3').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma3').set('linpsolnumhide', 'off');
model.study('std1').feature('bma3').set('linpstudyhide', 'off');
model.study('std1').feature('bma3').set('linpsolhide', 'off');
model.study('std1').feature('bma2').set('notsolnum', 'auto');
model.study('std1').feature('bma2').set('notsolvertype', 'solnum');
model.study('std1').feature('bma2').set('notsolnumhide', 'off');
model.study('std1').feature('bma2').set('notstudyhide', 'off');
model.study('std1').feature('bma2').set('notsolhide', 'off');
model.study('std1').feature('bma2').set('solnum', 'auto');
model.study('std1').feature('bma2').set('solvertype', 'solnum');
model.study('std1').feature('bma2').set('solnumhide', 'off');
model.study('std1').feature('bma2').set('initstudyhide', 'off');
model.study('std1').feature('bma2').set('initsolhide', 'off');
model.study('std1').feature('bma2').set('linpsolnum', 'auto');
model.study('std1').feature('bma2').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma2').set('linpsolnumhide', 'off');
model.study('std1').feature('bma2').set('linpstudyhide', 'off');
model.study('std1').feature('bma2').set('linpsolhide', 'off');
model.study('std1').feature('bma1').set('notsolnum', 'auto');
model.study('std1').feature('bma1').set('notsolvertype', 'solnum');
model.study('std1').feature('bma1').set('notsolnumhide', 'off');
model.study('std1').feature('bma1').set('notstudyhide', 'off');
model.study('std1').feature('bma1').set('notsolhide', 'off');
model.study('std1').feature('bma1').set('solnum', 'auto');
model.study('std1').feature('bma1').set('solvertype', 'solnum');
model.study('std1').feature('bma1').set('solnumhide', 'off');
model.study('std1').feature('bma1').set('initstudyhide', 'off');
model.study('std1').feature('bma1').set('initsolhide', 'off');
model.study('std1').feature('bma1').set('linpsolnum', 'auto');
model.study('std1').feature('bma1').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma1').set('linpsolnumhide', 'off');
model.study('std1').feature('bma1').set('linpstudyhide', 'off');
model.study('std1').feature('bma1').set('linpsolhide', 'off');

model.sol('sol1').attach('std1');
model.sol('sol1').runAll;

model.result('pg1').run;
model.result('pg1').run;
model.result('pg1').feature.remove('surf1');
model.result('pg1').run;
model.result('pg1').create('slc1', 'Slice');
model.result('pg1').feature('slc1').set('quickplane', 'xy');
model.result('pg1').feature('slc1').set('quickznumber', 1);
model.result('pg1').feature('slc1').set('smooth', 'everywhere');
model.result('pg1').feature('slc1').create('def1', 'Deform');
model.result('pg1').run;
model.result('pg1').feature('slc1').feature('def1').set('expr', {'' '' 'patcheval(ewbe.normE,2)'});
model.result('pg1').run;

model.physics('ewbe').feature('port2').set('Thetap', 'pi');

model.sol('sol1').study('std1');

model.study('std1').feature('bma3').set('notsolnum', 'auto');
model.study('std1').feature('bma3').set('notsolvertype', 'solnum');
model.study('std1').feature('bma3').set('notsolnumhide', 'off');
model.study('std1').feature('bma3').set('notstudyhide', 'off');
model.study('std1').feature('bma3').set('notsolhide', 'off');
model.study('std1').feature('bma3').set('solnum', 'auto');
model.study('std1').feature('bma3').set('solvertype', 'solnum');
model.study('std1').feature('bma3').set('solnumhide', 'off');
model.study('std1').feature('bma3').set('initstudyhide', 'off');
model.study('std1').feature('bma3').set('initsolhide', 'off');
model.study('std1').feature('bma3').set('linpsolnum', 'auto');
model.study('std1').feature('bma3').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma3').set('linpsolnumhide', 'off');
model.study('std1').feature('bma3').set('linpstudyhide', 'off');
model.study('std1').feature('bma3').set('linpsolhide', 'off');
model.study('std1').feature('bma2').set('notsolnum', 'auto');
model.study('std1').feature('bma2').set('notsolvertype', 'solnum');
model.study('std1').feature('bma2').set('notsolnumhide', 'off');
model.study('std1').feature('bma2').set('notstudyhide', 'off');
model.study('std1').feature('bma2').set('notsolhide', 'off');
model.study('std1').feature('bma2').set('solnum', 'auto');
model.study('std1').feature('bma2').set('solvertype', 'solnum');
model.study('std1').feature('bma2').set('solnumhide', 'off');
model.study('std1').feature('bma2').set('initstudyhide', 'off');
model.study('std1').feature('bma2').set('initsolhide', 'off');
model.study('std1').feature('bma2').set('linpsolnum', 'auto');
model.study('std1').feature('bma2').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma2').set('linpsolnumhide', 'off');
model.study('std1').feature('bma2').set('linpstudyhide', 'off');
model.study('std1').feature('bma2').set('linpsolhide', 'off');
model.study('std1').feature('bma1').set('notsolnum', 'auto');
model.study('std1').feature('bma1').set('notsolvertype', 'solnum');
model.study('std1').feature('bma1').set('notsolnumhide', 'off');
model.study('std1').feature('bma1').set('notstudyhide', 'off');
model.study('std1').feature('bma1').set('notsolhide', 'off');
model.study('std1').feature('bma1').set('solnum', 'auto');
model.study('std1').feature('bma1').set('solvertype', 'solnum');
model.study('std1').feature('bma1').set('solnumhide', 'off');
model.study('std1').feature('bma1').set('initstudyhide', 'off');
model.study('std1').feature('bma1').set('initsolhide', 'off');
model.study('std1').feature('bma1').set('linpsolnum', 'auto');
model.study('std1').feature('bma1').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma1').set('linpsolnumhide', 'off');
model.study('std1').feature('bma1').set('linpstudyhide', 'off');
model.study('std1').feature('bma1').set('linpsolhide', 'off');

model.sol('sol2').copySolution('sol6');
model.sol('sol3').copySolution('sol7');
model.sol('sol4').copySolution('sol8');
model.sol('sol5').copySolution('sol9');

model.result.dataset('dset4').set('solution', 'none');
model.result.dataset('dset3').set('solution', 'none');
model.result.dataset('dset5').set('solution', 'none');
model.result.dataset('dset2').set('solution', 'none');

model.sol('sol1').feature.remove('s1');
model.sol('sol1').feature.remove('v5');
model.sol('sol1').feature.remove('st5');
model.sol('sol1').feature.remove('su4');
model.sol('sol1').feature.remove('e4');
model.sol('sol1').feature.remove('v4');
model.sol('sol1').feature.remove('st4');
model.sol('sol1').feature.remove('su3');
model.sol('sol1').feature.remove('e3');
model.sol('sol1').feature.remove('v3');
model.sol('sol1').feature.remove('st3');
model.sol('sol1').feature.remove('su2');
model.sol('sol1').feature.remove('e2');
model.sol('sol1').feature.remove('v2');
model.sol('sol1').feature.remove('st2');
model.sol('sol1').feature.remove('su1');
model.sol('sol1').feature.remove('e1');
model.sol('sol1').feature.remove('v1');
model.sol('sol1').feature.remove('st1');
model.sol('sol8').copySolution('sol4');
model.sol.remove('sol8');
model.sol('sol4').label('Solution Store 3');

model.result.dataset.remove('dset10');

model.sol('sol7').copySolution('sol3');
model.sol.remove('sol7');
model.sol('sol3').label('Solution Store 2');

model.result.dataset.remove('dset10');

model.sol('sol9').copySolution('sol5');
model.sol.remove('sol9');
model.sol('sol5').label('Solution Store 4');

model.result.dataset.remove('dset10');

model.sol('sol6').copySolution('sol2');
model.sol.remove('sol6');
model.sol('sol2').label('Solution Store 1');

model.result.dataset.remove('dset7');

model.sol('sol1').create('st1', 'StudyStep');
model.sol('sol1').feature('st1').set('study', 'std1');
model.sol('sol1').feature('st1').set('studystep', 'bma');
model.sol('sol1').create('v1', 'Variables');
model.sol('sol1').feature('v1').set('control', 'bma');
model.sol('sol1').create('e1', 'Eigenvalue');
model.sol('sol1').feature('e1').set('neigs', 1);
model.sol('sol1').feature('e1').set('shift', '1');
model.sol('sol1').feature('e1').set('eigref', '3.4716717443092047');
model.sol('sol1').feature('e1').set('control', 'bma');
model.sol('sol1').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su1', 'StoreSolution');
model.sol('sol1').feature('su1').set('sol', 'sol2');
model.sol('sol1').feature('su1').label('Solution Store 1');
model.sol('sol1').create('st2', 'StudyStep');
model.sol('sol1').feature('st2').set('study', 'std1');
model.sol('sol1').feature('st2').set('studystep', 'bma1');
model.sol('sol1').create('v2', 'Variables');
model.sol('sol1').feature('v2').set('initmethod', 'sol');
model.sol('sol1').feature('v2').set('initsol', 'sol1');
model.sol('sol1').feature('v2').set('notsolmethod', 'sol');
model.sol('sol1').feature('v2').set('notsol', 'sol1');
model.sol('sol1').feature('v2').set('control', 'bma1');
model.sol('sol1').create('e2', 'Eigenvalue');
model.sol('sol1').feature('e2').set('neigs', 1);
model.sol('sol1').feature('e2').set('shift', '1');
model.sol('sol1').feature('e2').set('eigref', '3.4714219480792172');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').set('linpmethod', 'sol');
model.sol('sol1').feature('e2').set('linpsol', 'sol1');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su2', 'StoreSolution');
model.sol('sol1').feature('su2').set('sol', 'sol3');
model.sol('sol1').feature('su2').label('Solution Store 2');
model.sol('sol1').create('st3', 'StudyStep');
model.sol('sol1').feature('st3').set('study', 'std1');
model.sol('sol1').feature('st3').set('studystep', 'bma2');
model.sol('sol1').create('v3', 'Variables');
model.sol('sol1').feature('v3').set('initmethod', 'sol');
model.sol('sol1').feature('v3').set('initsol', 'sol1');
model.sol('sol1').feature('v3').set('notsolmethod', 'sol');
model.sol('sol1').feature('v3').set('notsol', 'sol1');
model.sol('sol1').feature('v3').set('control', 'bma2');
model.sol('sol1').create('e3', 'Eigenvalue');
model.sol('sol1').feature('e3').set('neigs', 1);
model.sol('sol1').feature('e3').set('shift', '1');
model.sol('sol1').feature('e3').set('eigref', '3.4716717443092047');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').set('linpmethod', 'sol');
model.sol('sol1').feature('e3').set('linpsol', 'sol1');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su3', 'StoreSolution');
model.sol('sol1').feature('su3').set('sol', 'sol4');
model.sol('sol1').feature('su3').label('Solution Store 3');
model.sol('sol1').create('st4', 'StudyStep');
model.sol('sol1').feature('st4').set('study', 'std1');
model.sol('sol1').feature('st4').set('studystep', 'bma3');
model.sol('sol1').create('v4', 'Variables');
model.sol('sol1').feature('v4').set('initmethod', 'sol');
model.sol('sol1').feature('v4').set('initsol', 'sol1');
model.sol('sol1').feature('v4').set('notsolmethod', 'sol');
model.sol('sol1').feature('v4').set('notsol', 'sol1');
model.sol('sol1').feature('v4').set('control', 'bma3');
model.sol('sol1').create('e4', 'Eigenvalue');
model.sol('sol1').feature('e4').set('neigs', 1);
model.sol('sol1').feature('e4').set('shift', '1');
model.sol('sol1').feature('e4').set('eigref', '3.4714219480792172');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').set('linpmethod', 'sol');
model.sol('sol1').feature('e4').set('linpsol', 'sol1');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su4', 'StoreSolution');
model.sol('sol1').feature('su4').set('sol', 'sol5');
model.sol('sol1').feature('su4').label('Solution Store 4');
model.sol('sol1').create('st5', 'StudyStep');
model.sol('sol1').feature('st5').set('study', 'std1');
model.sol('sol1').feature('st5').set('studystep', 'freq');
model.sol('sol1').create('v5', 'Variables');
model.sol('sol1').feature('v5').set('initmethod', 'sol');
model.sol('sol1').feature('v5').set('initsol', 'sol1');
model.sol('sol1').feature('v5').set('notsolmethod', 'sol');
model.sol('sol1').feature('v5').set('notsol', 'sol1');
model.sol('sol1').feature('v5').set('control', 'freq');
model.sol('sol1').create('s1', 'Stationary');
model.sol('sol1').feature('s1').create('p1', 'Parametric');
model.sol('sol1').feature('s1').feature.remove('pDef');
model.sol('sol1').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol1').feature('s1').feature('p1').set('plistarr', {'f0'});
model.sol('sol1').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol1').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol1').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol1').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plotgroup', 'pg1');
model.sol('sol1').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol1').feature('s1').feature('p1').set('probes', {});
model.sol('sol1').feature('s1').feature('p1').set('control', 'freq');
model.sol('sol1').feature('s1').set('linpmethod', 'sol');
model.sol('sol1').feature('s1').set('linpsol', 'zero');
model.sol('sol1').feature('s1').set('control', 'freq');
model.sol('sol1').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol1').feature('s1').feature.remove('fcDef');

model.result.dataset('dset5').set('solution', 'sol5');
model.result.dataset('dset4').set('solution', 'sol4');
model.result.dataset('dset3').set('solution', 'sol3');
model.result.dataset('dset2').set('solution', 'sol2');

model.sol('sol1').feature('v5').set('notsolnum', 'auto');
model.sol('sol1').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v5').set('solnum', 'auto');
model.sol('sol1').feature('v5').set('solvertype', 'solnum');
model.sol('sol1').feature('e4').set('linpsolnum', 'auto');
model.sol('sol1').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('notsolnum', 'auto');
model.sol('sol1').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('solnum', 'auto');
model.sol('sol1').feature('v4').set('solvertype', 'solnum');
model.sol('sol1').feature('e3').set('linpsolnum', 'auto');
model.sol('sol1').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('notsolnum', 'auto');
model.sol('sol1').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('solnum', 'auto');
model.sol('sol1').feature('v3').set('solvertype', 'solnum');
model.sol('sol1').feature('e2').set('linpsolnum', 'auto');
model.sol('sol1').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('notsolnum', 'auto');
model.sol('sol1').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('solnum', 'auto');
model.sol('sol1').feature('v2').set('solvertype', 'solnum');

model.study('std1').feature('bma3').set('notsolnum', 'auto');
model.study('std1').feature('bma3').set('notsolvertype', 'solnum');
model.study('std1').feature('bma3').set('notsolnumhide', 'off');
model.study('std1').feature('bma3').set('notstudyhide', 'off');
model.study('std1').feature('bma3').set('notsolhide', 'off');
model.study('std1').feature('bma3').set('solnum', 'auto');
model.study('std1').feature('bma3').set('solvertype', 'solnum');
model.study('std1').feature('bma3').set('solnumhide', 'off');
model.study('std1').feature('bma3').set('initstudyhide', 'off');
model.study('std1').feature('bma3').set('initsolhide', 'off');
model.study('std1').feature('bma3').set('linpsolnum', 'auto');
model.study('std1').feature('bma3').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma3').set('linpsolnumhide', 'off');
model.study('std1').feature('bma3').set('linpstudyhide', 'off');
model.study('std1').feature('bma3').set('linpsolhide', 'off');
model.study('std1').feature('bma2').set('notsolnum', 'auto');
model.study('std1').feature('bma2').set('notsolvertype', 'solnum');
model.study('std1').feature('bma2').set('notsolnumhide', 'off');
model.study('std1').feature('bma2').set('notstudyhide', 'off');
model.study('std1').feature('bma2').set('notsolhide', 'off');
model.study('std1').feature('bma2').set('solnum', 'auto');
model.study('std1').feature('bma2').set('solvertype', 'solnum');
model.study('std1').feature('bma2').set('solnumhide', 'off');
model.study('std1').feature('bma2').set('initstudyhide', 'off');
model.study('std1').feature('bma2').set('initsolhide', 'off');
model.study('std1').feature('bma2').set('linpsolnum', 'auto');
model.study('std1').feature('bma2').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma2').set('linpsolnumhide', 'off');
model.study('std1').feature('bma2').set('linpstudyhide', 'off');
model.study('std1').feature('bma2').set('linpsolhide', 'off');
model.study('std1').feature('bma1').set('notsolnum', 'auto');
model.study('std1').feature('bma1').set('notsolvertype', 'solnum');
model.study('std1').feature('bma1').set('notsolnumhide', 'off');
model.study('std1').feature('bma1').set('notstudyhide', 'off');
model.study('std1').feature('bma1').set('notsolhide', 'off');
model.study('std1').feature('bma1').set('solnum', 'auto');
model.study('std1').feature('bma1').set('solvertype', 'solnum');
model.study('std1').feature('bma1').set('solnumhide', 'off');
model.study('std1').feature('bma1').set('initstudyhide', 'off');
model.study('std1').feature('bma1').set('initsolhide', 'off');
model.study('std1').feature('bma1').set('linpsolnum', 'auto');
model.study('std1').feature('bma1').set('linpsolvertype', 'solnum');
model.study('std1').feature('bma1').set('linpsolnumhide', 'off');
model.study('std1').feature('bma1').set('linpstudyhide', 'off');
model.study('std1').feature('bma1').set('linpsolhide', 'off');

model.sol('sol1').attach('std1');
model.sol('sol1').runAll;

model.result('pg1').run;

model.physics.copy('ewbe2', 'ewbe', 'comp1');
model.physics('ewbe2').label('Electromagnetic Waves, Beam Envelopes, Bidirectional');
model.physics('ewbe2').prop('WaveVector').set('dirCount', 'BiDirectionality');
model.physics('ewbe2').prop('WaveVector').set('k1', {'ewbe2.beta_1' '0' '0'});
model.physics('ewbe2').prop('WaveVector').set('k2', {'ewbe2.beta_2' 'ewbe2.k1y' 'ewbe2.k1z'});

model.mesh('mesh1').contribute('physics/ewbe2', false);
model.mesh.create('mesh2', 'geom1');
model.mesh('mesh2').label('Mesh, Bidirectional');
model.mesh('mesh2').contribute('physics/ewbe', false);

model.physics('ewbe2').prop('MeshControl').set('elemCountL', 5);

model.mesh('mesh2').run;

model.study.create('std2');
model.study('std2').label('Study, Bidirectional');
model.study('std2').setGenPlots(false);
model.study('std2').feature.copy('bma1', 'std1/bma');
model.study('std2').feature.copy('bma2', 'std1/bma1');
model.study('std2').feature.copy('bma3', 'std1/bma2');
model.study('std2').feature.copy('bma4', 'std1/bma3');
model.study('std2').feature.copy('freq1', 'std1/freq');
model.study('std2').feature('bma1').setEntry('activate', 'ewbe', false);
model.study('std2').feature('bma1').setEntry('mesh', 'geom1', 'mesh2');
model.study('std2').feature('bma2').setEntry('activate', 'ewbe', false);
model.study('std2').feature('bma2').setEntry('mesh', 'geom1', 'mesh2');
model.study('std2').feature('bma3').setEntry('activate', 'ewbe', false);
model.study('std2').feature('bma3').setEntry('mesh', 'geom1', 'mesh2');
model.study('std2').feature('bma4').setEntry('activate', 'ewbe', false);
model.study('std2').feature('bma4').setEntry('mesh', 'geom1', 'mesh2');
model.study('std2').feature('freq1').setEntry('activate', 'ewbe', false);
model.study('std2').feature('freq1').setEntry('mesh', 'geom1', 'mesh2');

model.sol.create('sol6');
model.sol('sol6').study('std2');
model.sol('sol6').create('st1', 'StudyStep');
model.sol('sol6').feature('st1').set('study', 'std2');
model.sol('sol6').feature('st1').set('studystep', 'bma1');
model.sol('sol6').create('v1', 'Variables');
model.sol('sol6').feature('v1').set('control', 'bma1');
model.sol('sol6').create('e1', 'Eigenvalue');
model.sol('sol6').feature('e1').set('neigs', 1);
model.sol('sol6').feature('e1').set('shift', '1');
model.sol('sol6').feature('e1').set('eigref', '3.4716717443092047');
model.sol('sol6').feature('e1').set('control', 'bma1');
model.sol('sol6').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol6').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol6').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol6').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol6').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol6').create('su1', 'StoreSolution');
model.sol('sol6').create('st2', 'StudyStep');
model.sol('sol6').feature('st2').set('study', 'std2');
model.sol('sol6').feature('st2').set('studystep', 'bma2');
model.sol('sol6').create('v2', 'Variables');
model.sol('sol6').feature('v2').set('initmethod', 'sol');
model.sol('sol6').feature('v2').set('initsol', 'sol6');
model.sol('sol6').feature('v2').set('notsolmethod', 'sol');
model.sol('sol6').feature('v2').set('notsol', 'sol6');
model.sol('sol6').feature('v2').set('control', 'bma2');
model.sol('sol6').create('e2', 'Eigenvalue');
model.sol('sol6').feature('e2').set('neigs', 1);
model.sol('sol6').feature('e2').set('shift', '1');
model.sol('sol6').feature('e2').set('eigref', '3.4714219480792172');
model.sol('sol6').feature('e2').set('control', 'bma2');
model.sol('sol6').feature('e2').set('linpmethod', 'sol');
model.sol('sol6').feature('e2').set('linpsol', 'sol6');
model.sol('sol6').feature('e2').set('control', 'bma2');
model.sol('sol6').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol6').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol6').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol6').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol6').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol6').create('su2', 'StoreSolution');
model.sol('sol6').create('st3', 'StudyStep');
model.sol('sol6').feature('st3').set('study', 'std2');
model.sol('sol6').feature('st3').set('studystep', 'bma3');
model.sol('sol6').create('v3', 'Variables');
model.sol('sol6').feature('v3').set('initmethod', 'sol');
model.sol('sol6').feature('v3').set('initsol', 'sol6');
model.sol('sol6').feature('v3').set('notsolmethod', 'sol');
model.sol('sol6').feature('v3').set('notsol', 'sol6');
model.sol('sol6').feature('v3').set('control', 'bma3');
model.sol('sol6').create('e3', 'Eigenvalue');
model.sol('sol6').feature('e3').set('neigs', 1);
model.sol('sol6').feature('e3').set('shift', '1');
model.sol('sol6').feature('e3').set('eigref', '3.4716717443092047');
model.sol('sol6').feature('e3').set('control', 'bma3');
model.sol('sol6').feature('e3').set('linpmethod', 'sol');
model.sol('sol6').feature('e3').set('linpsol', 'sol6');
model.sol('sol6').feature('e3').set('control', 'bma3');
model.sol('sol6').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol6').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol6').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol6').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol6').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol6').create('su3', 'StoreSolution');
model.sol('sol6').create('st4', 'StudyStep');
model.sol('sol6').feature('st4').set('study', 'std2');
model.sol('sol6').feature('st4').set('studystep', 'bma4');
model.sol('sol6').create('v4', 'Variables');
model.sol('sol6').feature('v4').set('initmethod', 'sol');
model.sol('sol6').feature('v4').set('initsol', 'sol6');
model.sol('sol6').feature('v4').set('notsolmethod', 'sol');
model.sol('sol6').feature('v4').set('notsol', 'sol6');
model.sol('sol6').feature('v4').set('control', 'bma4');
model.sol('sol6').create('e4', 'Eigenvalue');
model.sol('sol6').feature('e4').set('neigs', 1);
model.sol('sol6').feature('e4').set('shift', '1');
model.sol('sol6').feature('e4').set('eigref', '3.4714219480792172');
model.sol('sol6').feature('e4').set('control', 'bma4');
model.sol('sol6').feature('e4').set('linpmethod', 'sol');
model.sol('sol6').feature('e4').set('linpsol', 'sol6');
model.sol('sol6').feature('e4').set('control', 'bma4');
model.sol('sol6').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol6').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol6').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol6').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol6').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol6').create('su4', 'StoreSolution');
model.sol('sol6').create('st5', 'StudyStep');
model.sol('sol6').feature('st5').set('study', 'std2');
model.sol('sol6').feature('st5').set('studystep', 'freq1');
model.sol('sol6').create('v5', 'Variables');
model.sol('sol6').feature('v5').set('initmethod', 'sol');
model.sol('sol6').feature('v5').set('initsol', 'sol6');
model.sol('sol6').feature('v5').set('notsolmethod', 'sol');
model.sol('sol6').feature('v5').set('notsol', 'sol6');
model.sol('sol6').feature('v5').set('control', 'freq1');
model.sol('sol6').create('s1', 'Stationary');
model.sol('sol6').feature('s1').create('p1', 'Parametric');
model.sol('sol6').feature('s1').feature.remove('pDef');
model.sol('sol6').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol6').feature('s1').feature('p1').set('plistarr', {'f0'});
model.sol('sol6').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol6').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol6').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol6').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol6').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol6').feature('s1').feature('p1').set('plotgroup', 'pg1');
model.sol('sol6').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol6').feature('s1').feature('p1').set('probes', {});
model.sol('sol6').feature('s1').feature('p1').set('control', 'freq1');
model.sol('sol6').feature('s1').set('linpmethod', 'sol');
model.sol('sol6').feature('s1').set('linpsol', 'zero');
model.sol('sol6').feature('s1').set('control', 'freq1');
model.sol('sol6').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol6').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol6').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol6').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol6').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol6').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol6').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol6').feature('s1').feature.remove('fcDef');
model.sol('sol6').feature('v5').set('notsolnum', 'auto');
model.sol('sol6').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol6').feature('v5').set('solnum', 'auto');
model.sol('sol6').feature('v5').set('solvertype', 'solnum');
model.sol('sol6').feature('e4').set('linpsolnum', 'auto');
model.sol('sol6').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol6').feature('v4').set('notsolnum', 'auto');
model.sol('sol6').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol6').feature('v4').set('solnum', 'auto');
model.sol('sol6').feature('v4').set('solvertype', 'solnum');
model.sol('sol6').feature('e3').set('linpsolnum', 'auto');
model.sol('sol6').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol6').feature('v3').set('notsolnum', 'auto');
model.sol('sol6').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol6').feature('v3').set('solnum', 'auto');
model.sol('sol6').feature('v3').set('solvertype', 'solnum');
model.sol('sol6').feature('e2').set('linpsolnum', 'auto');
model.sol('sol6').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol6').feature('v2').set('notsolnum', 'auto');
model.sol('sol6').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol6').feature('v2').set('solnum', 'auto');
model.sol('sol6').feature('v2').set('solvertype', 'solnum');
model.sol('sol6').attach('std2');
model.sol('sol6').runAll;

model.result('pg1').run;
model.result.duplicate('pg2', 'pg1');
model.result('pg2').run;
model.result('pg2').label('Electric Field, Bidirectional');
model.result('pg2').set('data', 'dset6');
model.result('pg2').run;
model.result('pg2').feature('slc1').set('expr', 'ewbe2.normE');
model.result('pg2').run;
model.result('pg2').feature('slc1').feature('def1').set('expr', {'' '' 'ewbe2.normE'});
model.result('pg2').run;
model.result.create('pg3', 'PlotGroup3D');
model.result('pg3').run;
model.result('pg3').label('Electric Field Amplitude, Bidirectional');
model.result('pg3').set('data', 'dset6');
model.result('pg3').create('slc1', 'Slice');
model.result('pg3').feature('slc1').set('expr', 'ewbe2.normE1');
model.result('pg3').feature('slc1').set('quickplane', 'xy');
model.result('pg3').feature('slc1').set('quickznumber', 1);
model.result('pg3').run;
model.result('pg3').feature('slc1').set('expr', 'ewbe2.normE2');
model.result('pg3').run;

model.variable.create('var1');
model.variable('var1').model('comp1');
model.variable('var1').selection.geom('geom1', 2);
model.variable('var1').selection.set([1 5]);
model.variable('var1').set('Etarget', '0[V/m]');
model.variable('var1').descr('Etarget', 'Target electric field');
model.variable.duplicate('var2', 'var1');
model.variable('var2').selection.set([10]);
model.variable('var2').set('Etarget', '1[V/m]');
model.variable('var2').descr('Etarget', 'Target electric field');

model.cpl.create('intop1', 'Integration', 'geom1');
model.cpl('intop1').set('axisym', true);
model.cpl('intop1').selection.geom('geom1', 2);
model.cpl('intop1').selection.set([1 5 10]);

model.physics.copy('ewbe3', 'ewbe2', 'comp1');
model.physics('ewbe3').label('Electromagnetic Waves, Beam Envelopes, Bidirectional, Mode Expansion');

model.variable.create('var3');
model.variable('var3').model('comp1');
model.variable('var3').set('Pin1', 'abs(intop1(Etarget*conj(ewbe3.tH0modey_1)))^2/abs(4*ewbe3.Pmode_1)');
model.variable('var3').descr('Pin1', '');
model.variable('var3').set('ph1', 'arg(intop1(Etarget*conj(ewbe3.tH0modey_1))/ewbe3.Pmode_1)');
model.variable('var3').descr('ph1', '');
model.variable('var3').set('Pin2', 'abs(intop1(Etarget*conj(ewbe3.tH0modey_2)))^2/abs(4*ewbe3.Pmode_2)');
model.variable('var3').descr('Pin2', '');
model.variable('var3').set('ph2', 'arg(intop1(Etarget*conj(ewbe3.tH0modey_2))/ewbe3.Pmode_2)');
model.variable('var3').descr('ph2', '');

model.physics('ewbe3').feature('port1').set('Pin', 'Pin1');
model.physics('ewbe3').feature('port1').set('Thetap', 'ph1');
model.physics('ewbe3').feature('port2').set('Pin', 'Pin2');
model.physics('ewbe3').feature('port2').set('Thetap', 'ph2');

model.study.create('std3');
model.study('std3').label('Study, Bidirectional, Mode Expansion');
model.study('std3').feature.copy('bma1', 'std2/bma1');
model.study('std3').feature.copy('bma2', 'std2/bma2');
model.study('std3').feature.copy('bma3', 'std2/bma3');
model.study('std3').feature.copy('bma4', 'std2/bma4');
model.study('std3').feature.copy('freq1', 'std2/freq1');
model.study('std3').feature('bma1').setEntry('activate', 'ewbe2', false);
model.study('std3').feature('bma2').setEntry('activate', 'ewbe2', false);
model.study('std3').feature('bma3').setEntry('activate', 'ewbe2', false);
model.study('std3').feature('bma4').setEntry('activate', 'ewbe2', false);
model.study('std3').feature('freq1').setEntry('activate', 'ewbe2', false);

model.sol.create('sol11');
model.sol('sol11').study('std3');
model.sol('sol11').create('st1', 'StudyStep');
model.sol('sol11').feature('st1').set('study', 'std3');
model.sol('sol11').feature('st1').set('studystep', 'bma1');
model.sol('sol11').create('v1', 'Variables');
model.sol('sol11').feature('v1').set('control', 'bma1');
model.sol('sol11').create('e1', 'Eigenvalue');
model.sol('sol11').feature('e1').set('neigs', 1);
model.sol('sol11').feature('e1').set('shift', '1');
model.sol('sol11').feature('e1').set('eigref', '3.4716717443092047');
model.sol('sol11').feature('e1').set('control', 'bma1');
model.sol('sol11').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol11').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').create('su1', 'StoreSolution');
model.sol('sol11').create('st2', 'StudyStep');
model.sol('sol11').feature('st2').set('study', 'std3');
model.sol('sol11').feature('st2').set('studystep', 'bma2');
model.sol('sol11').create('v2', 'Variables');
model.sol('sol11').feature('v2').set('initmethod', 'sol');
model.sol('sol11').feature('v2').set('initsol', 'sol11');
model.sol('sol11').feature('v2').set('notsolmethod', 'sol');
model.sol('sol11').feature('v2').set('notsol', 'sol11');
model.sol('sol11').feature('v2').set('control', 'bma2');
model.sol('sol11').create('e2', 'Eigenvalue');
model.sol('sol11').feature('e2').set('neigs', 1);
model.sol('sol11').feature('e2').set('shift', '1');
model.sol('sol11').feature('e2').set('eigref', '3.4714219480792172');
model.sol('sol11').feature('e2').set('control', 'bma2');
model.sol('sol11').feature('e2').set('linpmethod', 'sol');
model.sol('sol11').feature('e2').set('linpsol', 'sol11');
model.sol('sol11').feature('e2').set('control', 'bma2');
model.sol('sol11').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol11').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').create('su2', 'StoreSolution');
model.sol('sol11').create('st3', 'StudyStep');
model.sol('sol11').feature('st3').set('study', 'std3');
model.sol('sol11').feature('st3').set('studystep', 'bma3');
model.sol('sol11').create('v3', 'Variables');
model.sol('sol11').feature('v3').set('initmethod', 'sol');
model.sol('sol11').feature('v3').set('initsol', 'sol11');
model.sol('sol11').feature('v3').set('notsolmethod', 'sol');
model.sol('sol11').feature('v3').set('notsol', 'sol11');
model.sol('sol11').feature('v3').set('control', 'bma3');
model.sol('sol11').create('e3', 'Eigenvalue');
model.sol('sol11').feature('e3').set('neigs', 1);
model.sol('sol11').feature('e3').set('shift', '1');
model.sol('sol11').feature('e3').set('eigref', '3.4716717443092047');
model.sol('sol11').feature('e3').set('control', 'bma3');
model.sol('sol11').feature('e3').set('linpmethod', 'sol');
model.sol('sol11').feature('e3').set('linpsol', 'sol11');
model.sol('sol11').feature('e3').set('control', 'bma3');
model.sol('sol11').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol11').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').create('su3', 'StoreSolution');
model.sol('sol11').create('st4', 'StudyStep');
model.sol('sol11').feature('st4').set('study', 'std3');
model.sol('sol11').feature('st4').set('studystep', 'bma4');
model.sol('sol11').create('v4', 'Variables');
model.sol('sol11').feature('v4').set('initmethod', 'sol');
model.sol('sol11').feature('v4').set('initsol', 'sol11');
model.sol('sol11').feature('v4').set('notsolmethod', 'sol');
model.sol('sol11').feature('v4').set('notsol', 'sol11');
model.sol('sol11').feature('v4').set('control', 'bma4');
model.sol('sol11').create('e4', 'Eigenvalue');
model.sol('sol11').feature('e4').set('neigs', 1);
model.sol('sol11').feature('e4').set('shift', '1');
model.sol('sol11').feature('e4').set('eigref', '3.4714219480792172');
model.sol('sol11').feature('e4').set('control', 'bma4');
model.sol('sol11').feature('e4').set('linpmethod', 'sol');
model.sol('sol11').feature('e4').set('linpsol', 'sol11');
model.sol('sol11').feature('e4').set('control', 'bma4');
model.sol('sol11').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol11').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').create('su4', 'StoreSolution');
model.sol('sol11').create('st5', 'StudyStep');
model.sol('sol11').feature('st5').set('study', 'std3');
model.sol('sol11').feature('st5').set('studystep', 'freq1');
model.sol('sol11').create('v5', 'Variables');
model.sol('sol11').feature('v5').set('initmethod', 'sol');
model.sol('sol11').feature('v5').set('initsol', 'sol11');
model.sol('sol11').feature('v5').set('notsolmethod', 'sol');
model.sol('sol11').feature('v5').set('notsol', 'sol11');
model.sol('sol11').feature('v5').set('control', 'freq1');
model.sol('sol11').create('s1', 'Stationary');
model.sol('sol11').feature('s1').create('p1', 'Parametric');
model.sol('sol11').feature('s1').feature.remove('pDef');
model.sol('sol11').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol11').feature('s1').feature('p1').set('plistarr', {'f0'});
model.sol('sol11').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol11').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol11').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol11').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol11').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol11').feature('s1').feature('p1').set('plotgroup', 'pg1');
model.sol('sol11').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol11').feature('s1').feature('p1').set('probes', {});
model.sol('sol11').feature('s1').feature('p1').set('control', 'freq1');
model.sol('sol11').feature('s1').set('linpmethod', 'sol');
model.sol('sol11').feature('s1').set('linpsol', 'zero');
model.sol('sol11').feature('s1').set('control', 'freq1');
model.sol('sol11').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol11').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol11').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol11').feature('s1').feature.remove('fcDef');
model.sol('sol11').feature('v5').set('notsolnum', 'auto');
model.sol('sol11').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol11').feature('v5').set('solnum', 'auto');
model.sol('sol11').feature('v5').set('solvertype', 'solnum');
model.sol('sol11').feature('e4').set('linpsolnum', 'auto');
model.sol('sol11').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol11').feature('v4').set('notsolnum', 'auto');
model.sol('sol11').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol11').feature('v4').set('solnum', 'auto');
model.sol('sol11').feature('v4').set('solvertype', 'solnum');
model.sol('sol11').feature('e3').set('linpsolnum', 'auto');
model.sol('sol11').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol11').feature('v3').set('notsolnum', 'auto');
model.sol('sol11').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol11').feature('v3').set('solnum', 'auto');
model.sol('sol11').feature('v3').set('solvertype', 'solnum');
model.sol('sol11').feature('e2').set('linpsolnum', 'auto');
model.sol('sol11').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol11').feature('v2').set('notsolnum', 'auto');
model.sol('sol11').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol11').feature('v2').set('solnum', 'auto');
model.sol('sol11').feature('v2').set('solvertype', 'solnum');
model.sol('sol11').attach('std3');
model.sol('sol11').runAll;

model.result.create('pg4', 'PlotGroup3D');
model.result('pg4').label('Electric Field (ewbe3)');
model.result('pg4').set('data', 'dset11');
model.result('pg4').setIndex('looplevel', 1, 0);
model.result('pg4').set('data', 'dset11');
model.result('pg4').setIndex('looplevel', 1, 0);
model.result('pg4').set('defaultPlotID', 'ElectromagneticWavesBeamEnvelopes/phys1/pdef1/pcond1/pg1');
model.result('pg4').feature.create('mslc1', 'Multislice');
model.result('pg4').feature('mslc1').label('Electric Field');
model.result('pg4').feature('mslc1').set('showsolutionparams', 'on');
model.result('pg4').feature('mslc1').set('expr', 'ewbe3.normE');
model.result('pg4').feature('mslc1').set('smooth', 'internal');
model.result('pg4').feature('mslc1').set('showsolutionparams', 'on');
model.result('pg4').feature('mslc1').set('data', 'parent');
model.result.create('pg5', 'PlotGroup3D');
model.result('pg5').label('Electric Mode Field, Port 1 (ewbe3)');
model.result('pg5').set('showlegendsmaxmin', true);
model.result('pg5').set('data', 'dset11');
model.result('pg5').create('surf1', 'Surface');
model.result('pg5').feature('surf1').set('expr', 'root.comp1.ewbe3.normEbm_1');
model.result('pg5').feature('surf1').set('colortable', 'RainbowLight');
model.result('pg5').create('ann1', 'Annotation');
model.result('pg5').feature('ann1').set('posxexpr', 'ewbe3.aveport1(x)');
model.result('pg5').feature('ann1').set('posyexpr', 'ewbe3.aveport1(y)');
model.result('pg5').feature('ann1').set('poszexpr', 'ewbe3.aveport1(z)');
model.result('pg5').feature('ann1').set('backgroundcolor', 'fromtheme');
model.result('pg5').feature('ann1').set('text', 'Effective mode index: eval(comp1.ewbe3.neff_1)');
model.result.create('pg6', 'PlotGroup3D');
model.result('pg6').label('Electric Mode Field, Port 2 (ewbe3)');
model.result('pg6').set('showlegendsmaxmin', true);
model.result('pg6').set('data', 'dset11');
model.result('pg6').create('surf1', 'Surface');
model.result('pg6').feature('surf1').set('expr', 'root.comp1.ewbe3.normEbm_2');
model.result('pg6').feature('surf1').set('colortable', 'RainbowLight');
model.result('pg6').create('ann1', 'Annotation');
model.result('pg6').feature('ann1').set('posxexpr', 'ewbe3.aveport2(x)');
model.result('pg6').feature('ann1').set('posyexpr', 'ewbe3.aveport2(y)');
model.result('pg6').feature('ann1').set('poszexpr', 'ewbe3.aveport2(z)');
model.result('pg6').feature('ann1').set('backgroundcolor', 'fromtheme');
model.result('pg6').feature('ann1').set('text', 'Effective mode index: eval(comp1.ewbe3.neff_2)');
model.result.create('pg7', 'PlotGroup3D');
model.result('pg7').label('Electric Mode Field, Port 3 (ewbe3)');
model.result('pg7').set('showlegendsmaxmin', true);
model.result('pg7').set('data', 'dset11');
model.result('pg7').create('surf1', 'Surface');
model.result('pg7').feature('surf1').set('expr', 'root.comp1.ewbe3.normEbm_3');
model.result('pg7').feature('surf1').set('colortable', 'RainbowLight');
model.result('pg7').create('ann1', 'Annotation');
model.result('pg7').feature('ann1').set('posxexpr', 'ewbe3.aveport3(x)');
model.result('pg7').feature('ann1').set('posyexpr', 'ewbe3.aveport3(y)');
model.result('pg7').feature('ann1').set('poszexpr', 'ewbe3.aveport3(z)');
model.result('pg7').feature('ann1').set('backgroundcolor', 'fromtheme');
model.result('pg7').feature('ann1').set('text', 'Effective mode index: eval(comp1.ewbe3.neff_3)');
model.result.create('pg8', 'PlotGroup3D');
model.result('pg8').label('Electric Mode Field, Port 4 (ewbe3)');
model.result('pg8').set('showlegendsmaxmin', true);
model.result('pg8').set('data', 'dset11');
model.result('pg8').create('surf1', 'Surface');
model.result('pg8').feature('surf1').set('expr', 'root.comp1.ewbe3.normEbm_4');
model.result('pg8').feature('surf1').set('colortable', 'RainbowLight');
model.result('pg8').create('ann1', 'Annotation');
model.result('pg8').feature('ann1').set('posxexpr', 'ewbe3.aveport4(x)');
model.result('pg8').feature('ann1').set('posyexpr', 'ewbe3.aveport4(y)');
model.result('pg8').feature('ann1').set('poszexpr', 'ewbe3.aveport4(z)');
model.result('pg8').feature('ann1').set('backgroundcolor', 'fromtheme');
model.result('pg8').feature('ann1').set('text', 'Effective mode index: eval(comp1.ewbe3.neff_4)');
model.result('pg4').run;
model.result('pg4').label('Electric Field, Bidirectional, Mode Expansion');
model.result('pg4').run;
model.result('pg4').feature('mslc1').set('xnumber', '0');
model.result('pg4').feature('mslc1').set('ynumber', '0');
model.result('pg4').feature('mslc1').set('smooth', 'everywhere');
model.result('pg4').feature('mslc1').create('def1', 'Deform');
model.result('pg4').run;
model.result('pg4').feature('mslc1').feature('def1').set('expr', {'' '' 'ewbe3.normE'});
model.result('pg4').run;
model.result.create('pg9', 'PlotGroup3D');
model.result('pg9').run;
model.result('pg9').label('Electric Field, Difference Between Actual and Target');
model.result('pg9').set('data', 'dset11');
model.result('pg9').create('surf1', 'Surface');
model.result('pg9').feature('surf1').set('expr', 'Etarget');
model.result('pg9').feature('surf1').create('def1', 'Deform');
model.result('pg9').run;
model.result('pg9').feature('surf1').feature('def1').set('expr', {'-Etarget' '' ''});
model.result('pg9').feature('surf1').feature('def1').set('scaleactive', true);
model.result('pg9').feature('surf1').feature('def1').set('scale', '1E-3');
model.result('pg9').run;
model.result('pg9').create('surf2', 'Surface');
model.result('pg9').feature('surf2').set('expr', 'ewbe3.Ez');
model.result('pg9').feature('surf2').set('inheritplot', 'surf1');
model.result('pg9').feature('surf2').create('sel1', 'Selection');
model.result('pg9').feature('surf2').feature('sel1').selection.set([1 5 10]);
model.result('pg9').run;
model.result('pg9').feature('surf2').create('def1', 'Deform');
model.result('pg9').run;
model.result('pg9').feature('surf2').feature('def1').set('expr', {'-ewbe3.Ez' '' ''});
model.result('pg9').run;

model.variable('var1').selection.set([1 10]);
model.variable('var2').selection.set([5]);

model.sol('sol11').study('std3');
model.sol('sol12').copySolution('sol16');
model.sol('sol13').copySolution('sol17');
model.sol('sol14').copySolution('sol18');
model.sol('sol15').copySolution('sol19');

model.result.dataset('dset14').set('solution', 'none');
model.result.dataset('dset13').set('solution', 'none');
model.result.dataset('dset15').set('solution', 'none');
model.result.dataset('dset12').set('solution', 'none');

model.sol('sol11').feature.remove('s1');
model.sol('sol11').feature.remove('v5');
model.sol('sol11').feature.remove('st5');
model.sol('sol11').feature.remove('su4');
model.sol('sol11').feature.remove('e4');
model.sol('sol11').feature.remove('v4');
model.sol('sol11').feature.remove('st4');
model.sol('sol11').feature.remove('su3');
model.sol('sol11').feature.remove('e3');
model.sol('sol11').feature.remove('v3');
model.sol('sol11').feature.remove('st3');
model.sol('sol11').feature.remove('su2');
model.sol('sol11').feature.remove('e2');
model.sol('sol11').feature.remove('v2');
model.sol('sol11').feature.remove('st2');
model.sol('sol11').feature.remove('su1');
model.sol('sol11').feature.remove('e1');
model.sol('sol11').feature.remove('v1');
model.sol('sol11').feature.remove('st1');
model.sol('sol18').copySolution('sol14');
model.sol.remove('sol18');
model.sol('sol14').label('Solution Store 11');

model.result.dataset.remove('dset20');

model.sol('sol17').copySolution('sol13');
model.sol.remove('sol17');
model.sol('sol13').label('Solution Store 10');

model.result.dataset.remove('dset20');

model.sol('sol19').copySolution('sol15');
model.sol.remove('sol19');
model.sol('sol15').label('Solution Store 12');

model.result.dataset.remove('dset20');

model.sol('sol16').copySolution('sol12');
model.sol.remove('sol16');
model.sol('sol12').label('Solution Store 9');

model.result.dataset.remove('dset17');

model.sol('sol11').create('st1', 'StudyStep');
model.sol('sol11').feature('st1').set('study', 'std3');
model.sol('sol11').feature('st1').set('studystep', 'bma1');
model.sol('sol11').create('v1', 'Variables');
model.sol('sol11').feature('v1').set('control', 'bma1');
model.sol('sol11').create('e1', 'Eigenvalue');
model.sol('sol11').feature('e1').set('neigs', 1);
model.sol('sol11').feature('e1').set('shift', '1');
model.sol('sol11').feature('e1').set('eigref', '3.4716717443092047');
model.sol('sol11').feature('e1').set('control', 'bma1');
model.sol('sol11').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol11').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').create('su1', 'StoreSolution');
model.sol('sol11').feature('su1').set('sol', 'sol12');
model.sol('sol11').feature('su1').label('Solution Store 9');
model.sol('sol11').create('st2', 'StudyStep');
model.sol('sol11').feature('st2').set('study', 'std3');
model.sol('sol11').feature('st2').set('studystep', 'bma2');
model.sol('sol11').create('v2', 'Variables');
model.sol('sol11').feature('v2').set('initmethod', 'sol');
model.sol('sol11').feature('v2').set('initsol', 'sol11');
model.sol('sol11').feature('v2').set('notsolmethod', 'sol');
model.sol('sol11').feature('v2').set('notsol', 'sol11');
model.sol('sol11').feature('v2').set('control', 'bma2');
model.sol('sol11').create('e2', 'Eigenvalue');
model.sol('sol11').feature('e2').set('neigs', 1);
model.sol('sol11').feature('e2').set('shift', '1');
model.sol('sol11').feature('e2').set('eigref', '3.4714219480792172');
model.sol('sol11').feature('e2').set('control', 'bma2');
model.sol('sol11').feature('e2').set('linpmethod', 'sol');
model.sol('sol11').feature('e2').set('linpsol', 'sol11');
model.sol('sol11').feature('e2').set('control', 'bma2');
model.sol('sol11').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol11').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').create('su2', 'StoreSolution');
model.sol('sol11').feature('su2').set('sol', 'sol13');
model.sol('sol11').feature('su2').label('Solution Store 10');
model.sol('sol11').create('st3', 'StudyStep');
model.sol('sol11').feature('st3').set('study', 'std3');
model.sol('sol11').feature('st3').set('studystep', 'bma3');
model.sol('sol11').create('v3', 'Variables');
model.sol('sol11').feature('v3').set('initmethod', 'sol');
model.sol('sol11').feature('v3').set('initsol', 'sol11');
model.sol('sol11').feature('v3').set('notsolmethod', 'sol');
model.sol('sol11').feature('v3').set('notsol', 'sol11');
model.sol('sol11').feature('v3').set('control', 'bma3');
model.sol('sol11').create('e3', 'Eigenvalue');
model.sol('sol11').feature('e3').set('neigs', 1);
model.sol('sol11').feature('e3').set('shift', '1');
model.sol('sol11').feature('e3').set('eigref', '3.4716717443092047');
model.sol('sol11').feature('e3').set('control', 'bma3');
model.sol('sol11').feature('e3').set('linpmethod', 'sol');
model.sol('sol11').feature('e3').set('linpsol', 'sol11');
model.sol('sol11').feature('e3').set('control', 'bma3');
model.sol('sol11').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol11').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').create('su3', 'StoreSolution');
model.sol('sol11').feature('su3').set('sol', 'sol14');
model.sol('sol11').feature('su3').label('Solution Store 11');
model.sol('sol11').create('st4', 'StudyStep');
model.sol('sol11').feature('st4').set('study', 'std3');
model.sol('sol11').feature('st4').set('studystep', 'bma4');
model.sol('sol11').create('v4', 'Variables');
model.sol('sol11').feature('v4').set('initmethod', 'sol');
model.sol('sol11').feature('v4').set('initsol', 'sol11');
model.sol('sol11').feature('v4').set('notsolmethod', 'sol');
model.sol('sol11').feature('v4').set('notsol', 'sol11');
model.sol('sol11').feature('v4').set('control', 'bma4');
model.sol('sol11').create('e4', 'Eigenvalue');
model.sol('sol11').feature('e4').set('neigs', 1);
model.sol('sol11').feature('e4').set('shift', '1');
model.sol('sol11').feature('e4').set('eigref', '3.4714219480792172');
model.sol('sol11').feature('e4').set('control', 'bma4');
model.sol('sol11').feature('e4').set('linpmethod', 'sol');
model.sol('sol11').feature('e4').set('linpsol', 'sol11');
model.sol('sol11').feature('e4').set('control', 'bma4');
model.sol('sol11').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol11').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').create('su4', 'StoreSolution');
model.sol('sol11').feature('su4').set('sol', 'sol15');
model.sol('sol11').feature('su4').label('Solution Store 12');
model.sol('sol11').create('st5', 'StudyStep');
model.sol('sol11').feature('st5').set('study', 'std3');
model.sol('sol11').feature('st5').set('studystep', 'freq1');
model.sol('sol11').create('v5', 'Variables');
model.sol('sol11').feature('v5').set('initmethod', 'sol');
model.sol('sol11').feature('v5').set('initsol', 'sol11');
model.sol('sol11').feature('v5').set('notsolmethod', 'sol');
model.sol('sol11').feature('v5').set('notsol', 'sol11');
model.sol('sol11').feature('v5').set('control', 'freq1');
model.sol('sol11').create('s1', 'Stationary');
model.sol('sol11').feature('s1').create('p1', 'Parametric');
model.sol('sol11').feature('s1').feature.remove('pDef');
model.sol('sol11').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol11').feature('s1').feature('p1').set('plistarr', {'f0'});
model.sol('sol11').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol11').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol11').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol11').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol11').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol11').feature('s1').feature('p1').set('plotgroup', 'pg1');
model.sol('sol11').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol11').feature('s1').feature('p1').set('probes', {});
model.sol('sol11').feature('s1').feature('p1').set('control', 'freq1');
model.sol('sol11').feature('s1').set('linpmethod', 'sol');
model.sol('sol11').feature('s1').set('linpsol', 'zero');
model.sol('sol11').feature('s1').set('control', 'freq1');
model.sol('sol11').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol11').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol11').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol11').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol11').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol11').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol11').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol11').feature('s1').feature.remove('fcDef');

model.result.dataset('dset15').set('solution', 'sol15');
model.result.dataset('dset14').set('solution', 'sol14');
model.result.dataset('dset13').set('solution', 'sol13');
model.result.dataset('dset12').set('solution', 'sol12');

model.sol('sol11').feature('v5').set('notsolnum', 'auto');
model.sol('sol11').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol11').feature('v5').set('solnum', 'auto');
model.sol('sol11').feature('v5').set('solvertype', 'solnum');
model.sol('sol11').feature('e4').set('linpsolnum', 'auto');
model.sol('sol11').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol11').feature('v4').set('notsolnum', 'auto');
model.sol('sol11').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol11').feature('v4').set('solnum', 'auto');
model.sol('sol11').feature('v4').set('solvertype', 'solnum');
model.sol('sol11').feature('e3').set('linpsolnum', 'auto');
model.sol('sol11').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol11').feature('v3').set('notsolnum', 'auto');
model.sol('sol11').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol11').feature('v3').set('solnum', 'auto');
model.sol('sol11').feature('v3').set('solvertype', 'solnum');
model.sol('sol11').feature('e2').set('linpsolnum', 'auto');
model.sol('sol11').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol11').feature('v2').set('notsolnum', 'auto');
model.sol('sol11').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol11').feature('v2').set('solnum', 'auto');
model.sol('sol11').feature('v2').set('solvertype', 'solnum');
model.sol('sol11').attach('std3');
model.sol('sol11').runAll;

model.result('pg4').run;
model.result('pg4').run;
model.result('pg9').run;
model.result('pg9').run;
model.result('pg5').run;
model.result('pg6').run;
model.result('pg7').run;
model.result('pg8').run;

model.mesh('mesh1').contribute('physics/ewbe2', false);
model.mesh('mesh1').contribute('physics/ewbe3', false);

model.study('std1').feature('bma').setEntry('activate', 'ewbe2', false);
model.study('std1').feature('bma').setEntry('activate', 'ewbe3', false);
model.study('std1').feature('bma1').setEntry('activate', 'ewbe2', false);
model.study('std1').feature('bma1').setEntry('activate', 'ewbe3', false);
model.study('std1').feature('bma2').setEntry('activate', 'ewbe2', false);
model.study('std1').feature('bma2').setEntry('activate', 'ewbe3', false);
model.study('std1').feature('bma3').setEntry('activate', 'ewbe2', false);
model.study('std1').feature('bma3').setEntry('activate', 'ewbe3', false);
model.study('std1').feature('freq').setEntry('activate', 'ewbe2', false);
model.study('std1').feature('freq').setEntry('activate', 'ewbe3', false);
model.study('std2').feature('bma1').setEntry('activate', 'ewbe3', false);
model.study('std2').feature('bma2').setEntry('activate', 'ewbe3', false);
model.study('std2').feature('bma3').setEntry('activate', 'ewbe3', false);
model.study('std2').feature('bma4').setEntry('activate', 'ewbe3', false);
model.study('std2').feature('freq1').setEntry('activate', 'ewbe3', false);

model.result('pg1').run;

model.title('Directional Coupler');

model.description('Two embedded optical waveguides in close proximity form a directional coupler. The cladding material is GaAs and the core material is ion-implanted GaAs. The waveguide is excited by the two first supermodes of the waveguide structure: the symmetric and antisymmetric modes. Two numeric ports are used on both the exciting boundary and the absorbing boundary, to define the two modes. A boundary mode analysis study sequence is setup, with four boundary mode analyses and a final frequency-domain study. The model demonstrates coupling from one of the waveguides to the other waveguide.');

model.mesh.clearMeshes;

model.sol('sol1').clearSolutionData;
model.sol('sol4').clearSolutionData;
model.sol('sol3').clearSolutionData;
model.sol('sol5').clearSolutionData;
model.sol('sol2').clearSolutionData;
model.sol('sol6').clearSolutionData;
model.sol('sol7').clearSolutionData;
model.sol('sol8').clearSolutionData;
model.sol('sol9').clearSolutionData;
model.sol('sol10').clearSolutionData;
model.sol('sol11').clearSolutionData;
model.sol('sol14').clearSolutionData;
model.sol('sol13').clearSolutionData;
model.sol('sol15').clearSolutionData;
model.sol('sol12').clearSolutionData;

model.label('directional_coupler.mph');

model.modelNode.label('Components');

out = model;
