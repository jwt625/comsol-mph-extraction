function out = model
%
% newtonian_telescope_structural_analysis_geom_sequence.m
%
% Model exported on May 26 2025, 21:32 by COMSOL 6.2.0.339.

import com.comsol.model.*
import com.comsol.model.util.*

model = ModelUtil.create('Model');

model.modelPath('/Applications/COMSOL62/Multiphysics/applications/Ray_Optics_Module/Structural_Thermal_Optical_Performance_Analysis');

model.modelNode.create('comp1', true);

model.geom.create('geom1', 3);
model.geom('geom1').model('comp1');

model.mesh.create('mesh1', 'geom1');

model.geom('geom1').label('Newtonian Telescope Structural Analysis Geometry Sequence');
model.geom('geom1').lengthUnit('mm');

% To import content from file, use:
% model.param.loadFile('FILENAME');
model.param.set('theta', '0[deg]', 'Telescope inclination');
model.param.set('cx', '0[mm]', 'Approximate center of mass, x-component');
model.param.set('cy', '0[mm]', 'Approximate center of mass, y-component');
model.param.set('cz', '50[mm]', 'Approximate center of mass, z-component');
model.param.set('d0_tube', '385[mm]', 'Telescope tube outer diameter(s)');
model.param.set('d1_tube', '275[mm]', 'Telescope tube ring, inner diameter(s)');
model.param.set('R_truss', '170[mm]', 'Truss radial position');
model.param.set('phit', '45[deg]', 'Truss angle');
model.param.set('dx_truss', 'sqrt(R_truss^2-dy_truss^2)-R_truss', 'Truss offset, x-component');
model.param.set('dy_truss', 'R_truss*sin(phit)', 'Truss offset, y-component');

model.geom('geom1').create('wp1', 'WorkPlane');
model.geom('geom1').feature('wp1').set('unite', true);
model.geom('geom1').feature('wp1').label('Center of Mass');
model.geom('geom1').feature('wp1').set('planetype', 'transformed');
model.geom('geom1').feature('wp1').set('transaxistype', 'x');
model.geom('geom1').feature('wp1').set('transrot', 'theta');
model.geom('geom1').insertFile('newtonian_telescope_structural_analysis_newtonian_telescope_geom_sequence.mph', 'geom1');
model.geom('geom1').feature('pi1').setEntry('inputexpr', 'n_extra_a', 50);
model.geom('geom1').feature('pi1').set('workplane', 'wp1');
model.geom('geom1').feature('pi1').set('displ', {'-cx' '-cy' '-cz'});
model.geom('geom1').feature('pi1').set('rot', 180);
model.geom('geom1').feature('pi1').setEntry('selkeeppnt', 'pi1_sel3', true);
model.geom('geom1').runPre('fin');

model.view('view1').camera.set('projection', 'orthographic');

model.geom.create('part4', 'Part', 3);
model.geom('part4').label('Telescope Tube');
model.geom('part4').inputParam.set('d0', '350.0[mm]');
model.geom('part4').inputParam.descr('d0', 'Tube diameter');
model.geom('part4').inputParam.set('d1', '300.0[mm]');
model.geom('part4').inputParam.descr('d1', 'Upper ring inner diameter');
model.geom('part4').inputParam.set('d2', '300.0[mm]');
model.geom('part4').inputParam.descr('d2', 'Lower ring inner diameter');
model.geom('part4').inputParam.set('T1', '10.0[mm]');
model.geom('part4').inputParam.descr('T1', 'Upper ring thickness');
model.geom('part4').inputParam.set('T2', '10.0[mm]');
model.geom('part4').inputParam.descr('T2', 'Lower ring thickness');
model.geom('part4').inputParam.set('Tw', '3.0[mm]');
model.geom('part4').inputParam.descr('Tw', 'Wall thickness');
model.geom('part4').inputParam.set('L', '200.0[mm]');
model.geom('part4').inputParam.descr('L', 'Tube length');
model.geom('part4').create('pi1', 'PartInstance');
model.geom('part4').feature('pi1').set('selkeepnoncontr', false);
model.geom('part4').feature('pi1').set('part', 'part3');
model.geom('part4').feature('pi1').label('Upper Ring Base');
model.geom('part4').feature('pi1').setEntry('inputexpr', 'd0', 'd0');
model.geom('part4').feature('pi1').setEntry('inputexpr', 'd1', 'd1');
model.geom('part4').run('pi1');
model.geom('part4').feature.create('ext1', 'Extrude');
model.geom('part4').feature('ext1').label('Upper Ring');
model.geom('part4').feature('ext1').selection('inputface').set('pi1', 1);
model.geom('part4').feature('ext1').setIndex('distance', 'T1', 0);
model.geom('part4').run('ext1');
model.geom('part4').create('pi2', 'PartInstance');
model.geom('part4').feature('pi2').set('selkeepnoncontr', false);
model.geom('part4').feature('pi2').set('part', 'part3');
model.geom('part4').feature('pi2').label('Lower Ring Base');
model.geom('part4').feature('pi2').setEntry('inputexpr', 'd0', 'd0');
model.geom('part4').feature('pi2').setEntry('inputexpr', 'd1', 'd2');
model.geom('part4').feature('pi2').set('workplanesrc', 'pi1');
model.geom('part4').feature('pi2').set('workplane', 'wp1');
model.geom('part4').feature('pi2').set('displ', {'0' '0' 'L'});
model.geom('part4').run('pi2');
model.geom('part4').feature.create('ext2', 'Extrude');
model.geom('part4').feature('ext2').label('Lower Ring');
model.geom('part4').feature('ext2').selection('inputface').set('pi2', 1);
model.geom('part4').feature('ext2').setIndex('distance', 'T2', 0);
model.geom('part4').feature('ext2').set('reverse', true);
model.geom('part4').run('ext2');
model.geom('part4').create('pi3', 'PartInstance');
model.geom('part4').feature('pi3').set('selkeepnoncontr', false);
model.geom('part4').feature('pi3').set('part', 'part3');
model.geom('part4').feature('pi3').label('Wall Base');
model.geom('part4').feature('pi3').setEntry('inputexpr', 'd0', 'd0');
model.geom('part4').feature('pi3').setEntry('inputexpr', 'd1', 'd0-2*Tw');
model.geom('part4').feature('pi3').set('workplanesrc', 'pi1');
model.geom('part4').feature('pi3').set('workplane', 'wp1');
model.geom('part4').feature('pi3').set('displ', {'0' '0' 'T1'});
model.geom('part4').run('pi3');
model.geom('part4').feature.create('ext3', 'Extrude');
model.geom('part4').feature('ext3').label('Wall');
model.geom('part4').feature('ext3').selection('inputface').set('pi3', 1);
model.geom('part4').feature('ext3').set('specify', 'vertices');
model.geom('part4').feature('ext3').selection('vertex').set('ext2', 1);
model.geom('part4').run('ext3');
model.geom('geom1').create('pi5', 'PartInstance');
model.geom('geom1').feature('pi5').set('selkeepnoncontr', false);
model.geom('geom1').feature('pi5').set('part', 'part4');
model.geom('geom1').feature('pi5').label('Lower Mount');
model.geom('geom1').feature('pi5').setEntry('inputexpr', 'd0', 'd0_tube');
model.geom('geom1').feature('pi5').setEntry('inputexpr', 'd1', 'd1_tube');
model.geom('geom1').feature('pi5').setEntry('inputexpr', 'd2', 0);
model.geom('geom1').feature('pi5').setEntry('inputexpr', 'T1', '5[mm]');
model.geom('geom1').feature('pi5').setEntry('inputexpr', 'T2', '30[mm]');
model.geom('geom1').feature('pi5').setEntry('inputexpr', 'Tw', '5[mm]');
model.geom('geom1').feature('pi5').setEntry('inputexpr', 'L', '225[mm]');
model.geom('geom1').feature('pi5').set('workplanesrc', 'pi1');
model.geom('geom1').feature('pi5').set('workplane', 'wp2');
model.geom('geom1').feature('pi5').set('displ', {'0' '0' '-185.0[mm]'});
model.geom('geom1').run('pi5');
model.geom('geom1').create('cyl1', 'Cylinder');
model.geom('geom1').feature('cyl1').label('Primary Mirror Support 1');
model.geom('geom1').feature('cyl1').set('workplanesrc', 'pi1');
model.geom('geom1').feature('cyl1').set('workplane', 'wp2');
model.geom('geom1').feature('cyl1').set('r', 25);
model.geom('geom1').feature('cyl1').set('h', 10);
model.geom('geom1').run('cyl1');
model.geom('geom1').feature('cyl1').set('pos', [0 75 0]);
model.geom('geom1').run('cyl1');
model.geom('geom1').create('rot1', 'Rotate');
model.geom('geom1').feature('rot1').label('Primary Mirror Support 1-3');
model.geom('geom1').feature('rot1').selection('input').set({'cyl1'});
model.geom('geom1').feature('rot1').set('rot', '0 120 240');
model.geom('geom1').feature('rot1').set('workplanesrc', 'pi1');
model.geom('geom1').run('rot1');
model.geom('geom1').create('cyl2', 'Cylinder');
model.geom('geom1').feature('cyl2').label('Altitude Axis');
model.geom('geom1').feature('cyl2').set('r', 75);
model.geom('geom1').feature('cyl2').set('h', 450);
model.geom('geom1').feature('cyl2').set('pos', {'-225' '0' '-cz'});
model.geom('geom1').feature('cyl2').set('axistype', 'x');
model.geom('geom1').feature('cyl2').set('workplanesrc', 'pi1');
model.geom('geom1').feature('cyl2').set('workplane', 'wp1');
model.geom('geom1').run('cyl2');
model.geom('geom1').create('pard1', 'PartitionDomains');
model.geom('geom1').feature('pard1').label('Altitude Axis Partition Domains');
model.geom('geom1').feature('pard1').selection('domain').set('cyl2', 1);
model.geom('geom1').feature('pard1').set('partitionwith', 'faces');
model.geom('geom1').feature('pard1').selection('face').set('pi5(3)', [1 2 7 10]);
model.geom('geom1').run('pard1');
model.geom('geom1').create('del1', 'Delete');
model.geom('geom1').feature('del1').label('Altitude Axis Delete Entities');
model.geom('geom1').feature('del1').selection('input').init(3);
model.geom('geom1').feature('del1').selection('input').set('pard1', 2);
model.geom('geom1').run('del1');
model.geom('geom1').create('pi6', 'PartInstance');
model.geom('geom1').feature('pi6').set('selkeepnoncontr', false);
model.geom('geom1').feature('pi6').set('part', 'part4');
model.geom('geom1').feature('pi6').label('Upper Mount');
model.geom('geom1').feature('pi6').setEntry('inputexpr', 'd0', 'd0_tube');
model.geom('geom1').feature('pi6').setEntry('inputexpr', 'd1', 'd1_tube');
model.geom('geom1').feature('pi6').setEntry('inputexpr', 'd2', 'd1_tube');
model.geom('geom1').feature('pi6').setEntry('inputexpr', 'T1', '5[mm]');
model.geom('geom1').feature('pi6').setEntry('inputexpr', 'T2', '2[mm]');
model.geom('geom1').feature('pi6').setEntry('inputexpr', 'Tw', '2[mm]');
model.geom('geom1').feature('pi6').setEntry('inputexpr', 'L', '115.0[mm]');
model.geom('geom1').feature('pi6').set('workplanesrc', 'pi2');
model.geom('geom1').feature('pi6').set('workplane', 'wp1');
model.geom('geom1').feature('pi6').set('displ', {'0' '0' '-40[mm]'});
model.geom('geom1').feature('pi3').setEntry('inputexpr', 'd0', '35.0[mm]');
model.geom('geom1').feature('pi3').setEntry('inputexpr', 'd1', '30.0[mm]');
model.geom('geom1').feature('pi3').set('displ', {'0' '0' '75.0[mm]'});
model.geom('geom1').run('pi6');
model.geom('geom1').feature.create('ext1', 'Extrude');
model.geom('geom1').feature('ext1').label('Secondary Mirror Mount');
model.geom('geom1').feature('ext1').set('extrudefrom', 'faces');
model.geom('geom1').feature('ext1').selection('inputface').set('pi3', 1);
model.geom('geom1').feature('ext1').set('specify', 'vertices');
model.geom('geom1').feature('ext1').selection('vertex').set('pi2', 2);
model.geom('geom1').run('ext1');
model.geom('geom1').create('pard2', 'PartitionDomains');
model.geom('geom1').feature('pard2').label('Secondary Mirror Mount Partition Domains');
model.geom('geom1').feature('pard2').selection('domain').set('ext1', 1);
model.geom('geom1').feature('pard2').set('partitionwith', 'faces');
model.geom('geom1').feature('pard2').selection('face').set('pi2', 3);
model.geom('geom1').run('pard2');
model.geom('geom1').create('del2', 'Delete');
model.geom('geom1').feature('del2').label('Secondary Mirror Mount Delete Entities');
model.geom('geom1').feature('del2').selection('input').init(3);
model.geom('geom1').feature('del2').selection('input').set('pard2', 1);
model.geom('geom1').run('del2');
model.geom('geom1').create('blk1', 'Block');
model.geom('geom1').feature('blk1').label('Secondary Support 1');
model.geom('geom1').feature('blk1').set('size', {'d0_tube' '2.5[mm]' '1'});
model.geom('geom1').feature('blk1').setIndex('size', '30[mm]', 2);
model.geom('geom1').feature('blk1').set('base', 'center');
model.geom('geom1').feature('blk1').set('pos', {'0' '0' '58[mm]'});
model.geom('geom1').feature('blk1').set('rot', 45);
model.geom('geom1').feature('blk1').set('workplanesrc', 'pi2');
model.geom('geom1').feature('blk1').set('workplane', 'wp1');
model.geom('geom1').run('blk1');
model.geom('geom1').create('pard3', 'PartitionDomains');
model.geom('geom1').feature('pard3').label('Secondary Support Partition Domains');
model.geom('geom1').feature('pard3').selection('domain').set('blk1', 1);
model.geom('geom1').feature('pard3').set('partitionwith', 'faces');
model.geom('geom1').feature('pard3').selection('face').set('del2', [1 10]);
model.geom('geom1').feature('pard3').selection('face').set('pi6(3)', [5 9]);
model.geom('geom1').run('pard3');
model.geom('geom1').create('del3', 'Delete');
model.geom('geom1').feature('del3').label('Secondary Support Delete Entities');
model.geom('geom1').feature('del3').selection('input').init(3);
model.geom('geom1').feature('del3').selection('input').set('pard3', [1 3 5]);
model.geom('geom1').run('del3');
model.geom('geom1').create('rot2', 'Rotate');
model.geom('geom1').feature('rot2').label('Secondary Support 1-2');
model.geom('geom1').feature('rot2').selection('input').set({'del3'});
model.geom('geom1').feature('rot2').set('rot', '0 90');
model.geom('geom1').feature('rot2').set('workplanesrc', 'pi1');
model.geom('geom1').run('rot2');
model.geom('geom1').create('cyl3', 'Cylinder');
model.geom('geom1').feature('cyl3').label('Image Plane Projection');
model.geom('geom1').feature('cyl3').set('r', '22.5[mm]');
model.geom('geom1').feature('cyl3').set('h', '50[mm]');
model.geom('geom1').feature('cyl3').set('workplanesrc', 'pi4');
model.geom('geom1').run('cyl3');
model.geom('geom1').create('dif1', 'Difference');
model.geom('geom1').feature('dif1').label('Image Plane Difference');
model.geom('geom1').feature('dif1').selection('input').set({'pi6(3)'});
model.geom('geom1').feature('dif1').selection('input2').set({'cyl3'});
model.geom('geom1').run('dif1');
model.geom('geom1').create('pi7', 'PartInstance');
model.geom('geom1').feature('pi7').set('selkeepnoncontr', false);
model.geom('geom1').feature('pi7').set('part', 'part3');
model.geom('geom1').feature('pi7').label('Truss Base');
model.geom('geom1').feature('pi7').setEntry('inputexpr', 'd0', '35[mm]');
model.geom('geom1').feature('pi7').setEntry('inputexpr', 'd1', '25[mm]');
model.geom('geom1').feature('pi7').set('workplanesrc', 'pi5');
model.geom('geom1').feature('pi7').set('displ', {'R_truss' '0' '0'});
model.geom('geom1').run('pi7');
model.geom('geom1').feature.create('ext2', 'Extrude');
model.geom('geom1').feature('ext2').label('Truss 1');
model.geom('geom1').feature('ext2').set('extrudefrom', 'faces');
model.geom('geom1').feature('ext2').selection('inputface').set('pi7', 1);
model.geom('geom1').feature('ext2').set('specify', 'vertices');
model.geom('geom1').feature('ext2').selection('vertex').set('pi6(1)', 15);
model.geom('geom1').feature('ext2').setIndex('displ', 'dx_truss', 0, 0);
model.geom('geom1').feature('ext2').setIndex('displ', 'dy_truss', 0, 1);
model.geom('geom1').run('ext2');
model.geom('geom1').create('wp2', 'WorkPlane');
model.geom('geom1').feature('wp2').set('unite', true);
model.geom('geom1').feature('wp2').set('planetype', 'transformed');
model.geom('geom1').feature('wp2').set('workplanesrc', 'pi1');
model.geom('geom1').feature('wp2').set('transaxistype', 'x');
model.geom('geom1').feature('wp2').set('transrot', 90);
model.geom('geom1').run('wp2');
model.geom('geom1').create('wp3', 'WorkPlane');
model.geom('geom1').feature('wp3').set('unite', true);
model.geom('geom1').feature('wp3').set('planetype', 'transformed');
model.geom('geom1').feature('wp3').set('workplane', 'wp2');
model.geom('geom1').feature('wp3').set('transaxistype', 'y');
model.geom('geom1').feature('wp3').set('transrot', -45);
model.geom('geom1').run('wp3');
model.geom('geom1').create('pard4', 'PartitionDomains');
model.geom('geom1').feature('pard4').label('Truss Partition Domains 1');
model.geom('geom1').feature('pard4').selection('domain').set('ext2', 1);
model.geom('geom1').feature('pard4').set('workplane', 'wp2');
model.geom('geom1').run('pard4');
model.geom('geom1').create('pard5', 'PartitionDomains');
model.geom('geom1').feature('pard5').label('Truss Partition Domains 2');
model.geom('geom1').feature('pard5').selection('domain').set('pard4', 2);
model.geom('geom1').run('pard5');
model.geom('geom1').create('del4', 'Delete');
model.geom('geom1').feature('del4').label('Truss Delete Entities');
model.geom('geom1').feature('del4').selection('input').init(3);
model.geom('geom1').feature('del4').selection('input').set('pard5', [1 3]);
model.geom('geom1').run('del4');
model.geom('geom1').create('mir1', 'Mirror');
model.geom('geom1').feature('mir1').label('Truss 2');
model.geom('geom1').feature('mir1').set('keep', true);
model.geom('geom1').feature('mir1').selection('input').set({'del4'});
model.geom('geom1').feature('mir1').set('axis', [0 1 0]);
model.geom('geom1').feature('mir1').set('workplanesrc', 'pi1');
model.geom('geom1').run('mir1');
model.geom('geom1').create('rot3', 'Rotate');
model.geom('geom1').feature('rot3').label('Telescope Truss 1-8');
model.geom('geom1').feature('rot3').selection('input').set({'del4' 'mir1'});
model.geom('geom1').feature('rot3').set('rot', '0 90 180 270');
model.geom('geom1').feature('rot3').set('workplanesrc', 'pi1');
model.geom('geom1').run('rot3');
model.geom('geom1').create('uni1', 'Union');
model.geom('geom1').feature('uni1').label('Telescope Truss Union');
model.geom('geom1').feature('uni1').selection('input').set({'rot3'});
model.geom('geom1').feature('uni1').set('intbnd', false);
model.geom('geom1').feature('uni1').set('selresult', true);
model.geom('geom1').feature('uni1').set('selresultshow', 'all');
model.geom('geom1').run('fin');

model.title([]);

model.description('');

model.label('newtonian_telescope_structural_analysis_geom_sequence.mph');

model.modelNode.label('Components');

out = model;
