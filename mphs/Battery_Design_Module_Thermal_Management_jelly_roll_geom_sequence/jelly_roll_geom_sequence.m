function out = model
%
% jelly_roll_geom_sequence.m
%
% Model exported on May 26 2025, 21:26 by COMSOL 6.2.0.339.

import com.comsol.model.*
import com.comsol.model.util.*

model = ModelUtil.create('Model');

model.modelPath('/Applications/COMSOL62/Multiphysics/applications/Battery_Design_Module/Thermal_Management');

model.modelNode.create('comp1', true);

model.geom.create('geom1', 3);
model.geom('geom1').model('comp1');

model.mesh.create('mesh1', 'geom1');

% To import content from file, use:
% model.param.loadFile('FILENAME');
model.param.set('r_mandrel', '2[mm]', 'Mandrel radius');
model.param.set('r_can', '8.5[mm]', 'Can inner radius');
model.param.set('D_sep', '30[um]', 'Separator thickness');
model.param.set('D_pos', '200[um]', 'Positive electrode thickness');
model.param.set('D_neg', '200[um]', 'Negative electrode thickness');
model.param.set('D_cc_pos', '10[um]', 'Positive current collector foil thickness');
model.param.set('D_cc_neg', '10[um]', 'Negative current collector foil thickness');
model.param.set('D_cell', '2*(D_neg+D_sep+D_pos)+D_cc_pos+D_cc_neg', 'Unit cell thickness');
model.param.set('D_tab_neg', '100[um]', 'Positive tab thickness');
model.param.set('D_tab_pos', '100[um]', 'Negative tab thickness');
model.param.set('L_tab', '5[mm]', 'Tab length (width)');
model.param.set('H_jr', '60[mm]', 'Height of jelly roll');
model.param.set('H_tab_in_jr', '2/3*H_jr', 'Height of tab in jelly roll');
model.param.set('H_tab_outside_jr', '5[mm]', 'Height of tab outside jelly roll');
model.param.set('r0', 'r_mandrel+D_tab_pos', 'Spiral starting radius');
model.param.set('w_tab_pos', '1.86', 'Revolved angle, positive tab');
model.param.set('w_tab_neg', '0.48', 'Revolved angle, negative tab');
model.param.set('w_start_pos', '2*pi*r_mandrel/D_cell', 'Starting angle, positive cc');
model.param.set('w_end_pos', '2*pi*(r_can-(D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)-D_tab_pos-D_tab_neg)/D_cell', 'Ending angle, positive cc');
model.param.set('w_tot_ccs', 'w_end_pos-w_start_pos', 'Revolved angle, current collectors');

model.func.create('an1', 'Analytic');
model.func('an1').label('Analytic - spiralX');
model.func('an1').set('funcname', 'spiralX');
model.func('an1').set('expr', '-(s/(2*pi)*D_cell+R)*sin(s)');
model.func('an1').set('args', 's, R');
model.func('an1').set('fununit', 'm');
model.func('an1').setIndex('argunit', 1, 0);
model.func('an1').setIndex('argunit', 'm', 1);
model.func.duplicate('an2', 'an1');
model.func('an2').label('Analytic - spiralY');
model.func('an2').set('funcname', 'spiralY');
model.func('an2').set('expr', '-(s/(2*pi)*D_cell+R)*cos(s)');

model.geom('geom1').create('wp1', 'WorkPlane');
model.geom('geom1').feature('wp1').set('unite', true);
model.geom('geom1').feature('wp1').geom.create('pc1', 'ParametricCurve');
model.geom('geom1').feature('wp1').geom.feature('pc1').set('parmax', 'w_tot_ccs');
model.geom('geom1').feature('wp1').geom.feature('pc1').set('coord', {'spiralX(s,r0)' ''});
model.geom('geom1').feature('wp1').geom.feature('pc1').setIndex('coord', 'spiralY(s,r0)', 1);
model.geom('geom1').feature('wp1').geom.feature('pc1').set('rtol', 1.0E-9);
model.geom('geom1').feature('wp1').geom.feature('pc1').set('maxknots', 10000);
model.geom('geom1').feature('wp1').geom.run('pc1');
model.geom('geom1').feature('wp1').geom.feature.duplicate('pc2', 'pc1');
model.geom('geom1').feature('wp1').geom.feature('pc2').setIndex('coord', 'spiralX(s,r0+D_cc_pos)', 0);
model.geom('geom1').feature('wp1').geom.feature('pc2').setIndex('coord', 'spiralY(s,r0+D_cc_pos)', 1);
model.geom('geom1').feature('wp1').geom.run('pc2');
model.geom('geom1').feature('wp1').geom.feature.duplicate('pc3', 'pc2');
model.geom('geom1').feature('wp1').geom.feature('pc3').setIndex('coord', 'spiralX(s,r0+D_cc_pos+D_pos)', 0);
model.geom('geom1').feature('wp1').geom.feature('pc3').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos)', 1);
model.geom('geom1').feature('wp1').geom.run('pc3');
model.geom('geom1').feature('wp1').geom.feature.duplicate('pc4', 'pc3');
model.geom('geom1').feature('wp1').geom.feature('pc4').setIndex('coord', 'spiralX(s,r0+D_cc_pos+D_pos+D_sep/2)', 0);
model.geom('geom1').feature('wp1').geom.feature('pc4').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep/2)', 1);
model.geom('geom1').feature('wp1').geom.run('pc4');
model.geom('geom1').feature('wp1').geom.feature.duplicate('pc5', 'pc4');
model.geom('geom1').feature('wp1').geom.feature('pc5').set('parmin', '2*pi');
model.geom('geom1').feature('wp1').geom.feature('pc5').setIndex('coord', 'spiralX(s,r0-D_pos-D_sep/2)', 0);
model.geom('geom1').feature('wp1').geom.feature('pc5').setIndex('coord', 'spiralY(s,r0-D_pos-D_sep/2)', 1);
model.geom('geom1').feature('wp1').geom.run('pc5');
model.geom('geom1').feature('wp1').geom.feature.duplicate('pc6', 'pc5');
model.geom('geom1').feature('wp1').geom.feature('pc6').setIndex('coord', 'spiralX(s,r0-D_pos)', 0);
model.geom('geom1').feature('wp1').geom.feature('pc6').setIndex('coord', 'spiralY(s,r0-D_pos)', 1);
model.geom('geom1').feature('wp1').geom.run('pc6');
model.geom('geom1').feature('wp1').geom.create('ls1', 'LineSegment');
model.geom('geom1').feature('wp1').geom.feature('ls1').selection('vertex1').set('pc1', 1);
model.geom('geom1').feature('wp1').geom.feature('ls1').selection('vertex2').set('pc4', 1);
model.geom('geom1').feature('wp1').geom.run('ls1');
model.geom('geom1').feature('wp1').geom.create('ls2', 'LineSegment');
model.geom('geom1').feature('wp1').geom.feature('ls2').selection('vertex1').set('pc5', 1);
model.geom('geom1').feature('wp1').geom.feature('ls2').set('specify2', 'coord');
model.geom('geom1').feature('wp1').geom.feature('ls2').set('coord2', {'0' '-(r0+D_cell)'});
model.geom('geom1').feature('wp1').geom.run('ls2');
model.geom('geom1').feature('wp1').geom.create('ls3', 'LineSegment');
model.geom('geom1').feature('wp1').geom.feature('ls3').selection('vertex1').set('pc4', 2);
model.geom('geom1').feature('wp1').geom.feature('ls3').selection('vertex2').set('pc5', 2);
model.geom('geom1').feature('wp1').geom.run('ls3');
model.geom('geom1').feature('wp1').geom.create('pt1', 'Point');
model.geom('geom1').feature('wp1').geom.feature('pt1').setIndex('p', 'spiralX(w_tab_pos,r0)', 0);
model.geom('geom1').feature('wp1').geom.feature('pt1').setIndex('p', 'spiralY(w_tab_pos,r0)', 1);
model.geom('geom1').feature('wp1').geom.run('pt1');
model.geom('geom1').feature('wp1').geom.create('csol1', 'ConvertToSolid');
model.geom('geom1').feature('wp1').geom.feature('csol1').selection('input').set({'ls1' 'ls2' 'ls3' 'pc1' 'pc2' 'pc3' 'pc4' 'pc5' 'pc6' 'pt1'});
model.geom('geom1').feature('wp1').geom.run('csol1');
model.geom('geom1').run('wp1');
model.geom('geom1').feature.create('ext1', 'Extrude');
model.geom('geom1').feature('ext1').label('Positive Domains');
model.geom('geom1').feature('ext1').setIndex('distance', 'H_jr', 0);
model.geom('geom1').feature('ext1').set('selresult', true);
model.geom('geom1').run('ext1');
model.geom('geom1').create('wp2', 'WorkPlane');
model.geom('geom1').feature('wp2').set('unite', true);
model.geom('geom1').feature('wp2').set('quickz', 'H_jr+H_tab_outside_jr');
model.geom('geom1').run('wp2');
model.geom('geom1').feature('wp2').geom.create('pc1', 'ParametricCurve');
model.geom('geom1').feature('wp2').geom.feature('pc1').set('parmax', 'w_tab_pos');
model.geom('geom1').feature('wp2').geom.feature('pc1').set('coord', {'spiralX(s,r0)' ''});
model.geom('geom1').feature('wp2').geom.feature('pc1').setIndex('coord', 'spiralY(s,r0)', 1);
model.geom('geom1').feature('wp2').geom.feature('pc1').set('rtol', 1.0E-9);
model.geom('geom1').feature('wp2').geom.feature('pc1').set('maxknots', 10000);
model.geom('geom1').feature('wp2').geom.run('pc1');
model.geom('geom1').feature('wp2').geom.feature.duplicate('pc2', 'pc1');
model.geom('geom1').feature('wp2').geom.feature('pc2').setIndex('coord', 'spiralX(s,r0-D_tab_pos)', 0);
model.geom('geom1').feature('wp2').geom.feature('pc2').setIndex('coord', 'spiralY(s,r0-D_tab_pos)', 1);
model.geom('geom1').feature('wp2').geom.run('pc2');
model.geom('geom1').feature('wp2').geom.create('ls1', 'LineSegment');
model.geom('geom1').feature('wp2').geom.feature('ls1').selection('vertex1').set('pc1', 2);
model.geom('geom1').feature('wp2').geom.feature('ls1').selection('vertex2').set('pc2', 2);
model.geom('geom1').feature('wp2').geom.run('ls1');
model.geom('geom1').feature('wp2').geom.create('ls2', 'LineSegment');
model.geom('geom1').feature('wp2').geom.feature('ls2').selection('vertex1').set('pc1', 1);
model.geom('geom1').feature('wp2').geom.feature('ls2').selection('vertex2').set('pc2', 1);
model.geom('geom1').feature('wp2').geom.run('ls2');
model.geom('geom1').feature('wp2').geom.create('csol1', 'ConvertToSolid');
model.geom('geom1').feature('wp2').geom.feature('csol1').selection('input').set({'ls1' 'ls2' 'pc1' 'pc2'});
model.geom('geom1').feature('wp2').geom.run('csol1');
model.geom('geom1').run('wp2');
model.geom('geom1').feature.create('ext2', 'Extrude');
model.geom('geom1').feature('ext2').label('Positive Tab');
model.geom('geom1').feature('ext2').setIndex('distance', 'H_tab_outside_jr+H_tab_in_jr', 0);
model.geom('geom1').feature('ext2').set('reverse', true);
model.geom('geom1').feature('ext2').set('selresult', true);
model.geom('geom1').run('ext2');
model.geom('geom1').create('uni1', 'Union');
model.geom('geom1').feature('uni1').selection('input').set({'ext1' 'ext2'});
model.geom('geom1').run('uni1');
model.geom('geom1').create('wp3', 'WorkPlane');
model.geom('geom1').feature('wp3').set('unite', true);
model.geom('geom1').feature('wp3').geom.create('pc1', 'ParametricCurve');
model.geom('geom1').feature('wp3').geom.feature('pc1').set('parmax', 'w_tot_ccs');
model.geom('geom1').feature('wp3').geom.feature('pc1').set('coord', {'spiralX(s,r0+D_cc_pos+D_pos+D_sep/2)' ''});
model.geom('geom1').feature('wp3').geom.feature('pc1').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep/2)', 1);
model.geom('geom1').feature('wp3').geom.feature('pc1').set('rtol', 1.0E-9);
model.geom('geom1').feature('wp3').geom.feature('pc1').set('maxknots', 10000);
model.geom('geom1').feature('wp3').geom.run('pc1');
model.geom('geom1').feature('wp3').geom.feature.duplicate('pc2', 'pc1');
model.geom('geom1').feature('wp3').geom.feature('pc2').setIndex('coord', 'spiralX(s,r0+D_cc_pos+D_pos+D_sep)', 0);
model.geom('geom1').feature('wp3').geom.feature('pc2').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep)', 1);
model.geom('geom1').feature('wp3').geom.run('pc2');
model.geom('geom1').feature('wp3').geom.feature.duplicate('pc3', 'pc2');
model.geom('geom1').feature('wp3').geom.feature('pc3').setIndex('coord', 'spiralX(s,r0+D_cc_pos+D_pos+D_sep+D_neg)', 0);
model.geom('geom1').feature('wp3').geom.feature('pc3').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep+D_neg)', 1);
model.geom('geom1').feature('wp3').geom.run('pc3');
model.geom('geom1').feature('wp3').geom.feature.duplicate('pc4', 'pc3');
model.geom('geom1').feature('wp3').geom.feature('pc4').setIndex('coord', 'spiralX(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)', 0);
model.geom('geom1').feature('wp3').geom.feature('pc4').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)', 1);
model.geom('geom1').feature('wp3').geom.run('pc4');
model.geom('geom1').feature('wp3').geom.feature.duplicate('pc5', 'pc4');
model.geom('geom1').feature('wp3').geom.feature('pc5').set('parmax', 'w_tot_ccs-2*pi');
model.geom('geom1').feature('wp3').geom.feature('pc5').setIndex('coord', 'spiralX(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg+D_neg)', 0);
model.geom('geom1').feature('wp3').geom.feature('pc5').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg+D_neg)', 1);
model.geom('geom1').feature('wp3').geom.run('pc5');
model.geom('geom1').feature('wp3').geom.feature.duplicate('pc6', 'pc5');
model.geom('geom1').feature('wp3').geom.feature('pc6').setIndex('coord', 'spiralX(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg+D_neg+D_sep/2)', 0);
model.geom('geom1').feature('wp3').geom.feature('pc6').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg+D_neg+D_sep/2)', 1);
model.geom('geom1').feature('wp3').geom.run('pc6');
model.geom('geom1').feature('wp3').geom.create('ls1', 'LineSegment');
model.geom('geom1').feature('wp3').geom.feature('ls1').selection('vertex1').set('pc1', 1);
model.geom('geom1').feature('wp3').geom.feature('ls1').selection('vertex2').set('pc6', 1);
model.geom('geom1').feature('wp3').geom.run('ls1');
model.geom('geom1').feature('wp3').geom.create('ls2', 'LineSegment');
model.geom('geom1').feature('wp3').geom.feature('ls2').selection('vertex1').set('pc4', 2);
model.geom('geom1').feature('wp3').geom.feature('ls2').selection('vertex2').set('pc1', 2);
model.geom('geom1').feature('wp3').geom.run('ls2');
model.geom('geom1').feature('wp3').geom.create('ls3', 'LineSegment');
model.geom('geom1').feature('wp3').geom.feature('ls3').selection('vertex1').set('pc6', 2);
model.geom('geom1').feature('wp3').geom.feature('ls3').set('specify2', 'coord');
model.geom('geom1').feature('wp3').geom.feature('ls3').set('coord2', {'spiralX(w_tot_ccs-2*pi,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)' '0'});
model.geom('geom1').feature('wp3').geom.feature('ls3').setIndex('coord2', 'spiralY(w_tot_ccs-2*pi,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)', 1);
model.geom('geom1').feature('wp3').geom.run('ls3');
model.geom('geom1').feature('wp3').geom.create('pt1', 'Point');
model.geom('geom1').feature('wp3').geom.feature('pt1').setIndex('p', 'spiralX(w_tot_ccs-w_tab_neg,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)', 0);
model.geom('geom1').feature('wp3').geom.feature('pt1').setIndex('p', 'spiralY(w_tot_ccs-w_tab_neg,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)', 1);
model.geom('geom1').feature('wp3').geom.run('pt1');
model.geom('geom1').feature('wp3').geom.create('csol1', 'ConvertToSolid');
model.geom('geom1').feature('wp3').geom.feature('csol1').selection('input').set({'ls1' 'ls2' 'ls3' 'pc1' 'pc2' 'pc3' 'pc4' 'pc5' 'pc6' 'pt1'});
model.geom('geom1').feature('wp3').geom.run('csol1');
model.geom('geom1').run('wp3');
model.geom('geom1').feature.create('ext3', 'Extrude');
model.geom('geom1').feature('ext3').label('Negative Domains');
model.geom('geom1').feature('ext3').setIndex('distance', 'H_jr', 0);
model.geom('geom1').feature('ext3').set('selresult', true);
model.geom('geom1').run('ext3');
model.geom('geom1').create('wp4', 'WorkPlane');
model.geom('geom1').feature('wp4').set('unite', true);
model.geom('geom1').feature('wp4').set('quickz', '-H_tab_outside_jr');
model.geom('geom1').run('wp4');
model.geom('geom1').feature('wp4').geom.create('pc1', 'ParametricCurve');
model.geom('geom1').feature('wp4').geom.feature('pc1').set('parmax', 'w_tab_pos');
model.geom('geom1').feature('wp4').geom.feature('pc1').set('parmin', 'w_tot_ccs-w_tab_neg');
model.geom('geom1').feature('wp4').geom.feature('pc1').set('parmax', 'w_tot_ccs');
model.geom('geom1').feature('wp4').geom.feature('pc1').set('coord', {'spiralX(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg+D_tab_neg)' ''});
model.geom('geom1').feature('wp4').geom.feature('pc1').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg+D_tab_neg)', 1);
model.geom('geom1').feature('wp4').geom.feature('pc1').set('rtol', 1.0E-9);
model.geom('geom1').feature('wp4').geom.feature('pc1').set('maxknots', 10000);
model.geom('geom1').feature('wp4').geom.run('pc1');
model.geom('geom1').feature('wp4').geom.feature.duplicate('pc2', 'pc1');
model.geom('geom1').feature('wp4').geom.feature('pc2').setIndex('coord', 'spiralX(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)', 0);
model.geom('geom1').feature('wp4').geom.feature('pc2').setIndex('coord', 'spiralY(s,r0+D_cc_pos+D_pos+D_sep+D_neg+D_cc_neg)', 1);
model.geom('geom1').feature('wp4').geom.run('pc2');
model.geom('geom1').feature('wp4').geom.create('ls1', 'LineSegment');
model.geom('geom1').feature('wp4').geom.feature('ls1').selection('vertex1').set('pc1', 1);
model.geom('geom1').feature('wp4').geom.feature('ls1').selection('vertex2').set('pc2', 1);
model.geom('geom1').feature('wp4').geom.run('ls1');
model.geom('geom1').feature('wp4').geom.create('ls2', 'LineSegment');
model.geom('geom1').feature('wp4').geom.feature('ls2').selection('vertex1').set('pc1', 2);
model.geom('geom1').feature('wp4').geom.feature('ls2').selection('vertex2').set('pc2', 2);
model.geom('geom1').feature('wp4').geom.run('ls2');
model.geom('geom1').feature('wp4').geom.create('csol1', 'ConvertToSolid');
model.geom('geom1').feature('wp4').geom.feature('csol1').selection('input').set({'ls1' 'ls2' 'pc1' 'pc2'});
model.geom('geom1').feature('wp4').geom.run('csol1');
model.geom('geom1').run('wp4');
model.geom('geom1').feature.create('ext4', 'Extrude');
model.geom('geom1').feature('ext4').label('Negative Tab');
model.geom('geom1').feature('ext4').setIndex('distance', 'H_tab_outside_jr+H_tab_in_jr', 0);
model.geom('geom1').feature('ext4').set('selresult', true);
model.geom('geom1').run('ext4');
model.geom('geom1').create('uni2', 'Union');
model.geom('geom1').feature('uni2').selection('input').set({'ext3' 'ext4'});
model.geom('geom1').run('uni2');
model.geom('geom1').create('sel1', 'ExplicitSelection');
model.geom('geom1').feature('sel1').label('Separators');
model.geom('geom1').feature('sel1').selection('selection').set('uni1', [4 5]);
model.geom('geom1').feature('sel1').selection('selection').set('uni2', [1 5]);
model.geom('geom1').run('sel1');
model.geom('geom1').create('sel2', 'ExplicitSelection');
model.geom('geom1').feature('sel2').label('Negative Electrodes');
model.geom('geom1').feature('sel2').selection('selection').set('uni2', [2 4]);
model.geom('geom1').run('sel2');
model.geom('geom1').create('sel3', 'ExplicitSelection');
model.geom('geom1').feature('sel3').label('Positive Electrodes');
model.geom('geom1').feature('sel3').selection('selection').set('uni1', [3 6]);
model.geom('geom1').run('sel3');
model.geom('geom1').create('sel4', 'ExplicitSelection');
model.geom('geom1').feature('sel4').label('Negative CC');
model.geom('geom1').feature('sel4').selection('selection').set('uni2', 3);
model.geom('geom1').run('sel4');
model.geom('geom1').create('sel5', 'ExplicitSelection');
model.geom('geom1').feature('sel5').label('Positive CC');
model.geom('geom1').feature('sel5').selection('selection').set('uni1', 1);
model.geom('geom1').run('sel5');
model.geom('geom1').create('sel6', 'ExplicitSelection');
model.geom('geom1').feature('sel6').selection('selection').init(2);
model.geom('geom1').feature('sel6').label('Negative Current Terminal');
model.geom('geom1').feature('sel6').selection('selection').set('uni2', 24);
model.geom('geom1').run('sel6');
model.geom('geom1').create('sel7', 'ExplicitSelection');
model.geom('geom1').feature('sel7').label('Positive Current Terminal');
model.geom('geom1').feature('sel7').selection('selection').init(2);
model.geom('geom1').feature('sel7').selection('selection').set('uni1', 9);
model.geom('geom1').run('sel7');
model.geom('geom1').create('sel8', 'ExplicitSelection');
model.geom('geom1').feature('sel8').selection('selection').init(2);
model.geom('geom1').feature('sel8').label('Cooling Boundaries');
model.geom('geom1').feature('sel8').selection('selection').set('uni2', [25 27 29]);
model.geom('geom1').run('sel8');
model.geom('geom1').create('sel9', 'ExplicitSelection');
model.geom('geom1').feature('sel9').label('Initial Mesh Faces');
model.geom('geom1').feature('sel9').selection('selection').init(2);
model.geom('geom1').feature('sel9').selection('selection').set('uni1', [1 2 5 7]);
model.geom('geom1').feature('sel9').selection('selection').set('uni2', [23 25 26 27]);
model.geom('geom1').run('sel9');
model.geom('geom1').create('rot1', 'Rotate');
model.geom('geom1').feature('rot1').selection('input').set({'uni1' 'uni2'});
model.geom('geom1').feature('rot1').set('rot', 180);
model.geom('geom1').run('rot1');
model.geom('geom1').create('wp5', 'WorkPlane');
model.geom('geom1').feature('wp5').set('unite', true);
model.geom('geom1').feature('wp5').set('planetype', 'faceparallel');
model.geom('geom1').feature('wp5').selection('face').set('rot1(1)', 24);
model.geom('geom1').run('wp5');
model.geom('geom1').create('par1', 'Partition');
model.geom('geom1').feature('par1').selection('input').set({'rot1'});
model.geom('geom1').feature('par1').set('partitionwith', 'workplane');
model.geom('geom1').run('par1');
model.geom('geom1').feature('fin').set('action', 'assembly');
model.geom('geom1').run('fin');
model.geom('geom1').create('boxsel1', 'BoxSelection');
model.geom('geom1').feature('boxsel1').set('entitydim', 2);
model.geom('geom1').feature('boxsel1').set('xmin', '-1[um]');
model.geom('geom1').feature('boxsel1').set('xmax', '1[um]');
model.geom('geom1').feature('boxsel1').set('ymin', '-(r_can-D_neg-D_sep/2)');
model.geom('geom1').feature('boxsel1').set('ymax', 0);
model.geom('geom1').feature('boxsel1').set('condition', 'inside');
model.geom('geom1').feature('boxsel1').set('selshow', false);
model.geom('geom1').run('boxsel1');
model.geom('geom1').feature.duplicate('boxsel2', 'boxsel1');
model.geom('geom1').feature('boxsel2').set('ymin', 'r_mandrel+D_cell-D_cc_pos/2+D_tab_pos');
model.geom('geom1').feature('boxsel2').set('ymax', Inf);
model.geom('geom1').run('boxsel2');
model.geom('geom1').create('unisel1', 'UnionSelection');
model.geom('geom1').feature('unisel1').set('entitydim', 2);
model.geom('geom1').feature('unisel1').set('input', {'boxsel1' 'boxsel2'});
model.geom('geom1').feature('unisel1').set('selshow', false);
model.geom('geom1').run('unisel1');
model.geom('geom1').create('mcf1', 'MeshControlFaces');
model.geom('geom1').feature('mcf1').selection('input').named('unisel1');
model.geom('geom1').run('mcf1');
model.geom('geom1').create('ige1', 'IgnoreEdges');
model.geom('geom1').feature('ige1').selection('input').set('mcf1', [48 126]);
model.geom('geom1').run('ige1');
model.geom('geom1').create('unisel2', 'UnionSelection');
model.geom('geom1').feature('unisel2').set('input', {'ext2' 'sel5'});
model.geom('geom1').feature('unisel2').label('Positive CC and Tab');
model.geom('geom1').run('unisel2');
model.geom('geom1').create('unisel3', 'UnionSelection');
model.geom('geom1').feature('unisel3').label('Negative CC and Tab');
model.geom('geom1').feature('unisel3').set('input', {'ext4' 'sel4'});
model.geom('geom1').run('unisel3');
model.geom('geom1').create('unisel4', 'UnionSelection');
model.geom('geom1').feature('unisel4').label('CCs and Tabs');
model.geom('geom1').feature('unisel4').set('input', {'unisel2' 'unisel3'});
model.geom('geom1').run('unisel4');
model.geom('geom1').create('unisel5', 'UnionSelection');
model.geom('geom1').feature('unisel5').label('Electrodes');
model.geom('geom1').feature('unisel5').set('input', {'sel2' 'sel3'});
model.geom('geom1').run('unisel5');
model.geom('geom1').create('unisel6', 'UnionSelection');
model.geom('geom1').feature('unisel6').label('Tabs');
model.geom('geom1').feature('unisel6').set('input', {'ext2' 'ext4'});

model.title([]);

model.description('');

model.label('jelly_roll_geom_sequence.mph');

model.modelNode.label('Components');

out = model;
