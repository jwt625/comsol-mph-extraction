function out = model
%
% micromechanical_model_of_a_piezoelectric_composite.m
%
% Model exported on May 26 2025, 21:33 by COMSOL 6.2.0.339.

import com.comsol.model.*
import com.comsol.model.util.*

model = ModelUtil.create('Model');

model.modelPath('/Applications/COMSOL62/Multiphysics/applications/Structural_Mechanics_Module/Material_Models');

model.modelNode.create('comp1', true);

model.geom.create('geom1', 3);
model.geom('geom1').model('comp1');

model.mesh.create('mesh1', 'geom1');

model.physics.create('solid', 'SolidMechanics', 'geom1');
model.physics('solid').model('comp1');
model.physics('solid').create('pzm1', 'PiezoelectricMaterialModel');
model.physics('solid').feature('pzm1').selection.all;
model.physics.create('es', 'Electrostatics', 'geom1');
model.physics('es').model('comp1');
model.physics('es').create('ccnp1', 'ChargeConservationPiezo');
model.physics('es').feature('ccnp1').selection.all;

model.multiphysics.create('pze1', 'PiezoelectricEffect', 'geom1', 3);
model.multiphysics('pze1').set('Solid_physics', 'solid');
model.multiphysics('pze1').set('Electrostatics_physics', 'es');

model.param.set('v_f', '0.5');
model.param.descr('v_f', 'Fiber volume fraction');
model.param.set('W', '2[m]');
model.param.descr('W', 'Width of unit cell');
model.param.set('D', '2[m]');
model.param.descr('D', 'Depth of unit cell');
model.param.set('H', '0.2[m]');
model.param.descr('H', 'Height of unit cell');
model.param.set('V', 'W*D*H');
model.param.descr('V', 'Volume of unit cell');
model.param.set('V_f', 'v_f*V');
model.param.descr('V_f', 'Volume of fibers');
model.param.set('r_f', 'sqrt(V_f/(2*H*pi))');
model.param.descr('r_f', 'Radius of cylindrical fibers');

model.geom('geom1').create('blk1', 'Block');
model.geom('geom1').feature('blk1').set('size', {'W' 'D' 'H'});
model.geom('geom1').run('blk1');
model.geom('geom1').create('wp1', 'WorkPlane');
model.geom('geom1').feature('wp1').set('unite', true);
model.geom('geom1').feature('wp1').geom.create('c1', 'Circle');
model.geom('geom1').feature('wp1').geom.feature('c1').set('r', 'r_f');
model.geom('geom1').feature('wp1').geom.feature('c1').set('angle', 180);
model.geom('geom1').feature('wp1').geom.feature('c1').set('pos', {'0' 'D/2'});
model.geom('geom1').feature('wp1').geom.feature('c1').set('rot', -90);
model.geom('geom1').feature('wp1').geom.run('c1');
model.geom('geom1').feature('wp1').geom.create('c2', 'Circle');
model.geom('geom1').feature('wp1').geom.feature('c2').set('r', 'r_f');
model.geom('geom1').feature('wp1').geom.feature('c2').set('angle', 180);
model.geom('geom1').feature('wp1').geom.feature('c2').set('pos', {'W' 'D/2'});
model.geom('geom1').feature('wp1').geom.feature('c2').set('rot', 90);
model.geom('geom1').feature('wp1').geom.run('c2');
model.geom('geom1').feature('wp1').geom.create('c3', 'Circle');
model.geom('geom1').feature('wp1').geom.feature('c3').set('r', 'r_f');
model.geom('geom1').feature('wp1').geom.feature('c3').set('angle', 180);
model.geom('geom1').feature('wp1').geom.feature('c3').set('pos', {'W/2' 'D'});
model.geom('geom1').feature('wp1').geom.feature('c3').set('rot', 180);
model.geom('geom1').feature('wp1').geom.run('c3');
model.geom('geom1').feature('wp1').geom.create('c4', 'Circle');
model.geom('geom1').feature('wp1').geom.feature('c4').set('r', 'r_f');
model.geom('geom1').feature('wp1').geom.feature('c4').set('angle', 180);
model.geom('geom1').feature('wp1').geom.feature('c4').set('pos', {'W/2' '0'});
model.geom('geom1').feature('wp1').geom.run('c4');
model.geom('geom1').run('wp1');
model.geom('geom1').feature.create('ext1', 'Extrude');
model.geom('geom1').feature('ext1').setIndex('distance', 'H', 0);
model.geom('geom1').feature('ext1').label('Fiber');
model.geom('geom1').feature('ext1').set('selresult', true);
model.geom('geom1').feature('ext1').set('color', 'custom');
model.geom('geom1').feature('ext1').set('customcolor', [1 0.501960813999176 0.7529411911964417]);
model.geom('geom1').run('ext1');
model.geom('geom1').create('dif1', 'Difference');
model.geom('geom1').feature('dif1').label('Matrix');
model.geom('geom1').feature('dif1').selection('input').set({'blk1'});
model.geom('geom1').feature('dif1').selection('input2').named('ext1');
model.geom('geom1').feature('dif1').set('keepsubtract', true);
model.geom('geom1').feature('dif1').set('selresult', true);
model.geom('geom1').feature('dif1').set('color', 'custom');
model.geom('geom1').feature('dif1').set('customcolor', [0.5882353186607361 0.9411764740943909 0.9411764740943909]);
model.geom('geom1').run('fin');
model.geom('geom1').create('boxsel1', 'BoxSelection');
model.geom('geom1').feature('boxsel1').set('entitydim', 2);
model.geom('geom1').feature('boxsel1').label('Pair 1, Source');
model.geom('geom1').feature('boxsel1').set('xmax', 0);
model.geom('geom1').feature('boxsel1').set('condition', 'inside');
model.geom('geom1').run('boxsel1');
model.geom('geom1').create('boxsel2', 'BoxSelection');
model.geom('geom1').feature('boxsel2').set('entitydim', 2);
model.geom('geom1').feature('boxsel2').label('Pair 1, Destination');
model.geom('geom1').feature('boxsel2').set('xmin', 'W');
model.geom('geom1').feature('boxsel2').set('condition', 'inside');
model.geom('geom1').run('boxsel2');
model.geom('geom1').create('boxsel3', 'BoxSelection');
model.geom('geom1').feature('boxsel3').set('entitydim', 2);
model.geom('geom1').feature('boxsel3').label('Pair 2, Source');
model.geom('geom1').feature('boxsel3').set('ymax', 0);
model.geom('geom1').feature('boxsel3').set('condition', 'inside');
model.geom('geom1').run('boxsel3');
model.geom('geom1').create('boxsel4', 'BoxSelection');
model.geom('geom1').feature('boxsel4').set('entitydim', 2);
model.geom('geom1').feature('boxsel4').label('Pair 2, Destination');
model.geom('geom1').feature('boxsel4').set('ymin', 'D');
model.geom('geom1').feature('boxsel4').set('condition', 'inside');
model.geom('geom1').run('boxsel4');
model.geom('geom1').create('boxsel5', 'BoxSelection');
model.geom('geom1').feature('boxsel5').set('entitydim', 2);
model.geom('geom1').feature('boxsel5').label('Pair 3, Source');
model.geom('geom1').feature('boxsel5').set('zmax', 0);
model.geom('geom1').feature('boxsel5').set('condition', 'inside');
model.geom('geom1').run('boxsel5');
model.geom('geom1').create('boxsel6', 'BoxSelection');
model.geom('geom1').feature('boxsel6').set('entitydim', 2);
model.geom('geom1').feature('boxsel6').label('Pair 3, Destination');
model.geom('geom1').feature('boxsel6').set('zmin', 'H');
model.geom('geom1').feature('boxsel6').set('condition', 'inside');
model.geom('geom1').run('boxsel6');
model.geom('geom1').create('unisel1', 'UnionSelection');
model.geom('geom1').feature('unisel1').set('entitydim', 2);
model.geom('geom1').feature('unisel1').set('input', {'boxsel1' 'boxsel2'});
model.geom('geom1').feature('unisel1').label('Pair 1');
model.geom('geom1').run('unisel1');
model.geom('geom1').create('unisel2', 'UnionSelection');
model.geom('geom1').feature('unisel2').set('entitydim', 2);
model.geom('geom1').feature('unisel2').set('input', {'boxsel3' 'boxsel4'});
model.geom('geom1').feature('unisel2').label('Pair 2');
model.geom('geom1').run('unisel2');
model.geom('geom1').create('unisel3', 'UnionSelection');
model.geom('geom1').feature('unisel3').set('entitydim', 2);
model.geom('geom1').feature('unisel3').set('input', {'boxsel5' 'boxsel6'});
model.geom('geom1').feature('unisel3').label('Pair 3');

model.material.create('mat1', 'Common', 'comp1');
model.material('mat1').propertyGroup.create('StrainCharge', 'Strain-charge form');
model.material('mat1').propertyGroup.create('StressCharge', 'Stress-charge form');
model.material('mat1').label('Barium Titanate (poled)');
model.material('mat1').set('family', 'custom');
model.material('mat1').set('customspecular', [0.7843137254901961 1 1]);
model.material('mat1').set('diffuse', 'custom');
model.material('mat1').set('customdiffuse', [0.7843137254901961 0.7843137254901961 0.7843137254901961]);
model.material('mat1').set('ambient', 'custom');
model.material('mat1').set('customambient', [0.7843137254901961 0.7843137254901961 0.7843137254901961]);
model.material('mat1').set('noise', true);
model.material('mat1').set('fresnel', 0.9);
model.material('mat1').set('roughness', 0.1);
model.material('mat1').set('diffusewrap', 0);
model.material('mat1').set('reflectance', 0);
model.material('mat1').propertyGroup('def').set('relpermittivity', {'1115.1' '0' '0' '0' '1115.1' '0' '0' '0' '1251.3'});
model.material('mat1').propertyGroup('def').set('density', '5700[kg/m^3]');
model.material('mat1').propertyGroup('StrainCharge').set('sE', {'9.1e-012[1/Pa]' '-2.7e-012[1/Pa]' '-2.9e-012[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '-2.7e-012[1/Pa]' '9.1e-012[1/Pa]' '-2.9e-012[1/Pa]' '0[1/Pa]'  ...
'0[1/Pa]' '0[1/Pa]' '-2.9e-012[1/Pa]' '-2.9e-012[1/Pa]' '9.5e-012[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]'  ...
'0[1/Pa]' '2.28e-011[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '2.28e-011[1/Pa]' '0[1/Pa]'  ...
'0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '2.36e-011[1/Pa]'});
model.material('mat1').propertyGroup('StrainCharge').set('dET', {'0[C/N]' '0[C/N]' '-7.8e-011[C/N]' '0[C/N]' '0[C/N]' '-7.8e-011[C/N]' '0[C/N]' '0[C/N]' '1.9e-010[C/N]' '0[C/N]'  ...
'2.6e-010[C/N]' '0[C/N]' '2.6e-010[C/N]' '0[C/N]' '0[C/N]' '0[C/N]' '0[C/N]' '0[C/N]'});
model.material('mat1').propertyGroup('StrainCharge').set('epsilonrT', {'1450' '0' '0' '0' '1450' '0' '0' '0' '1700'});
model.material('mat1').propertyGroup('StressCharge').set('cE', {'1.50377e+011[Pa]' '6.56308e+010[Pa]' '6.59391e+010[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '6.56308e+010[Pa]' '1.50377e+011[Pa]' '6.59391e+010[Pa]' '0[Pa]'  ...
'0[Pa]' '0[Pa]' '6.59391e+010[Pa]' '6.59391e+010[Pa]' '1.45521e+011[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]'  ...
'0[Pa]' '4.38596e+010[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '4.38596e+010[Pa]' '0[Pa]'  ...
'0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '4.23729e+010[Pa]'});
model.material('mat1').propertyGroup('StressCharge').set('eES', {'0[C/m^2]' '0[C/m^2]' '-4.32015[C/m^2]' '0[C/m^2]' '0[C/m^2]' '-4.32015[C/m^2]' '0[C/m^2]' '0[C/m^2]' '17.3624[C/m^2]' '0[C/m^2]'  ...
'11.4035[C/m^2]' '0[C/m^2]' '11.4035[C/m^2]' '0[C/m^2]' '0[C/m^2]' '0[C/m^2]' '0[C/m^2]' '0[C/m^2]'});
model.material('mat1').propertyGroup('StressCharge').set('epsilonrS', {'1115.1' '0' '0' '0' '1115.1' '0' '0' '0' '1251.3'});

model.geom('geom1').run;

model.material('mat1').label('Matrix: Barium Titanate (poled)');
model.material('mat1').selection.named('geom1_dif1_dom');
model.material.create('mat2', 'Common', 'comp1');
model.material('mat2').propertyGroup.create('StrainCharge', 'Strain-charge form');
model.material('mat2').propertyGroup.create('StressCharge', 'Stress-charge form');
model.material('mat2').label('Lead Zirconate Titanate (PZT-7A)');
model.material('mat2').set('family', 'custom');
model.material('mat2').set('customspecular', [0.7843137254901961 1 1]);
model.material('mat2').set('diffuse', 'custom');
model.material('mat2').set('customdiffuse', [0.7843137254901961 0.7843137254901961 0.7843137254901961]);
model.material('mat2').set('ambient', 'custom');
model.material('mat2').set('customambient', [0.7843137254901961 0.7843137254901961 0.7843137254901961]);
model.material('mat2').set('noise', true);
model.material('mat2').set('fresnel', 0.9);
model.material('mat2').set('roughness', 0.1);
model.material('mat2').set('diffusewrap', 0);
model.material('mat2').set('reflectance', 0);
model.material('mat2').propertyGroup('def').set('relpermittivity', {'499.5' '0' '0' '0' '499.5' '0' '0' '0' '229.9'});
model.material('mat2').propertyGroup('def').set('density', '7700[kg/m^3]');
model.material('mat2').propertyGroup('StrainCharge').set('sE', {'1.07e-011[1/Pa]' '-3.58e-012[1/Pa]' '-4.6e-012[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '-3.58e-012[1/Pa]' '1.07e-011[1/Pa]' '-4.6e-012[1/Pa]' '0[1/Pa]'  ...
'0[1/Pa]' '0[1/Pa]' '-4.6e-012[1/Pa]' '-4.6e-012[1/Pa]' '1.39e-011[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]'  ...
'0[1/Pa]' '3.4e-011[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '3.4e-011[1/Pa]' '0[1/Pa]'  ...
'0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '0[1/Pa]' '2.86e-011[1/Pa]'});
model.material('mat2').propertyGroup('StrainCharge').set('dET', {'0[C/N]' '0[C/N]' '-6e-011[C/N]' '0[C/N]' '0[C/N]' '-6e-011[C/N]' '0[C/N]' '0[C/N]' '1.53e-010[C/N]' '0[C/N]'  ...
'3.6e-010[C/N]' '0[C/N]' '3.6e-010[C/N]' '0[C/N]' '0[C/N]' '0[C/N]' '0[C/N]' '0[C/N]'});
model.material('mat2').propertyGroup('StrainCharge').set('epsilonrT', {'930' '0' '0' '0' '930' '0' '0' '0' '425'});
model.material('mat2').propertyGroup('StressCharge').set('cE', {'1.57701e+011[Pa]' '8.76735e+010[Pa]' '8.12032e+010[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '8.76735e+010[Pa]' '1.57701e+011[Pa]' '8.12032e+010[Pa]' '0[Pa]'  ...
'0[Pa]' '0[Pa]' '8.12032e+010[Pa]' '8.12032e+010[Pa]' '1.25688e+011[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]'  ...
'0[Pa]' '2.94118e+010[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '2.94118e+010[Pa]' '0[Pa]'  ...
'0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '0[Pa]' '3.4965e+010[Pa]'});
model.material('mat2').propertyGroup('StressCharge').set('eES', {'0[C/m^2]' '0[C/m^2]' '-2.2984[C/m^2]' '0[C/m^2]' '0[C/m^2]' '-2.2984[C/m^2]' '0[C/m^2]' '0[C/m^2]' '9.48595[C/m^2]' '0[C/m^2]'  ...
'10.5882[C/m^2]' '0[C/m^2]' '10.5882[C/m^2]' '0[C/m^2]' '0[C/m^2]' '0[C/m^2]' '0[C/m^2]' '0[C/m^2]'});
model.material('mat2').propertyGroup('StressCharge').set('epsilonrS', {'499.5' '0' '0' '0' '499.5' '0' '0' '0' '229.9'});
model.material('mat2').label('Fiber: Lead Zirconate Titanate (PZT-7A)');
model.material('mat2').selection.named('geom1_ext1_dom');

model.physics('solid').create('cp1', 'CellPeriodicity', 3);
model.physics('solid').feature('cp1').set('BoundaryExpansion', 'PrescribedStrain');
model.physics('solid').feature('cp1').set('EffectivePropertiese', 'ElasticityMatrixVoigt');
model.physics('solid').feature('cp1').create('bp1', 'BoundaryPair', 2);
model.physics('solid').feature('cp1').feature('bp1').selection.named('geom1_unisel1');
model.physics('solid').feature('cp1').feature('bp1').set('manualDestinationSelection', true);
model.physics('solid').feature('cp1').feature('bp1').selection('destinationDomains').named('geom1_boxsel2');
model.physics('solid').feature('cp1').create('bp2', 'BoundaryPair', 2);
model.physics('solid').feature('cp1').feature('bp2').selection.named('geom1_unisel2');
model.physics('solid').feature('cp1').feature('bp2').set('manualDestinationSelection', true);
model.physics('solid').feature('cp1').feature('bp2').selection('destinationDomains').named('geom1_boxsel4');
model.physics('solid').feature('cp1').create('bp3', 'BoundaryPair', 2);
model.physics('solid').feature('cp1').feature('bp3').selection.named('geom1_unisel3');
model.physics('solid').feature('cp1').feature('bp3').set('manualDestinationSelection', true);
model.physics('solid').feature('cp1').feature('bp3').selection('destinationDomains').named('geom1_boxsel6');
model.physics('solid').feature('cp1').set('parametricStudy', 'yes');
model.physics('solid').feature('cp1').setIndex('parameterName', 'v_f', 0, 0);
model.physics('solid').feature('cp1').setIndex('parameterRange', 'range(0.1,0.1,0.7)', 0, 0);
model.physics('solid').feature('cp1').runCommand('createLoadGroupsandStudy');

model.group.create('lg1', 'LoadGroup');

model.nodeGroup('cpgrp').add('group', 'lg1');

model.group.create('lg2', 'LoadGroup');

model.nodeGroup('cpgrp').add('group', 'lg2');

model.group.create('lg3', 'LoadGroup');

model.nodeGroup('cpgrp').add('group', 'lg3');

model.cpl.create('genext1', 'GeneralExtrusion', 'geom1');
model.cpl('genext1').selection.geom('geom1', 2);
model.cpl('genext1').selection.named('geom1_boxsel1');
model.cpl('genext1').set('method', 'closest');
model.cpl.duplicate('genext2', 'genext1');
model.cpl('genext2').selection.named('geom1_boxsel3');
model.cpl.duplicate('genext3', 'genext2');
model.cpl('genext3').selection.named('geom1_boxsel5');

model.physics('es').create('constr1', 'PointwiseConstraint', 2);
model.physics('es').feature('constr1').label('Periodic Condition, Boundary Pair 1');
model.physics('es').feature('constr1').selection.named('geom1_boxsel2');
model.physics('es').feature('constr1').set('constraintExpression', 'V+group.lg1*1[V/m]*W-genext1(V)');
model.physics('es').feature.duplicate('constr2', 'constr1');
model.physics('es').feature('constr2').label('Periodic Condition, Boundary Pair 2');
model.physics('es').feature('constr2').selection.named('geom1_boxsel4');
model.physics('es').feature('constr2').set('constraintExpression', 'V+group.lg2*1[V/m]*D-genext2(V)');
model.physics('es').feature.duplicate('constr3', 'constr2');
model.physics('es').feature('constr3').label('Periodic Condition, Boundary Pair 3');
model.physics('es').feature('constr3').selection.named('geom1_boxsel6');
model.physics('es').feature('constr3').set('constraintExpression', 'V+group.lg3*1[V/m]*H-genext3(V)');
model.physics('es').create('gnd1', 'Ground', 0);
model.physics('es').feature('gnd1').selection.set([1]);

model.cpl.create('intop1', 'Integration', 'geom1');
model.cpl('intop1').set('axisym', true);
model.cpl('intop1').selection.all;

model.variable.create('var1');
model.variable('var1').model('comp1');

% To import content from file, use:
% model.variable('var1').loadFile('FILENAME');
model.variable('var1').set('e11', 'withsol(''solidcp1solp'',intop1(solid.DpzeX)/intop1(1),setval(loadcase,1),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 11 component');
model.variable('var1').set('e21', 'withsol(''solidcp1solp'',intop1(solid.DpzeY)/intop1(1),setval(loadcase,1),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 21 component');
model.variable('var1').set('e31', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1),setval(loadcase,1),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 31 component');
model.variable('var1').set('e12', 'withsol(''solidcp1solp'',intop1(solid.DpzeX)/intop1(1),setval(loadcase,2),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 12 component');
model.variable('var1').set('e22', 'withsol(''solidcp1solp'',intop1(solid.DpzeY)/intop1(1),setval(loadcase,2),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 22 component');
model.variable('var1').set('e32', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1),setval(loadcase,2),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 32 component');
model.variable('var1').set('e13', 'withsol(''solidcp1solp'',intop1(solid.DpzeX)/intop1(1),setval(loadcase,3),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 13 component');
model.variable('var1').set('e23', 'withsol(''solidcp1solp'',intop1(solid.DpzeY)/intop1(1),setval(loadcase,3),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 23 component');
model.variable('var1').set('e33', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1),setval(loadcase,3),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 33 component');
model.variable('var1').set('e14', 'withsol(''solidcp1solp'',intop1(solid.DpzeX)/intop1(1),setval(loadcase,5),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 14 component');
model.variable('var1').set('e24', 'withsol(''solidcp1solp'',intop1(solid.DpzeY)/intop1(1),setval(loadcase,5),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 24 component');
model.variable('var1').set('e34', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1),setval(loadcase,5),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 34 component');
model.variable('var1').set('e15', 'withsol(''solidcp1solp'',intop1(solid.DpzeX)/intop1(1),setval(loadcase,6),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 15 component');
model.variable('var1').set('e25', 'withsol(''solidcp1solp'',intop1(solid.DpzeY)/intop1(1),setval(loadcase,6),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 25 component');
model.variable('var1').set('e35', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1),setval(loadcase,6),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 35 component');
model.variable('var1').set('e16', 'withsol(''solidcp1solp'',intop1(solid.DpzeX)/intop1(1),setval(loadcase,4),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 16 component');
model.variable('var1').set('e26', 'withsol(''solidcp1solp'',intop1(solid.DpzeY)/intop1(1),setval(loadcase,4),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 26 component');
model.variable('var1').set('e36', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1),setval(loadcase,4),setval(v_f,v_f))', 'Homogenized piezoelectric coupling tensor, 36 component');
model.variable('var1').set('k11', 'withsol(''solidcp1solp'',intop1(solid.DpzeX)/intop1(1[V/m]),setval(loadcase,7),setval(v_f,v_f))', 'Homogenized permittivity tensor, 11 component');
model.variable('var1').set('k12', 'withsol(''solidcp1solp'',intop1(solid.DpzeY)/intop1(1[V/m]),setval(loadcase,7),setval(v_f,v_f))', 'Homogenized permittivity tensor, 12 component');
model.variable('var1').set('k13', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1[V/m]),setval(loadcase,7),setval(v_f,v_f))', 'Homogenized permittivity tensor, 13 component');
model.variable('var1').set('k22', 'withsol(''solidcp1solp'',intop1(solid.DpzeY)/intop1(1[V/m]),setval(loadcase,8),setval(v_f,v_f))', 'Homogenized permittivity tensor, 22 component');
model.variable('var1').set('k23', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1[V/m]),setval(loadcase,8),setval(v_f,v_f))', 'Homogenized permittivity tensor, 23 component');
model.variable('var1').set('k33', 'withsol(''solidcp1solp'',intop1(solid.DpzeZ)/intop1(1[V/m]),setval(loadcase,9),setval(v_f,v_f))', 'Homogenized permittivity tensor, 33 component');

model.mesh('mesh1').autoMeshSize(2);
model.mesh('mesh1').run;

model.study('solidcp1std').feature('solidcp1stat').setIndex('loadcase', 'Load case 7', 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadcase', 'Load case 7', 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 6, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 6, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', true, 6, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadcase', 'Load case 8', 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadcase', 'Load case 8', 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 7, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 7, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', true, 7, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadcase', 'Load case 9', 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadcase', 'Load case 9', 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 0);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 1);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 2);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 3);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 4);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 5);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 6);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 7);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', false, 8, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroupweight', '1.0', 8, 8);
model.study('solidcp1std').feature('solidcp1stat').setIndex('loadgroup', true, 8, 8);

model.sol('solidcp1sol').study('solidcp1std');
model.sol('solidcp1sol').feature.remove('s1');
model.sol('solidcp1sol').feature.remove('v1');
model.sol('solidcp1sol').feature.remove('st1');
model.sol('solidcp1sol').create('st1', 'StudyStep');
model.sol('solidcp1sol').feature('st1').set('study', 'solidcp1std');
model.sol('solidcp1sol').feature('st1').set('studystep', 'solidcp1stat');
model.sol('solidcp1sol').create('v1', 'Variables');
model.sol('solidcp1sol').feature('v1').set('control', 'solidcp1stat');
model.sol('solidcp1sol').create('s1', 'Stationary');
model.sol('solidcp1sol').feature('s1').create('p1', 'Parametric');
model.sol('solidcp1sol').feature('s1').feature.remove('pDef');
model.sol('solidcp1sol').feature('s1').feature('p1').set('control', 'solidcp1stat');
model.sol('solidcp1sol').feature('s1').set('control', 'solidcp1stat');
model.sol('solidcp1sol').feature('s1').feature('aDef').set('cachepattern', true);
model.sol('solidcp1sol').feature('s1').create('seDef', 'Segregated');
model.sol('solidcp1sol').feature('s1').create('fc1', 'FullyCoupled');
model.sol('solidcp1sol').feature('s1').feature('fc1').set('termonres', 'auto');
model.sol('solidcp1sol').feature('s1').feature('fc1').set('reserrfact', 1000);
model.sol('solidcp1sol').feature('s1').create('d1', 'Direct');
model.sol('solidcp1sol').feature('s1').feature('d1').set('linsolver', 'mumps');
model.sol('solidcp1sol').feature('s1').feature('d1').label('Suggested Direct Solver (pze1) (Merged)');
model.sol('solidcp1sol').feature('s1').create('i1', 'Iterative');
model.sol('solidcp1sol').feature('s1').feature('i1').set('linsolver', 'fgmres');
model.sol('solidcp1sol').feature('s1').feature('i1').set('rhob', 400);
model.sol('solidcp1sol').feature('s1').feature('i1').set('nlinnormuse', true);
model.sol('solidcp1sol').feature('s1').feature('i1').label('Suggested Iterative Solver (pze1)');
model.sol('solidcp1sol').feature('s1').feature('i1').create('mg1', 'Multigrid');
model.sol('solidcp1sol').feature('s1').feature('i1').feature('mg1').set('prefun', 'gmg');
model.sol('solidcp1sol').feature('s1').feature('i1').feature('mg1').feature('pr').create('so1', 'SOR');
model.sol('solidcp1sol').feature('s1').feature('i1').feature('mg1').feature('pr').feature('so1').set('relax', 0.8);
model.sol('solidcp1sol').feature('s1').feature('i1').feature('mg1').feature('po').create('so1', 'SOR');
model.sol('solidcp1sol').feature('s1').feature('i1').feature('mg1').feature('po').feature('so1').set('relax', 0.8);
model.sol('solidcp1sol').feature('s1').feature('i1').feature('mg1').feature('cs').create('d1', 'Direct');
model.sol('solidcp1sol').feature('s1').feature('i1').feature('mg1').feature('cs').feature('d1').set('linsolver', 'pardiso');
model.sol('solidcp1sol').feature('s1').feature('i1').feature('mg1').feature('cs').feature('d1').set('pivotperturb', 1.0E-9);
model.sol('solidcp1sol').feature('s1').feature('fc1').set('linsolver', 'd1');
model.sol('solidcp1sol').feature('s1').feature('fc1').set('termonres', 'auto');
model.sol('solidcp1sol').feature('s1').feature('fc1').set('reserrfact', 1000);
model.sol('solidcp1sol').feature('s1').feature.remove('fcDef');
model.sol('solidcp1sol').feature('s1').feature.remove('seDef');
model.sol('solidcp1sol').attach('solidcp1std');

model.batch('solidcp1p').run('compute');

model.result.create('pg1', 'PlotGroup3D');
model.result('pg1').set('data', 'dset2');
model.result('pg1').setIndex('looplevel', 9, 0);
model.result('pg1').setIndex('looplevel', 7, 1);
model.result('pg1').set('defaultPlotID', 'stress');
model.result('pg1').label('Stress (solid)');
model.result('pg1').set('frametype', 'spatial');
model.result('pg1').create('vol1', 'Volume');
model.result('pg1').feature('vol1').set('expr', {'solid.misesGp'});
model.result('pg1').feature('vol1').set('threshold', 'manual');
model.result('pg1').feature('vol1').set('thresholdvalue', 0.2);
model.result('pg1').feature('vol1').set('colortable', 'Rainbow');
model.result('pg1').feature('vol1').set('colortabletrans', 'none');
model.result('pg1').feature('vol1').set('colorscalemode', 'linear');
model.result('pg1').feature('vol1').set('resolution', 'custom');
model.result('pg1').feature('vol1').set('refine', 2);
model.result('pg1').feature('vol1').set('colortable', 'Prism');
model.result('pg1').feature('vol1').create('def', 'Deform');
model.result('pg1').feature('vol1').feature('def').set('expr', {'u' 'v' 'w'});
model.result('pg1').feature('vol1').feature('def').set('descr', 'Displacement field');
model.result.evaluationGroup.create('solidcp1stdEg', 'EvaluationGroup');
model.result.evaluationGroup('solidcp1stdEg').set('defaultPlotID', 'homogenizedMaterialTablecp1');
model.result.evaluationGroup('solidcp1stdEg').set('data', 'dset2');
model.result.evaluationGroup('solidcp1stdEg').set('includeparameters', 'off');
model.result.evaluationGroup('solidcp1stdEg').setIndex('looplevelinput', 'last', 0);
model.result.evaluationGroup('solidcp1stdEg').setIndex('looplevelinput', 'last', 1);
model.result.evaluationGroup('solidcp1stdEg').label('Material Properties (Cell Periodicity Study)');
model.result.evaluationGroup('solidcp1stdEg').create('gmevcp1', 'EvalGlobalMatrix');
model.result.evaluationGroup('solidcp1stdEg').feature('gmevcp1').set('expr', 'root.comp1.solid.cp1.D');
model.result.evaluationGroup('solidcp1stdEg').feature('gmevcp1').set('descr', 'Elasticity matrix');
model.result.evaluationGroup('solidcp1stdEg').run;
model.result.create('pg2', 'PlotGroup3D');
model.result('pg2').label('Electric Potential (es)');
model.result('pg2').set('data', 'dset2');
model.result('pg2').setIndex('looplevel', 9, 0);
model.result('pg2').setIndex('looplevel', 7, 1);
model.result('pg2').set('frametype', 'spatial');
model.result('pg2').set('showlegendsmaxmin', true);
model.result('pg2').set('defaultPlotID', 'InterfaceComponents/PlotDefaults/icom2/pdef1/pcond2/pcond1/pcond1/pg1');
model.result('pg2').feature.create('mslc1', 'Multislice');
model.result('pg2').feature('mslc1').set('showsolutionparams', 'on');
model.result('pg2').feature('mslc1').set('solutionparams', 'parent');
model.result('pg2').feature('mslc1').set('expr', 'V');
model.result('pg2').feature('mslc1').set('multiplanexmethod', 'coord');
model.result('pg2').feature('mslc1').set('xcoord', 'es.CPx');
model.result('pg2').feature('mslc1').set('multiplaneymethod', 'coord');
model.result('pg2').feature('mslc1').set('ycoord', 'es.CPy');
model.result('pg2').feature('mslc1').set('multiplanezmethod', 'coord');
model.result('pg2').feature('mslc1').set('zcoord', 'es.CPz');
model.result('pg2').feature('mslc1').set('colortable', 'Dipole');
model.result('pg2').feature('mslc1').set('showsolutionparams', 'on');
model.result('pg2').feature('mslc1').set('data', 'parent');
model.result('pg2').feature.create('strmsl1', 'StreamlineMultislice');
model.result('pg2').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg2').feature('strmsl1').set('solutionparams', 'parent');
model.result('pg2').feature('strmsl1').set('expr', {'es.Ex' 'es.Ey' 'es.Ez'});
model.result('pg2').feature('strmsl1').set('multiplanexmethod', 'coord');
model.result('pg2').feature('strmsl1').set('xcoord', 'es.CPx');
model.result('pg2').feature('strmsl1').set('multiplaneymethod', 'coord');
model.result('pg2').feature('strmsl1').set('ycoord', 'es.CPy');
model.result('pg2').feature('strmsl1').set('multiplanezmethod', 'coord');
model.result('pg2').feature('strmsl1').set('zcoord', 'es.CPz');
model.result('pg2').feature('strmsl1').set('titletype', 'none');
model.result('pg2').feature('strmsl1').set('posmethod', 'uniform');
model.result('pg2').feature('strmsl1').set('udist', 0.02);
model.result('pg2').feature('strmsl1').set('maxlen', 0.4);
model.result('pg2').feature('strmsl1').set('maxtime', Inf);
model.result('pg2').feature('strmsl1').set('inheritcolor', false);
model.result('pg2').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg2').feature('strmsl1').set('maxtime', Inf);
model.result('pg2').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg2').feature('strmsl1').set('maxtime', Inf);
model.result('pg2').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg2').feature('strmsl1').set('maxtime', Inf);
model.result('pg2').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg2').feature('strmsl1').set('maxtime', Inf);
model.result('pg2').feature('strmsl1').set('data', 'parent');
model.result('pg2').feature('strmsl1').set('inheritplot', 'mslc1');
model.result('pg2').feature('strmsl1').feature.create('col1', 'Color');
model.result('pg2').feature('strmsl1').feature('col1').set('expr', 'V');
model.result('pg2').feature('strmsl1').feature('col1').set('colortable', 'DipoleDark');
model.result('pg2').feature('strmsl1').feature('col1').set('colorlegend', false);
model.result('pg2').feature('strmsl1').feature.create('filt1', 'Filter');
model.result('pg2').feature('strmsl1').feature('filt1').set('expr', '!isScalingSystemDomain');
model.result.create('pg3', 'PlotGroup3D');
model.result('pg3').label('Electric Field Norm (es)');
model.result('pg3').set('data', 'dset2');
model.result('pg3').setIndex('looplevel', 9, 0);
model.result('pg3').setIndex('looplevel', 7, 1);
model.result('pg3').set('frametype', 'spatial');
model.result('pg3').set('showlegendsmaxmin', true);
model.result('pg3').set('defaultPlotID', 'InterfaceComponents/PlotDefaults/icom3/pdef1/pcond2/pcond1/pg1');
model.result('pg3').feature.create('mslc1', 'Multislice');
model.result('pg3').feature('mslc1').set('showsolutionparams', 'on');
model.result('pg3').feature('mslc1').set('solutionparams', 'parent');
model.result('pg3').feature('mslc1').set('expr', 'es.normE');
model.result('pg3').feature('mslc1').set('multiplanexmethod', 'coord');
model.result('pg3').feature('mslc1').set('xcoord', 'es.CPx');
model.result('pg3').feature('mslc1').set('multiplaneymethod', 'coord');
model.result('pg3').feature('mslc1').set('ycoord', 'es.CPy');
model.result('pg3').feature('mslc1').set('multiplanezmethod', 'coord');
model.result('pg3').feature('mslc1').set('zcoord', 'es.CPz');
model.result('pg3').feature('mslc1').set('colortable', 'Prism');
model.result('pg3').feature('mslc1').set('colortabletrans', 'nonlinear');
model.result('pg3').feature('mslc1').set('colorcalibration', -0.8);
model.result('pg3').feature('mslc1').set('showsolutionparams', 'on');
model.result('pg3').feature('mslc1').set('data', 'parent');
model.result('pg3').feature.create('strmsl1', 'StreamlineMultislice');
model.result('pg3').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg3').feature('strmsl1').set('solutionparams', 'parent');
model.result('pg3').feature('strmsl1').set('expr', {'es.Ex' 'es.Ey' 'es.Ez'});
model.result('pg3').feature('strmsl1').set('multiplanexmethod', 'coord');
model.result('pg3').feature('strmsl1').set('xcoord', 'es.CPx');
model.result('pg3').feature('strmsl1').set('multiplaneymethod', 'coord');
model.result('pg3').feature('strmsl1').set('ycoord', 'es.CPy');
model.result('pg3').feature('strmsl1').set('multiplanezmethod', 'coord');
model.result('pg3').feature('strmsl1').set('zcoord', 'es.CPz');
model.result('pg3').feature('strmsl1').set('titletype', 'none');
model.result('pg3').feature('strmsl1').set('posmethod', 'uniform');
model.result('pg3').feature('strmsl1').set('udist', 0.02);
model.result('pg3').feature('strmsl1').set('maxlen', 0.4);
model.result('pg3').feature('strmsl1').set('maxtime', Inf);
model.result('pg3').feature('strmsl1').set('inheritcolor', false);
model.result('pg3').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg3').feature('strmsl1').set('maxtime', Inf);
model.result('pg3').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg3').feature('strmsl1').set('maxtime', Inf);
model.result('pg3').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg3').feature('strmsl1').set('maxtime', Inf);
model.result('pg3').feature('strmsl1').set('showsolutionparams', 'on');
model.result('pg3').feature('strmsl1').set('maxtime', Inf);
model.result('pg3').feature('strmsl1').set('data', 'parent');
model.result('pg3').feature('strmsl1').set('inheritplot', 'mslc1');
model.result('pg3').feature('strmsl1').feature.create('col1', 'Color');
model.result('pg3').feature('strmsl1').feature('col1').set('expr', 'es.normE');
model.result('pg3').feature('strmsl1').feature('col1').set('colortable', 'PrismDark');
model.result('pg3').feature('strmsl1').feature('col1').set('colorlegend', false);
model.result('pg3').feature('strmsl1').feature('col1').set('colortabletrans', 'nonlinear');
model.result('pg3').feature('strmsl1').feature('col1').set('colorcalibration', -0.8);
model.result('pg3').feature('strmsl1').feature.create('filt1', 'Filter');
model.result('pg3').feature('strmsl1').feature('filt1').set('expr', '!isScalingSystemDomain');
model.result('pg1').run;
model.result.create('pg4', 'PlotGroup1D');
model.result('pg4').run;
model.result('pg4').label('Homogenized Elasticity Tensor Component 11');
model.result('pg4').set('data', 'dset2');
model.result('pg4').setIndex('looplevelinput', 'first', 0);
model.result('pg4').set('titletype', 'manual');
model.result('pg4').set('title', 'Homogenized Elasticity Tensor Component 11 vs. Fiber Volume Fraction');
model.result('pg4').set('xlabelactive', true);
model.result('pg4').set('xlabel', 'v<sub>f</sub>');
model.result('pg4').set('ylabelactive', true);
model.result('pg4').set('ylabel', 'c<sub>11</sub> (GPa)');
model.result('pg4').set('showlegends', false);
model.result('pg4').create('glob1', 'Global');
model.result('pg4').feature('glob1').set('markerpos', 'datapoints');
model.result('pg4').feature('glob1').set('linewidth', 'preference');
model.result('pg4').feature('glob1').setIndex('expr', 'solid.cp1.D11', 0);
model.result('pg4').feature('glob1').setIndex('unit', 'GPa', 0);
model.result('pg4').feature('glob1').set('xdatasolnumtype', 'level2');
model.result('pg4').run;
model.result.duplicate('pg5', 'pg4');
model.result('pg5').run;
model.result('pg5').label('Homogenized Elasticity Tensor Component 33');
model.result('pg5').set('title', 'Homogenized Elasticity Tensor Component 33 vs. Fiber Volume Fraction');
model.result('pg5').set('ylabel', 'c<sub>33</sub> (GPa)');
model.result('pg5').run;
model.result('pg5').feature('glob1').setIndex('expr', 'solid.cp1.D33', 0);
model.result('pg5').run;
model.result('pg4').run;
model.result.duplicate('pg6', 'pg4');
model.result('pg6').run;
model.result('pg6').label('Homogenized Elasticity Tensor Component 44');
model.result('pg6').set('title', 'Homogenized Elasticity Tensor Component 44 vs. Fiber Volume Fraction');
model.result('pg6').set('ylabel', 'c<sub>44</sub> (GPa)');
model.result('pg6').run;
model.result('pg6').feature('glob1').setIndex('expr', 'solid.cp1.D44', 0);
model.result('pg6').run;
model.result('pg4').run;
model.result.duplicate('pg7', 'pg4');
model.result('pg7').run;
model.result('pg7').label('Homogenized Elasticity Tensor Component 66');
model.result('pg7').set('title', 'Homogenized Elasticity Tensor Component 66 vs. Fiber Volume Fraction');
model.result('pg7').set('ylabel', 'c<sub>66</sub> (GPa)');
model.result('pg7').run;
model.result('pg7').feature('glob1').setIndex('expr', 'solid.cp1.D66', 0);
model.result('pg7').run;
model.result('pg4').run;
model.result.duplicate('pg8', 'pg4');
model.result('pg8').run;
model.result('pg8').label('Homogenized Elasticity Tensor Component 12');
model.result('pg8').set('title', 'Homogenized Elasticity Tensor Component 12 vs. Fiber Volume Fraction');
model.result('pg8').set('ylabel', 'c<sub>12</sub> (GPa)');
model.result('pg8').run;
model.result('pg8').feature('glob1').setIndex('expr', 'solid.cp1.D12', 0);
model.result('pg8').run;
model.result('pg4').run;
model.result.duplicate('pg9', 'pg4');
model.result('pg9').run;
model.result('pg9').label('Homogenized Elasticity Tensor Component 23');
model.result('pg9').set('title', 'Homogenized Elasticity Tensor Component 23 vs. Fiber Volume Fraction');
model.result('pg9').set('ylabel', 'c<sub>23</sub> (GPa)');
model.result('pg9').run;
model.result('pg9').feature('glob1').setIndex('expr', 'solid.cp1.D23', 0);
model.result('pg9').run;
model.result.create('pg10', 'PlotGroup1D');
model.result('pg10').run;
model.result('pg10').label('Homogenized Piezoelectric Coupling Tensor Component 31');
model.result('pg10').set('data', 'dset2');
model.result('pg10').setIndex('looplevelinput', 'first', 0);
model.result('pg10').set('titletype', 'manual');
model.result('pg10').set('title', 'Homogenized Piezoelectric Coupling Tensor Component 31 vs. Fiber Volume Fraction');
model.result('pg10').set('xlabelactive', true);
model.result('pg10').set('xlabel', 'v<sub>f</sub>');
model.result('pg10').set('ylabelactive', true);
model.result('pg10').set('ylabel', 'e<sub>31</sub> (C/m<sup>2</sup>)');
model.result('pg10').set('showlegends', false);
model.result('pg10').create('glob1', 'Global');
model.result('pg10').feature('glob1').set('markerpos', 'datapoints');
model.result('pg10').feature('glob1').set('linewidth', 'preference');
model.result('pg10').feature('glob1').setIndex('expr', 'e31', 0);
model.result('pg10').feature('glob1').setIndex('unit', 'C/m^2', 0);
model.result('pg10').feature('glob1').set('xdatasolnumtype', 'level2');
model.result('pg10').run;
model.result.duplicate('pg11', 'pg10');
model.result('pg11').run;
model.result('pg11').label('Homogenized Piezoelectric Coupling Tensor Component 33');
model.result('pg11').set('title', 'Homogenized Piezoelectric Coupling Tensor Component 33 vs. Fiber Volume Fraction');
model.result('pg11').set('ylabel', 'e<sub>33</sub> (C/m<sup>2</sup>)');
model.result('pg11').run;
model.result('pg11').feature('glob1').setIndex('expr', 'e33', 0);
model.result('pg11').feature('glob1').setIndex('unit', 'C/m^2', 0);
model.result('pg11').run;
model.result('pg10').run;
model.result.duplicate('pg12', 'pg10');
model.result('pg12').run;
model.result('pg12').label('Homogenized Piezoelectric Coupling Tensor Component 15');
model.result('pg12').set('title', 'Homogenized Piezoelectric Coupling Tensor Component 15 vs. Fiber Volume Fraction');
model.result('pg12').set('ylabel', 'e<sub>15</sub> (C/m<sup>2</sup>)');
model.result('pg12').run;
model.result('pg12').feature('glob1').setIndex('expr', 'e15', 0);
model.result('pg12').feature('glob1').setIndex('unit', 'C/m^2', 0);
model.result('pg12').run;
model.result.create('pg13', 'PlotGroup1D');
model.result('pg13').run;
model.result('pg13').label('Homogenized Permittivity Tensor Component 11');
model.result('pg13').set('data', 'dset2');
model.result('pg13').setIndex('looplevelinput', 'first', 0);
model.result('pg13').set('titletype', 'manual');
model.result('pg13').set('title', 'Homogenized Permittivity Tensor Component 11 vs. Fiber Volume Fraction');
model.result('pg13').set('xlabelactive', true);
model.result('pg13').set('xlabel', 'v<sub>f</sub>');
model.result('pg13').set('ylabelactive', true);
model.result('pg13').set('ylabel', 'k<sub>11</sub> (F/m)');
model.result('pg13').set('showlegends', false);
model.result('pg13').create('glob1', 'Global');
model.result('pg13').feature('glob1').set('markerpos', 'datapoints');
model.result('pg13').feature('glob1').set('linewidth', 'preference');
model.result('pg13').feature('glob1').setIndex('expr', 'k11', 0);
model.result('pg13').feature('glob1').setIndex('unit', 'F/m', 0);
model.result('pg13').feature('glob1').set('xdatasolnumtype', 'level2');
model.result('pg13').run;
model.result.duplicate('pg14', 'pg13');
model.result('pg14').run;
model.result('pg14').label('Homogenized Permittivity Tensor Component 33');
model.result('pg14').set('title', 'Homogenized Permittivity Tensor Component 33 vs. Fiber Volume Fraction');
model.result('pg14').set('ylabel', 'k<sub>33</sub> (F/m)');
model.result('pg14').run;
model.result('pg14').feature('glob1').setIndex('expr', 'k33', 0);
model.result('pg14').feature('glob1').setIndex('unit', 'F/m', 0);
model.result('pg14').run;
model.result.evaluationGroup('solidcp1stdEg').label('Homogenized Elasticity Tensor (70% Fiber Volume Fraction)');
model.result.evaluationGroup.create('eg1', 'EvaluationGroup');
model.result.evaluationGroup('eg1').label('Homogenized Piezoelectric Coupling Tensor (70% Fiber Volume Fraction)');
model.result.evaluationGroup('eg1').set('data', 'dset2');
model.result.evaluationGroup('eg1').setIndex('looplevelinput', 'last', 1);
model.result.evaluationGroup('eg1').setIndex('looplevelinput', 'last', 0);
model.result.evaluationGroup('eg1').set('includeparameters', false);
model.result.evaluationGroup('eg1').set('concatenation', 'vertical');
model.result.evaluationGroup('eg1').create('gev1', 'EvalGlobal');
model.result.evaluationGroup('eg1').feature('gev1').setIndex('expr', 'e11', 0);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 11 component', 0);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('expr', 'e12', 1);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 12 component', 1);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('expr', 'e13', 2);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 13 component', 2);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('expr', 'e14', 3);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 14 component', 3);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('expr', 'e15', 4);
model.result.evaluationGroup('eg1').feature('gev1').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 15 component', 4);
model.result.evaluationGroup('eg1').feature.duplicate('gev2', 'gev1');
model.result.evaluationGroup('eg1').feature('gev2').setIndex('expr', 'e21', 0);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 21 component', 0);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('expr', 'e22', 1);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 22 component', 1);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('expr', 'e23', 2);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 23 component', 2);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('expr', 'e24', 3);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 24 component', 3);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('expr', 'e25', 4);
model.result.evaluationGroup('eg1').feature('gev2').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 25 component', 4);
model.result.evaluationGroup('eg1').feature.duplicate('gev3', 'gev2');
model.result.evaluationGroup('eg1').feature('gev3').setIndex('expr', 'e31', 0);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 31 component', 0);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('expr', 'e32', 1);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 32 component', 1);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('expr', 'e33', 2);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 33 component', 2);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('expr', 'e34', 3);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 34 component', 3);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('expr', 'e35', 4);
model.result.evaluationGroup('eg1').feature('gev3').setIndex('descr', 'Homogenized piezoelectric coupling tensor (C/m^2), 35 component', 4);
model.result.evaluationGroup('eg1').run;
model.result.evaluationGroup.create('eg2', 'EvaluationGroup');
model.result.evaluationGroup('eg2').label('Homogenized Permittivity Tensor (70% Fiber Volume Fraction)');
model.result.evaluationGroup('eg2').set('data', 'dset2');
model.result.evaluationGroup('eg2').setIndex('looplevelinput', 'last', 1);
model.result.evaluationGroup('eg2').setIndex('looplevelinput', 'last', 0);
model.result.evaluationGroup('eg2').set('includeparameters', false);
model.result.evaluationGroup('eg2').set('concatenation', 'vertical');
model.result.evaluationGroup('eg2').create('gev1', 'EvalGlobal');
model.result.evaluationGroup('eg2').feature('gev1').setIndex('expr', 'k11', 0);
model.result.evaluationGroup('eg2').feature('gev1').setIndex('descr', 'Homogenized permittivity tensor (F/m), 11 component', 0);
model.result.evaluationGroup('eg2').feature('gev1').setIndex('expr', 'k12', 1);
model.result.evaluationGroup('eg2').feature('gev1').setIndex('descr', 'Homogenized permittivity tensor (F/m), 12 component', 1);
model.result.evaluationGroup('eg2').feature('gev1').setIndex('expr', 'k13', 2);
model.result.evaluationGroup('eg2').feature('gev1').setIndex('descr', 'Homogenized permittivity tensor (F/m), 13 component', 2);
model.result.evaluationGroup('eg2').feature.duplicate('gev2', 'gev1');
model.result.evaluationGroup('eg2').feature('gev2').setIndex('expr', 'k12', 0);
model.result.evaluationGroup('eg2').feature('gev2').setIndex('descr', 'Homogenized permittivity tensor (F/m), 12 component', 0);
model.result.evaluationGroup('eg2').feature('gev2').setIndex('expr', 'k22', 1);
model.result.evaluationGroup('eg2').feature('gev2').setIndex('descr', 'Homogenized permittivity tensor (F/m), 22 component', 1);
model.result.evaluationGroup('eg2').feature('gev2').setIndex('expr', 'k23', 2);
model.result.evaluationGroup('eg2').feature('gev2').setIndex('descr', 'Homogenized permittivity tensor (F/m), 23 component', 2);
model.result.evaluationGroup('eg2').feature.duplicate('gev3', 'gev2');
model.result.evaluationGroup('eg2').feature('gev3').setIndex('expr', 'k13', 0);
model.result.evaluationGroup('eg2').feature('gev3').setIndex('descr', 'Homogenized permittivity tensor (F/m), 13 component', 0);
model.result.evaluationGroup('eg2').feature('gev3').setIndex('expr', 'k23', 1);
model.result.evaluationGroup('eg2').feature('gev3').setIndex('descr', 'Homogenized permittivity tensor (F/m), 23 component', 1);
model.result.evaluationGroup('eg2').feature('gev3').setIndex('expr', 'k33', 2);
model.result.evaluationGroup('eg2').feature('gev3').setIndex('descr', 'Homogenized permittivity tensor (F/m), 33 component', 2);
model.result.evaluationGroup('eg2').run;
model.result('pg4').run;

model.title('Micromechanical Model of a Piezoelectric Fiber Composite');

model.description('This example studies the micromechanical properties of a piezoelectric fiber composite. The homogenized electromechanical properties of the composite are derived from the individual microscopic properties of the matrix and fiber.');

model.mesh.clearMeshes;

model.sol('solidcp1sol').clearSolutionData;
model.sol('solidcp1solp').clearSolutionData;
model.sol('sol1').clearSolutionData;
model.sol('sol2').clearSolutionData;
model.sol('sol3').clearSolutionData;
model.sol('sol4').clearSolutionData;
model.sol('sol5').clearSolutionData;
model.sol('sol6').clearSolutionData;
model.sol('sol7').clearSolutionData;

model.label('micromechanical_model_of_a_piezoelectric_composite.mph');

model.modelNode.label('Components');

out = model;
