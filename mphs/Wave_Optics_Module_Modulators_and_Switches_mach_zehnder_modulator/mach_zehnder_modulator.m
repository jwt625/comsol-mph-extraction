function out = model
%
% mach_zehnder_modulator.m
%
% Model exported on May 26 2025, 21:34 by COMSOL 6.2.0.339.

import com.comsol.model.*
import com.comsol.model.util.*

model = ModelUtil.create('Model');

model.modelPath('/Applications/COMSOL62/Multiphysics/applications/Wave_Optics_Module/Modulators_and_Switches');

model.modelNode.create('comp1', true);

model.geom.create('geom1', 2);
model.geom('geom1').model('comp1');

model.mesh.create('mesh1', 'geom1');

model.physics.create('ewbe', 'ElectromagneticWavesBeamEnvelopes', 'geom1');
model.physics('ewbe').model('comp1');

model.study.create('std1');
model.study('std1').create('bma', 'BoundaryModeAnalysis');
model.study('std1').feature('bma').set('shiftactive', false);
model.study('std1').feature('bma').set('conrad', '1');
model.study('std1').feature('bma').set('conradynhm', '1');
model.study('std1').feature('bma').set('linpsolnum', 'auto');
model.study('std1').feature('bma').set('solnum', 'auto');
model.study('std1').feature('bma').set('notsolnum', 'auto');
model.study('std1').feature('bma').set('outputmap', {});
model.study('std1').feature('bma').set('ngenAUX', '1');
model.study('std1').feature('bma').set('goalngenAUX', '1');
model.study('std1').feature('bma').set('ngenAUX', '1');
model.study('std1').feature('bma').set('goalngenAUX', '1');
model.study('std1').feature('bma').setSolveFor('/physics/ewbe', true);
model.study('std1').create('freq', 'Frequency');
model.study('std1').feature('freq').set('solnum', 'auto');
model.study('std1').feature('freq').set('notsolnum', 'auto');
model.study('std1').feature('freq').set('outputmap', {});
model.study('std1').feature('freq').set('ngenAUX', '1');
model.study('std1').feature('freq').set('goalngenAUX', '1');
model.study('std1').feature('freq').set('ngenAUX', '1');
model.study('std1').feature('freq').set('goalngenAUX', '1');
model.study('std1').feature('freq').setSolveFor('/physics/ewbe', true);

model.param.label('General Parameters');

% To import content from file, use:
% model.param.loadFile('FILENAME');
model.param.set('lda0', '1.55[um]', 'Wavelength');
model.param.set('f0', 'c_const/lda0', 'Frequency');
model.param.set('n_clad', '2.2', 'Cladding refractive index');
model.param.set('n_core', '2.22', 'Core refractive index');
model.param.set('hx', 'lda0/(6*n_core)/(1-cos(alpha))', 'Maximum element size in x-direction');
model.param.set('hy', 'lda0/(6*n_core)/sin(alpha)', 'Maximum element size in y-direction');
model.param.set('r13', '30[pm/V]', 'Electro-optic coefficient');
model.param.set('V0', '100[V]', 'Applied voltage');
model.param.set('epsr', '35', 'Low-frequency relative permittivity');
model.param.create('par2');
model.param('par2').label('Geometry Parameters');

% To import content from file, use:
% model.param('par2').loadFile('FILENAME');
model.param('par2').set('w', '2[um]', 'Waveguide width');
model.param('par2').set('w_tot', '30[um]', 'Total waveguide width');
model.param('par2').set('d0', '2*lda0', 'Initial straight waveguide');
model.param('par2').set('dy_bend', '0.6*w_tot', 'Total displacement in y-direction at S-bend');
model.param('par2').set('r0', '100[um]', 'Bend radius');
model.param('par2').set('alpha', 'acos((r0-dy_bend/2)/r0)', 'Bend angle');
model.param('par2').set('dx_bend', '2*r0*sin(alpha)', 'Total length in the x-direction for S-bend');
model.param('par2').set('d_cpl', '90[um]', 'Length of straight directional coupler waveguides');
model.param('par2').set('d_dc', '2*dx_bend+d_cpl', 'Total length of directional coupler');
model.param('par2').set('d_mz', '100[um]', 'Length of Mach-Zehnder waveguides');
model.param('par2').set('dy_wg', '3[um]', 'Distance between directional coupler waveguides');
model.param('par2').set('d_cc', 'dy_wg+w', 'Directional coupler core center separation');
model.param('par2').set('d_pcc', '2*dy_bend+d_cc', 'Port core center separation');

model.geom.load({'part1'}, 'Wave_Optics_Module/Slab_Waveguides/slab_waveguide_s_bend_directional_coupler.mph', {'part1'});
model.geom('geom1').create('pi1', 'PartInstance');
model.geom('geom1').feature('pi1').set('selkeepnoncontr', false);
model.geom('geom1').feature('pi1').set('part', 'part1');
model.geom('geom1').feature('pi1').setEntry('inputexpr', 'core_width', 'w');
model.geom('geom1').feature('pi1').setEntry('inputexpr', 'cladding_width', 'w_tot');
model.geom('geom1').feature('pi1').setEntry('inputexpr', 'port_core_separation', 'd_pcc');
model.geom('geom1').feature('pi1').setEntry('inputexpr', 'coupler_core_separation', 'd_cc');
model.geom('geom1').feature('pi1').setEntry('inputexpr', 'coupler_length', 'd_cpl');
model.geom('geom1').feature('pi1').setEntry('inputexpr', 'element_length', 'd_dc');
model.geom('geom1').feature('pi1').set('rot', -90);
model.geom('geom1').runPre('fin');
model.geom('geom1').selection.create('csel1', 'CumulativeSelection');
model.geom('geom1').selection('csel1').label('Core');
model.geom('geom1').selection.create('csel2', 'CumulativeSelection');
model.geom('geom1').selection('csel2').label('Cladding');
model.geom('geom1').feature('pi1').setEntry('selkeepdom', 'pi1_csel1.dom', false);
model.geom('geom1').feature('pi1').setEntry('selcontributetodom', 'pi1_csel1.dom', 'csel1');
model.geom('geom1').feature('pi1').setEntry('selkeepdom', 'pi1_csel2.dom', false);
model.geom('geom1').feature('pi1').setEntry('selcontributetodom', 'pi1_csel2.dom', 'csel2');
model.geom('geom1').selection.create('csel3', 'CumulativeSelection');
model.geom('geom1').selection('csel3').label('Transverse Perimeter');
model.geom('geom1').feature('pi1').setEntry('selkeepbnd', 'pi1_difsel2', false);
model.geom('geom1').feature('pi1').setEntry('selcontributetobnd', 'pi1_difsel2', 'csel3');
model.geom.load({'part2'}, 'Wave_Optics_Module/Slab_Waveguides/slab_waveguide_straight.mph', {'part1'});
model.geom('geom1').run('pi1');
model.geom('geom1').create('pi2', 'PartInstance');
model.geom('geom1').feature('pi2').set('selkeepnoncontr', false);
model.geom('geom1').feature('pi2').set('part', 'part2');
model.geom('geom1').feature('pi2').setEntry('inputexpr', 'core_width', 'w');
model.geom('geom1').feature('pi2').setEntry('inputexpr', 'cladding_width', 'w_tot');
model.geom('geom1').feature('pi2').setEntry('inputexpr', 'element_length', 'd0');
model.geom('geom1').feature('pi2').set('displ', {'-d0' '0'});
model.geom('geom1').feature('pi2').set('rot', -90);
model.geom('geom1').runPre('fin');
model.geom('geom1').feature('pi2').setEntry('selkeepdom', 'pi2_sel1', false);
model.geom('geom1').feature('pi2').setEntry('selcontributetodom', 'pi2_sel1', 'csel1');
model.geom('geom1').feature('pi2').setEntry('selkeepdom', 'pi2_sel2', false);
model.geom('geom1').feature('pi2').setEntry('selcontributetodom', 'pi2_sel2', 'csel2');
model.geom('geom1').feature('pi2').setEntry('selkeepbnd', 'pi2_difsel1', false);
model.geom('geom1').feature('pi2').setEntry('selcontributetobnd', 'pi2_difsel1', 'csel3');
model.geom('geom1').feature.duplicate('pi3', 'pi2');
model.geom('geom1').feature('pi2').set('selcontributetoobj', {});
model.geom('geom1').feature('pi2').set('selkeepobj', {});
model.geom('geom1').feature('pi2').set('selcontributetopnt', {});
model.geom('geom1').feature('pi2').set('selkeeppnt', {});
model.geom('geom1').feature('pi2').set('selshowpnt', {});
model.geom('geom1').feature('pi2').set('selcontributetobnd', {'none' 'none' 'none' 'none' 'none' 'none' 'none' 'csel3'});
model.geom('geom1').feature('pi2').set('selkeepbnd', {'off' 'off' 'off' 'off' 'off' 'off' 'off' 'off'});
model.geom('geom1').feature('pi2').set('selshowbnd', {'on' 'on' 'on' 'on' 'on' 'on' 'on' 'on'});
model.geom('geom1').feature('pi2').set('selcontributetodom', {'csel1' 'csel2' 'none'});
model.geom('geom1').feature('pi2').set('selkeepdom', {'off' 'off' 'off'});
model.geom('geom1').feature('pi2').set('selshowdom', {'on' 'on' 'on'});
model.geom('geom1').feature('pi3').set('displ', {'-d0' '-d_pcc'});
model.geom('geom1').runPre('fin');
model.geom('geom1').feature.duplicate('pi4', 'pi2');
model.geom('geom1').feature('pi2').set('selcontributetoobj', {});
model.geom('geom1').feature('pi2').set('selkeepobj', {});
model.geom('geom1').feature('pi2').set('selcontributetopnt', {});
model.geom('geom1').feature('pi2').set('selkeeppnt', {});
model.geom('geom1').feature('pi2').set('selshowpnt', {});
model.geom('geom1').feature('pi2').set('selcontributetobnd', {'none' 'none' 'none' 'none' 'none' 'none' 'none' 'csel3'});
model.geom('geom1').feature('pi2').set('selkeepbnd', {'off' 'off' 'off' 'off' 'off' 'off' 'off' 'off'});
model.geom('geom1').feature('pi2').set('selshowbnd', {'on' 'on' 'on' 'on' 'on' 'on' 'on' 'on'});
model.geom('geom1').feature('pi2').set('selcontributetodom', {'csel1' 'csel2' 'none'});
model.geom('geom1').feature('pi2').set('selkeepdom', {'off' 'off' 'off'});
model.geom('geom1').feature('pi2').set('selshowdom', {'on' 'on' 'on'});
model.geom('geom1').feature('pi4').setEntry('inputexpr', 'element_length', 'd_mz');
model.geom('geom1').feature('pi4').set('displ', {'d_dc' '0'});
model.geom('geom1').runPre('fin');
model.geom('geom1').feature.duplicate('pi5', 'pi4');
model.geom('geom1').feature('pi4').set('selcontributetoobj', {});
model.geom('geom1').feature('pi4').set('selkeepobj', {});
model.geom('geom1').feature('pi4').set('selcontributetopnt', {});
model.geom('geom1').feature('pi4').set('selkeeppnt', {});
model.geom('geom1').feature('pi4').set('selshowpnt', {});
model.geom('geom1').feature('pi4').set('selcontributetobnd', {'none' 'none' 'none' 'none' 'none' 'none' 'none' 'csel3'});
model.geom('geom1').feature('pi4').set('selkeepbnd', {'off' 'off' 'off' 'off' 'off' 'off' 'off' 'off'});
model.geom('geom1').feature('pi4').set('selshowbnd', {'on' 'on' 'on' 'on' 'on' 'on' 'on' 'on'});
model.geom('geom1').feature('pi4').set('selcontributetodom', {'csel1' 'csel2' 'none'});
model.geom('geom1').feature('pi4').set('selkeepdom', {'off' 'off' 'off'});
model.geom('geom1').feature('pi4').set('selshowdom', {'on' 'on' 'on'});
model.geom('geom1').feature('pi5').set('displ', {'d_dc' '-d_pcc'});
model.geom('geom1').runPre('fin');
model.geom('geom1').feature.duplicate('pi6', 'pi1');
model.geom('geom1').feature('pi1').set('selcontributetoobj', {});
model.geom('geom1').feature('pi1').set('selkeepobj', {});
model.geom('geom1').feature('pi1').set('selcontributetopnt', {});
model.geom('geom1').feature('pi1').set('selkeeppnt', {});
model.geom('geom1').feature('pi1').set('selshowpnt', {});
model.geom('geom1').feature('pi1').set('selcontributetobnd', {'none' 'none' 'none' 'none' 'none' 'none' 'none' 'none' 'none' 'none'  ...
'none' 'none' 'none' 'csel3'});
model.geom('geom1').feature('pi1').set('selkeepbnd', {'off' 'off' 'off' 'off' 'off' 'off' 'off' 'off' 'off' 'off'  ...
'off' 'off' 'off' 'off'});
model.geom('geom1').feature('pi1').set('selshowbnd', {'on' 'on' 'on' 'on' 'on' 'on' 'on' 'on' 'on' 'on'  ...
'on' 'on' 'on' 'on'});
model.geom('geom1').feature('pi1').set('selcontributetodom', {'csel1' 'csel2' 'none'});
model.geom('geom1').feature('pi1').set('selkeepdom', {'off' 'off' 'off'});
model.geom('geom1').feature('pi1').set('selshowdom', {'on' 'on' 'on'});
model.geom('geom1').feature('pi6').set('displ', {'d_dc+d_mz' '0'});
model.geom('geom1').runPre('fin');
model.geom('geom1').feature.duplicate('pi7', 'pi2');
model.geom('geom1').feature('pi2').set('selcontributetoobj', {});
model.geom('geom1').feature('pi2').set('selkeepobj', {});
model.geom('geom1').feature('pi2').set('selcontributetopnt', {});
model.geom('geom1').feature('pi2').set('selkeeppnt', {});
model.geom('geom1').feature('pi2').set('selshowpnt', {});
model.geom('geom1').feature('pi2').set('selcontributetobnd', {'none' 'none' 'none' 'none' 'none' 'none' 'none' 'csel3'});
model.geom('geom1').feature('pi2').set('selkeepbnd', {'off' 'off' 'off' 'off' 'off' 'off' 'off' 'off'});
model.geom('geom1').feature('pi2').set('selshowbnd', {'on' 'on' 'on' 'on' 'on' 'on' 'on' 'on'});
model.geom('geom1').feature('pi2').set('selcontributetodom', {'csel1' 'csel2' 'none'});
model.geom('geom1').feature('pi2').set('selkeepdom', {'off' 'off' 'off'});
model.geom('geom1').feature('pi2').set('selshowdom', {'on' 'on' 'on'});
model.geom('geom1').feature('pi7').set('displ', {'2*d_dc+d_mz' '0'});
model.geom('geom1').runPre('fin');
model.geom('geom1').feature.duplicate('pi8', 'pi7');
model.geom('geom1').feature('pi7').set('selcontributetoobj', {});
model.geom('geom1').feature('pi7').set('selkeepobj', {});
model.geom('geom1').feature('pi7').set('selcontributetopnt', {});
model.geom('geom1').feature('pi7').set('selkeeppnt', {});
model.geom('geom1').feature('pi7').set('selshowpnt', {});
model.geom('geom1').feature('pi7').set('selcontributetobnd', {'none' 'none' 'none' 'none' 'none' 'none' 'none' 'csel3'});
model.geom('geom1').feature('pi7').set('selkeepbnd', {'off' 'off' 'off' 'off' 'off' 'off' 'off' 'off'});
model.geom('geom1').feature('pi7').set('selshowbnd', {'on' 'on' 'on' 'on' 'on' 'on' 'on' 'on'});
model.geom('geom1').feature('pi7').set('selcontributetodom', {'csel1' 'csel2' 'none'});
model.geom('geom1').feature('pi7').set('selkeepdom', {'off' 'off' 'off'});
model.geom('geom1').feature('pi7').set('selshowdom', {'on' 'on' 'on'});
model.geom('geom1').feature('pi8').setIndex('displ', '-d_pcc', 1);
model.geom('geom1').runPre('fin');
model.geom('geom1').selection.create('csel4', 'CumulativeSelection');
model.geom('geom1').selection('csel4').label('Port 1');
model.geom('geom1').feature('pi3').setEntry('selkeepbnd', 'pi3_unisel2', false);
model.geom('geom1').feature('pi3').setEntry('selcontributetobnd', 'pi3_unisel2', 'csel4');
model.geom('geom1').selection.create('csel5', 'CumulativeSelection');
model.geom('geom1').selection('csel5').label('Port 2');
model.geom('geom1').feature('pi7').setEntry('selkeepbnd', 'pi7_unisel3', false);
model.geom('geom1').feature('pi7').setEntry('selcontributetobnd', 'pi7_unisel3', 'csel5');
model.geom('geom1').selection.create('csel6', 'CumulativeSelection');
model.geom('geom1').selection('csel6').label('Port 3');
model.geom('geom1').feature('pi2').setEntry('selkeepbnd', 'pi2_unisel2', false);
model.geom('geom1').feature('pi2').setEntry('selcontributetobnd', 'pi2_unisel2', 'csel6');
model.geom('geom1').selection.create('csel7', 'CumulativeSelection');
model.geom('geom1').selection('csel7').label('Port 4');
model.geom('geom1').feature('pi8').setEntry('selkeepbnd', 'pi8_unisel3', false);
model.geom('geom1').feature('pi8').setEntry('selcontributetobnd', 'pi8_unisel3', 'csel7');
model.geom('geom1').selection.create('csel8', 'CumulativeSelection');
model.geom('geom1').selection('csel8').label('End of Upper Mach-Zehnder Waveguide');
model.geom('geom1').feature('pi4').setEntry('selkeepbnd', 'pi4_unisel3', false);
model.geom('geom1').feature('pi4').setEntry('selcontributetobnd', 'pi4_unisel3', 'csel8');
model.geom('geom1').selection.create('csel9', 'CumulativeSelection');
model.geom('geom1').selection('csel9').label('End of Lower Mach-Zehnder Waveguide');
model.geom('geom1').feature('pi5').setEntry('selkeepbnd', 'pi5_unisel3', false);
model.geom('geom1').feature('pi5').setEntry('selcontributetobnd', 'pi5_unisel3', 'csel9');
model.geom('geom1').create('unisel1', 'UnionSelection');
model.geom('geom1').feature('unisel1').label('Edge Mesh');
model.geom('geom1').feature('unisel1').set('entitydim', 1);
model.geom('geom1').feature('unisel1').set('input', {'csel4' 'csel6'});
model.geom('geom1').run;

model.material.create('mat1', 'Common', 'comp1');
model.material('mat1').label('Cladding');
model.material('mat1').propertyGroup.create('RefractiveIndex', 'Refractive_index');
model.material('mat1').propertyGroup('RefractiveIndex').set('n', {'n_clad'});
model.material.create('mat2', 'Common', 'comp1');
model.material('mat2').label('Core');
model.material('mat2').selection.named('geom1_csel1_dom');
model.material('mat2').propertyGroup.create('RefractiveIndex', 'Refractive_index');
model.material('mat2').propertyGroup('RefractiveIndex').set('n', {'n_core'});

model.physics('ewbe').prop('components').set('components', 'outofplane');
model.physics('ewbe').prop('WaveVector').set('dirCount', 'UniDirectionality');
model.physics('ewbe').prop('WaveVector').set('k1', {'ewbe.beta_1' '0' '0'});
model.physics('ewbe').create('port1', 'Port', 1);
model.physics('ewbe').feature('port1').selection.named('geom1_csel4_bnd');
model.physics('ewbe').feature('port1').set('PortType', 'Numeric');
model.physics('ewbe').create('port2', 'Port', 1);
model.physics('ewbe').feature('port2').selection.named('geom1_csel5_bnd');
model.physics('ewbe').feature('port2').set('PortType', 'Numeric');
model.physics('ewbe').create('port3', 'Port', 1);
model.physics('ewbe').feature('port3').selection.named('geom1_csel6_bnd');
model.physics('ewbe').feature('port3').set('PortType', 'Numeric');
model.physics('ewbe').create('port4', 'Port', 1);
model.physics('ewbe').feature('port4').selection.named('geom1_csel7_bnd');
model.physics('ewbe').feature('port4').set('PortType', 'Numeric');
model.physics('ewbe').create('sctr1', 'Scattering', 1);
model.physics('ewbe').feature('sctr1').selection.named('geom1_csel3_bnd');

model.mesh('mesh1').contribute('physics/ewbe', false);
model.mesh('mesh1').automatic(false);
model.mesh('mesh1').feature.remove('ftri1');
model.mesh('mesh1').create('edg1', 'Edge');
model.mesh('mesh1').feature('edg1').selection.named('geom1_unisel1');
model.mesh('mesh1').feature('edg1').create('size1', 'Size');
model.mesh('mesh1').feature('edg1').feature('size1').set('custom', true);
model.mesh('mesh1').feature('edg1').feature('size1').set('hmaxactive', true);
model.mesh('mesh1').feature('edg1').feature('size1').set('hmax', 'hy');
model.mesh('mesh1').feature('edg1').create('size2', 'Size');
model.mesh('mesh1').feature('edg1').feature('size2').selection.set([3 10]);
model.mesh('mesh1').feature('edg1').feature('size2').set('custom', true);
model.mesh('mesh1').feature('edg1').feature('size2').set('hmaxactive', true);
model.mesh('mesh1').feature('edg1').feature('size2').set('hmax', 'min(hy,w/4)');
model.mesh('mesh1').create('map1', 'Map');
model.mesh('mesh1').feature('map1').set('adjustedgdistr', true);
model.mesh('mesh1').feature('map1').create('size1', 'Size');
model.mesh('mesh1').feature('map1').feature('size1').set('custom', true);
model.mesh('mesh1').feature('map1').feature('size1').set('hmaxactive', true);
model.mesh('mesh1').feature('map1').feature('size1').set('hmax', 'hx');
model.mesh('mesh1').run;

model.study('std1').feature('bma').set('modeFreq', 'f0');
model.study('std1').feature('bma').set('shiftactive', true);
model.study('std1').feature('bma').set('shift', 'n_core');
model.study('std1').feature.duplicate('bma1', 'bma');
model.study('std1').feature('bma1').set('PortName', '2');
model.study('std1').feature.duplicate('bma2', 'bma1');
model.study('std1').feature('bma2').set('PortName', '3');
model.study('std1').feature.duplicate('bma3', 'bma2');
model.study('std1').feature('bma3').set('PortName', '4');
model.study('std1').feature('freq').set('plist', 'f0');
model.study('std1').feature.move('freq', 2);
model.study('std1').feature.move('freq', 3);
model.study('std1').feature.move('freq', 4);

model.sol.create('sol1');
model.sol('sol1').study('std1');
model.sol('sol1').create('st1', 'StudyStep');
model.sol('sol1').feature('st1').set('study', 'std1');
model.sol('sol1').feature('st1').set('studystep', 'bma');
model.sol('sol1').create('v1', 'Variables');
model.sol('sol1').feature('v1').set('control', 'bma');
model.sol('sol1').create('e1', 'Eigenvalue');
model.sol('sol1').feature('e1').set('neigs', 1);
model.sol('sol1').feature('e1').set('shift', '1');
model.sol('sol1').feature('e1').set('eigref', 'n_core');
model.sol('sol1').feature('e1').set('control', 'bma');
model.sol('sol1').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su1', 'StoreSolution');
model.sol('sol1').create('st2', 'StudyStep');
model.sol('sol1').feature('st2').set('study', 'std1');
model.sol('sol1').feature('st2').set('studystep', 'bma1');
model.sol('sol1').create('v2', 'Variables');
model.sol('sol1').feature('v2').set('initmethod', 'sol');
model.sol('sol1').feature('v2').set('initsol', 'sol1');
model.sol('sol1').feature('v2').set('notsolmethod', 'sol');
model.sol('sol1').feature('v2').set('notsol', 'sol1');
model.sol('sol1').feature('v2').set('control', 'bma1');
model.sol('sol1').create('e2', 'Eigenvalue');
model.sol('sol1').feature('e2').set('neigs', 1);
model.sol('sol1').feature('e2').set('shift', '1');
model.sol('sol1').feature('e2').set('eigref', 'n_core');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').set('linpmethod', 'sol');
model.sol('sol1').feature('e2').set('linpsol', 'sol1');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su2', 'StoreSolution');
model.sol('sol1').create('st3', 'StudyStep');
model.sol('sol1').feature('st3').set('study', 'std1');
model.sol('sol1').feature('st3').set('studystep', 'bma2');
model.sol('sol1').create('v3', 'Variables');
model.sol('sol1').feature('v3').set('initmethod', 'sol');
model.sol('sol1').feature('v3').set('initsol', 'sol1');
model.sol('sol1').feature('v3').set('notsolmethod', 'sol');
model.sol('sol1').feature('v3').set('notsol', 'sol1');
model.sol('sol1').feature('v3').set('control', 'bma2');
model.sol('sol1').create('e3', 'Eigenvalue');
model.sol('sol1').feature('e3').set('neigs', 1);
model.sol('sol1').feature('e3').set('shift', '1');
model.sol('sol1').feature('e3').set('eigref', 'n_core');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').set('linpmethod', 'sol');
model.sol('sol1').feature('e3').set('linpsol', 'sol1');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su3', 'StoreSolution');
model.sol('sol1').create('st4', 'StudyStep');
model.sol('sol1').feature('st4').set('study', 'std1');
model.sol('sol1').feature('st4').set('studystep', 'bma3');
model.sol('sol1').create('v4', 'Variables');
model.sol('sol1').feature('v4').set('initmethod', 'sol');
model.sol('sol1').feature('v4').set('initsol', 'sol1');
model.sol('sol1').feature('v4').set('notsolmethod', 'sol');
model.sol('sol1').feature('v4').set('notsol', 'sol1');
model.sol('sol1').feature('v4').set('control', 'bma3');
model.sol('sol1').create('e4', 'Eigenvalue');
model.sol('sol1').feature('e4').set('neigs', 1);
model.sol('sol1').feature('e4').set('shift', '1');
model.sol('sol1').feature('e4').set('eigref', 'n_core');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').set('linpmethod', 'sol');
model.sol('sol1').feature('e4').set('linpsol', 'sol1');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su4', 'StoreSolution');
model.sol('sol1').create('st5', 'StudyStep');
model.sol('sol1').feature('st5').set('study', 'std1');
model.sol('sol1').feature('st5').set('studystep', 'freq');
model.sol('sol1').create('v5', 'Variables');
model.sol('sol1').feature('v5').set('initmethod', 'sol');
model.sol('sol1').feature('v5').set('initsol', 'sol1');
model.sol('sol1').feature('v5').set('notsolmethod', 'sol');
model.sol('sol1').feature('v5').set('notsol', 'sol1');
model.sol('sol1').feature('v5').set('control', 'freq');
model.sol('sol1').create('s1', 'Stationary');
model.sol('sol1').feature('s1').create('p1', 'Parametric');
model.sol('sol1').feature('s1').feature.remove('pDef');
model.sol('sol1').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol1').feature('s1').feature('p1').set('plistarr', {'f0'});
model.sol('sol1').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol1').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol1').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol1').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plotgroup', 'Default');
model.sol('sol1').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol1').feature('s1').feature('p1').set('probes', {});
model.sol('sol1').feature('s1').feature('p1').set('control', 'freq');
model.sol('sol1').feature('s1').set('linpmethod', 'sol');
model.sol('sol1').feature('s1').set('linpsol', 'zero');
model.sol('sol1').feature('s1').set('control', 'freq');
model.sol('sol1').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol1').feature('s1').feature.remove('fcDef');
model.sol('sol1').feature('v5').set('notsolnum', 'auto');
model.sol('sol1').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v5').set('solnum', 'auto');
model.sol('sol1').feature('v5').set('solvertype', 'solnum');
model.sol('sol1').feature('e4').set('linpsolnum', 'auto');
model.sol('sol1').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('notsolnum', 'auto');
model.sol('sol1').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('solnum', 'auto');
model.sol('sol1').feature('v4').set('solvertype', 'solnum');
model.sol('sol1').feature('e3').set('linpsolnum', 'auto');
model.sol('sol1').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('notsolnum', 'auto');
model.sol('sol1').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('solnum', 'auto');
model.sol('sol1').feature('v3').set('solvertype', 'solnum');
model.sol('sol1').feature('e2').set('linpsolnum', 'auto');
model.sol('sol1').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('notsolnum', 'auto');
model.sol('sol1').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('solnum', 'auto');
model.sol('sol1').feature('v2').set('solvertype', 'solnum');
model.sol('sol1').attach('std1');
model.sol('sol1').runAll;

model.result.create('pg1', 'PlotGroup2D');
model.result('pg1').label('Electric Field (ewbe)');
model.result('pg1').set('data', 'dset1');
model.result('pg1').setIndex('looplevel', 1, 0);
model.result('pg1').set('defaultPlotID', 'ElectromagneticWavesBeamEnvelopes/phys1/pdef1/pcond2/pg1');
model.result('pg1').feature.create('surf1', 'Surface');
model.result('pg1').feature('surf1').label('Electric Field');
model.result('pg1').feature('surf1').set('smooth', 'internal');
model.result('pg1').feature('surf1').set('data', 'parent');
model.result.numerical.create('gev1', 'EvalGlobal');
model.result.numerical('gev1').label('Reflectance, Transmittance, and Absorptance (ewbe)');
model.result.numerical('gev1').set('data', 'dset1');
model.result.numerical('gev1').set('expr', {'ewbe.Rport_1' 'ewbe.Rtotal' 'ewbe.Tport_2' 'ewbe.Tport_3' 'ewbe.Tport_4' 'ewbe.Ttotal' 'ewbe.RTtotal' 'ewbe.Atotal'});
model.result.table.create('tbl1', 'Table');
model.result.numerical('gev1').set('table', 'tbl1');
model.result.numerical('gev1').run;
model.result.numerical('gev1').setResult;
model.result.create('pg2', 'PlotGroup1D');
model.result('pg2').label('Electric Mode Field, Port 1 (ewbe)');
model.result('pg2').set('showlegendsmaxmin', true);
model.result('pg2').set('data', 'dset1');
model.result('pg2').create('lngr1', 'LineGraph');
model.result('pg2').feature('lngr1').selection.set([1 3 5]);
model.result('pg2').feature('lngr1').set('expr', 'root.comp1.ewbe.normEbm_1');
model.result('pg2').feature('lngr1').set('legend', true);
model.result('pg2').feature('lngr1').set('legendmethod', 'evaluated');
model.result('pg2').feature('lngr1').set('legendpattern', 'Effective mode index: eval(comp1.ewbe.neff_1)');
model.result('pg2').feature('lngr1').set('legendexprprecision', 5);
model.result.create('pg3', 'PlotGroup1D');
model.result('pg3').label('Electric Mode Field, Port 2 (ewbe)');
model.result('pg3').set('showlegendsmaxmin', true);
model.result('pg3').set('data', 'dset1');
model.result('pg3').create('lngr1', 'LineGraph');
model.result('pg3').feature('lngr1').selection.set([152 153 154]);
model.result('pg3').feature('lngr1').set('expr', 'root.comp1.ewbe.normEbm_2');
model.result('pg3').feature('lngr1').set('legend', true);
model.result('pg3').feature('lngr1').set('legendmethod', 'evaluated');
model.result('pg3').feature('lngr1').set('legendpattern', 'Effective mode index: eval(comp1.ewbe.neff_2)');
model.result('pg3').feature('lngr1').set('legendexprprecision', 5);
model.result.create('pg4', 'PlotGroup1D');
model.result('pg4').label('Electric Mode Field, Port 3 (ewbe)');
model.result('pg4').set('showlegendsmaxmin', true);
model.result('pg4').set('data', 'dset1');
model.result('pg4').create('lngr1', 'LineGraph');
model.result('pg4').feature('lngr1').selection.set([8 10 12]);
model.result('pg4').feature('lngr1').set('expr', 'root.comp1.ewbe.normEbm_3');
model.result('pg4').feature('lngr1').set('legend', true);
model.result('pg4').feature('lngr1').set('legendmethod', 'evaluated');
model.result('pg4').feature('lngr1').set('legendpattern', 'Effective mode index: eval(comp1.ewbe.neff_3)');
model.result('pg4').feature('lngr1').set('legendexprprecision', 5);
model.result.create('pg5', 'PlotGroup1D');
model.result('pg5').label('Electric Mode Field, Port 4 (ewbe)');
model.result('pg5').set('showlegendsmaxmin', true);
model.result('pg5').set('data', 'dset1');
model.result('pg5').create('lngr1', 'LineGraph');
model.result('pg5').feature('lngr1').selection.set([149 150 151]);
model.result('pg5').feature('lngr1').set('expr', 'root.comp1.ewbe.normEbm_4');
model.result('pg5').feature('lngr1').set('legend', true);
model.result('pg5').feature('lngr1').set('legendmethod', 'evaluated');
model.result('pg5').feature('lngr1').set('legendpattern', 'Effective mode index: eval(comp1.ewbe.neff_4)');
model.result('pg5').feature('lngr1').set('legendexprprecision', 5);
model.result('pg1').run;
model.result('pg2').run;
model.result('pg1').run;

model.study('std1').create('param', 'Parametric');
model.study('std1').feature('param').setIndex('pname', 'alpha', 0);
model.study('std1').feature('param').setIndex('plistarr', '', 0);
model.study('std1').feature('param').setIndex('punit', 'rad', 0);
model.study('std1').feature('param').setIndex('pname', 'alpha', 0);
model.study('std1').feature('param').setIndex('plistarr', '', 0);
model.study('std1').feature('param').setIndex('punit', 'rad', 0);
model.study('std1').feature('param').setIndex('pname', 'r0', 0);
model.study('std1').feature('param').setIndex('plistarr', 'range(0.1[mm],0.4[mm],2.5[mm])', 0);
model.study('std1').feature('param').setIndex('punit', 'mm', 0);

model.sol('sol1').study('std1');
model.sol('sol2').copySolution('sol6');
model.sol('sol3').copySolution('sol7');
model.sol('sol4').copySolution('sol8');
model.sol('sol5').copySolution('sol9');

model.result.dataset('dset4').set('solution', 'none');
model.result.dataset('dset3').set('solution', 'none');
model.result.dataset('dset5').set('solution', 'none');
model.result.dataset('dset2').set('solution', 'none');

model.sol('sol1').feature.remove('s1');
model.sol('sol1').feature.remove('v5');
model.sol('sol1').feature.remove('st5');
model.sol('sol1').feature.remove('su4');
model.sol('sol1').feature.remove('e4');
model.sol('sol1').feature.remove('v4');
model.sol('sol1').feature.remove('st4');
model.sol('sol1').feature.remove('su3');
model.sol('sol1').feature.remove('e3');
model.sol('sol1').feature.remove('v3');
model.sol('sol1').feature.remove('st3');
model.sol('sol1').feature.remove('su2');
model.sol('sol1').feature.remove('e2');
model.sol('sol1').feature.remove('v2');
model.sol('sol1').feature.remove('st2');
model.sol('sol1').feature.remove('su1');
model.sol('sol1').feature.remove('e1');
model.sol('sol1').feature.remove('v1');
model.sol('sol1').feature.remove('st1');
model.sol('sol8').copySolution('sol4');
model.sol.remove('sol8');
model.sol('sol4').label('Solution Store 3');

model.result.dataset.remove('dset10');

model.sol('sol7').copySolution('sol3');
model.sol.remove('sol7');
model.sol('sol3').label('Solution Store 2');

model.result.dataset.remove('dset10');

model.sol('sol9').copySolution('sol5');
model.sol.remove('sol9');
model.sol('sol5').label('Solution Store 4');

model.result.dataset.remove('dset10');

model.sol('sol6').copySolution('sol2');
model.sol.remove('sol6');
model.sol('sol2').label('Solution Store 1');

model.result.dataset.remove('dset7');

model.sol('sol1').create('st1', 'StudyStep');
model.sol('sol1').feature('st1').set('study', 'std1');
model.sol('sol1').feature('st1').set('studystep', 'bma');
model.sol('sol1').create('v1', 'Variables');
model.sol('sol1').feature('v1').set('control', 'bma');
model.sol('sol1').create('e1', 'Eigenvalue');
model.sol('sol1').feature('e1').set('neigs', 1);
model.sol('sol1').feature('e1').set('shift', '1');
model.sol('sol1').feature('e1').set('eigref', 'n_core');
model.sol('sol1').feature('e1').set('control', 'bma');
model.sol('sol1').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su1', 'StoreSolution');
model.sol('sol1').feature('su1').set('sol', 'sol2');
model.sol('sol1').feature('su1').label('Solution Store 1');
model.sol('sol1').create('st2', 'StudyStep');
model.sol('sol1').feature('st2').set('study', 'std1');
model.sol('sol1').feature('st2').set('studystep', 'bma1');
model.sol('sol1').create('v2', 'Variables');
model.sol('sol1').feature('v2').set('initmethod', 'sol');
model.sol('sol1').feature('v2').set('initsol', 'sol1');
model.sol('sol1').feature('v2').set('notsolmethod', 'sol');
model.sol('sol1').feature('v2').set('notsol', 'sol1');
model.sol('sol1').feature('v2').set('control', 'bma1');
model.sol('sol1').create('e2', 'Eigenvalue');
model.sol('sol1').feature('e2').set('neigs', 1);
model.sol('sol1').feature('e2').set('shift', '1');
model.sol('sol1').feature('e2').set('eigref', 'n_core');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').set('linpmethod', 'sol');
model.sol('sol1').feature('e2').set('linpsol', 'sol1');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su2', 'StoreSolution');
model.sol('sol1').feature('su2').set('sol', 'sol3');
model.sol('sol1').feature('su2').label('Solution Store 2');
model.sol('sol1').create('st3', 'StudyStep');
model.sol('sol1').feature('st3').set('study', 'std1');
model.sol('sol1').feature('st3').set('studystep', 'bma2');
model.sol('sol1').create('v3', 'Variables');
model.sol('sol1').feature('v3').set('initmethod', 'sol');
model.sol('sol1').feature('v3').set('initsol', 'sol1');
model.sol('sol1').feature('v3').set('notsolmethod', 'sol');
model.sol('sol1').feature('v3').set('notsol', 'sol1');
model.sol('sol1').feature('v3').set('control', 'bma2');
model.sol('sol1').create('e3', 'Eigenvalue');
model.sol('sol1').feature('e3').set('neigs', 1);
model.sol('sol1').feature('e3').set('shift', '1');
model.sol('sol1').feature('e3').set('eigref', 'n_core');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').set('linpmethod', 'sol');
model.sol('sol1').feature('e3').set('linpsol', 'sol1');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su3', 'StoreSolution');
model.sol('sol1').feature('su3').set('sol', 'sol4');
model.sol('sol1').feature('su3').label('Solution Store 3');
model.sol('sol1').create('st4', 'StudyStep');
model.sol('sol1').feature('st4').set('study', 'std1');
model.sol('sol1').feature('st4').set('studystep', 'bma3');
model.sol('sol1').create('v4', 'Variables');
model.sol('sol1').feature('v4').set('initmethod', 'sol');
model.sol('sol1').feature('v4').set('initsol', 'sol1');
model.sol('sol1').feature('v4').set('notsolmethod', 'sol');
model.sol('sol1').feature('v4').set('notsol', 'sol1');
model.sol('sol1').feature('v4').set('control', 'bma3');
model.sol('sol1').create('e4', 'Eigenvalue');
model.sol('sol1').feature('e4').set('neigs', 1);
model.sol('sol1').feature('e4').set('shift', '1');
model.sol('sol1').feature('e4').set('eigref', 'n_core');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').set('linpmethod', 'sol');
model.sol('sol1').feature('e4').set('linpsol', 'sol1');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su4', 'StoreSolution');
model.sol('sol1').feature('su4').set('sol', 'sol5');
model.sol('sol1').feature('su4').label('Solution Store 4');
model.sol('sol1').create('st5', 'StudyStep');
model.sol('sol1').feature('st5').set('study', 'std1');
model.sol('sol1').feature('st5').set('studystep', 'freq');
model.sol('sol1').create('v5', 'Variables');
model.sol('sol1').feature('v5').set('initmethod', 'sol');
model.sol('sol1').feature('v5').set('initsol', 'sol1');
model.sol('sol1').feature('v5').set('notsolmethod', 'sol');
model.sol('sol1').feature('v5').set('notsol', 'sol1');
model.sol('sol1').feature('v5').set('control', 'freq');
model.sol('sol1').create('s1', 'Stationary');
model.sol('sol1').feature('s1').create('p1', 'Parametric');
model.sol('sol1').feature('s1').feature.remove('pDef');
model.sol('sol1').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol1').feature('s1').feature('p1').set('plistarr', {'f0'});
model.sol('sol1').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol1').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol1').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol1').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plotgroup', 'pg1');
model.sol('sol1').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol1').feature('s1').feature('p1').set('probes', {});
model.sol('sol1').feature('s1').feature('p1').set('control', 'freq');
model.sol('sol1').feature('s1').set('linpmethod', 'sol');
model.sol('sol1').feature('s1').set('linpsol', 'zero');
model.sol('sol1').feature('s1').set('control', 'freq');
model.sol('sol1').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol1').feature('s1').feature.remove('fcDef');

model.result.dataset('dset5').set('solution', 'sol5');
model.result.dataset('dset4').set('solution', 'sol4');
model.result.dataset('dset3').set('solution', 'sol3');
model.result.dataset('dset2').set('solution', 'sol2');

model.sol('sol1').feature('v5').set('notsolnum', 'auto');
model.sol('sol1').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v5').set('solnum', 'auto');
model.sol('sol1').feature('v5').set('solvertype', 'solnum');
model.sol('sol1').feature('e4').set('linpsolnum', 'auto');
model.sol('sol1').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('notsolnum', 'auto');
model.sol('sol1').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('solnum', 'auto');
model.sol('sol1').feature('v4').set('solvertype', 'solnum');
model.sol('sol1').feature('e3').set('linpsolnum', 'auto');
model.sol('sol1').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('notsolnum', 'auto');
model.sol('sol1').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('solnum', 'auto');
model.sol('sol1').feature('v3').set('solvertype', 'solnum');
model.sol('sol1').feature('e2').set('linpsolnum', 'auto');
model.sol('sol1').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('notsolnum', 'auto');
model.sol('sol1').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('solnum', 'auto');
model.sol('sol1').feature('v2').set('solvertype', 'solnum');
model.sol('sol1').attach('std1');

model.batch.create('p1', 'Parametric');
model.batch('p1').study('std1');
model.batch('p1').create('so1', 'Solutionseq');
model.batch('p1').feature('so1').set('seq', 'sol1');
model.batch('p1').feature('so1').set('store', 'on');
model.batch('p1').feature('so1').set('clear', 'on');
model.batch('p1').feature('so1').set('psol', 'none');
model.batch('p1').set('pname', {'r0'});
model.batch('p1').set('plistarr', {'range(0.1[mm],0.4[mm],2.5[mm])'});
model.batch('p1').set('sweeptype', 'sparse');
model.batch('p1').set('probesel', 'all');
model.batch('p1').set('probes', {});
model.batch('p1').set('plot', 'off');
model.batch('p1').set('err', 'on');
model.batch('p1').attach('std1');
model.batch('p1').set('control', 'param');

model.sol.create('sol6');
model.sol('sol6').study('std1');
model.sol('sol6').label('Parametric Solutions 1');

model.batch('p1').feature('so1').set('psol', 'sol6');
model.batch('p1').run('compute');

model.result.create('pg6', 'PlotGroup2D');
model.result('pg6').label('Electric Field (ewbe) 1');
model.result('pg6').set('data', 'dset6');
model.result('pg6').setIndex('looplevel', 1, 0);
model.result('pg6').setIndex('looplevel', 7, 1);
model.result('pg6').set('data', 'dset6');
model.result('pg6').setIndex('looplevel', 1, 0);
model.result('pg6').setIndex('looplevel', 7, 1);
model.result('pg6').set('defaultPlotID', 'ElectromagneticWavesBeamEnvelopes/phys1/pdef1/pcond2/pg1');
model.result('pg6').feature.create('surf1', 'Surface');
model.result('pg6').feature('surf1').label('Electric Field');
model.result('pg6').feature('surf1').set('smooth', 'internal');
model.result('pg6').feature('surf1').set('data', 'parent');
model.result.create('pg7', 'PlotGroup1D');
model.result('pg7').set('data', 'dset6');
model.result('pg7').create('glob1', 'Global');
model.result('pg7').feature('glob1').set('unit', {'' '' '' '' '' '' ''});
model.result('pg7').feature('glob1').set('expr', {'ewbe.Rport_1' 'ewbe.Tport_2' 'ewbe.Tport_3' 'ewbe.Tport_4' 'ewbe.Ttotal' 'ewbe.RTtotal' 'ewbe.Atotal'});
model.result('pg7').feature('glob1').set('descr', {'Reflectance, port 1' 'Transmittance, port 2' 'Transmittance, port 3' 'Transmittance, port 4' 'Total transmittance' 'Total reflectance and transmittance' 'Absorptance'});
model.result('pg7').label('Reflectance, Transmittance, and Absorptance (ewbe)');
model.result('pg7').feature('glob1').set('titletype', 'none');
model.result('pg7').feature('glob1').set('xdata', 'expr');
model.result('pg7').set('ylabelactive', true);
model.result('pg7').set('ylabel', 'Reflectance, transmittance, and absorptance (1)');
model.result('pg7').feature('glob1').set('xdataexpr', 'r0');
model.result('pg7').feature('glob1').set('xdataunit', 'mm');
model.result('pg7').feature('glob1').set('markerpos', 'datapoints');
model.result('pg7').feature('glob1').set('xdatasolnumtype', 'all');
model.result.create('pg8', 'PlotGroup1D');
model.result('pg8').label('Electric Mode Field, Port 1 (ewbe) 1');
model.result('pg8').set('showlegendsmaxmin', true);
model.result('pg8').set('data', 'dset6');
model.result('pg8').create('lngr1', 'LineGraph');
model.result('pg8').feature('lngr1').selection.set([1 3 5]);
model.result('pg8').feature('lngr1').set('expr', 'root.comp1.ewbe.normEbm_1');
model.result('pg8').feature('lngr1').set('legend', true);
model.result('pg8').feature('lngr1').set('legendmethod', 'evaluated');
model.result('pg8').feature('lngr1').set('legendpattern', 'Effective mode index: eval(comp1.ewbe.neff_1)');
model.result('pg8').feature('lngr1').set('legendexprprecision', 5);
model.result.create('pg9', 'PlotGroup1D');
model.result('pg9').label('Electric Mode Field, Port 2 (ewbe) 1');
model.result('pg9').set('showlegendsmaxmin', true);
model.result('pg9').set('data', 'dset6');
model.result('pg9').create('lngr1', 'LineGraph');
model.result('pg9').feature('lngr1').selection.set([152 153 154]);
model.result('pg9').feature('lngr1').set('expr', 'root.comp1.ewbe.normEbm_2');
model.result('pg9').feature('lngr1').set('legend', true);
model.result('pg9').feature('lngr1').set('legendmethod', 'evaluated');
model.result('pg9').feature('lngr1').set('legendpattern', 'Effective mode index: eval(comp1.ewbe.neff_2)');
model.result('pg9').feature('lngr1').set('legendexprprecision', 5);
model.result.create('pg10', 'PlotGroup1D');
model.result('pg10').label('Electric Mode Field, Port 3 (ewbe) 1');
model.result('pg10').set('showlegendsmaxmin', true);
model.result('pg10').set('data', 'dset6');
model.result('pg10').create('lngr1', 'LineGraph');
model.result('pg10').feature('lngr1').selection.set([8 10 12]);
model.result('pg10').feature('lngr1').set('expr', 'root.comp1.ewbe.normEbm_3');
model.result('pg10').feature('lngr1').set('legend', true);
model.result('pg10').feature('lngr1').set('legendmethod', 'evaluated');
model.result('pg10').feature('lngr1').set('legendpattern', 'Effective mode index: eval(comp1.ewbe.neff_3)');
model.result('pg10').feature('lngr1').set('legendexprprecision', 5);
model.result.create('pg11', 'PlotGroup1D');
model.result('pg11').label('Electric Mode Field, Port 4 (ewbe) 1');
model.result('pg11').set('showlegendsmaxmin', true);
model.result('pg11').set('data', 'dset6');
model.result('pg11').create('lngr1', 'LineGraph');
model.result('pg11').feature('lngr1').selection.set([149 150 151]);
model.result('pg11').feature('lngr1').set('expr', 'root.comp1.ewbe.normEbm_4');
model.result('pg11').feature('lngr1').set('legend', true);
model.result('pg11').feature('lngr1').set('legendmethod', 'evaluated');
model.result('pg11').feature('lngr1').set('legendpattern', 'Effective mode index: eval(comp1.ewbe.neff_4)');
model.result('pg11').feature('lngr1').set('legendexprprecision', 5);
model.result('pg6').run;
model.result('pg7').run;
model.result('pg7').label('Reflectance, Transmittance, and Loss (ewbe)');
model.result('pg7').set('ylabel', 'Reflectance, transmittance, and loss (1)');
model.result('pg7').run;
model.result('pg7').feature('glob1').setIndex('descr', 'Loss', 6);
model.result('pg7').feature('glob1').set('linestyle', 'cycle');
model.result('pg7').feature('glob1').set('linemarker', 'cycle');
model.result('pg7').run;
model.result('pg7').set('legendpos', 'middleleft');
model.result('pg6').run;
model.result('pg6').run;

model.param('par2').set('r0', '100[um]', 'Bend radius');
model.param('par2').set('r0', '2.5[mm]');
model.param('par2').descr('r0', 'Bend radius');

model.cpl.create('intop1', 'Integration', 'geom1');
model.cpl('intop1').set('axisym', true);
model.cpl('intop1').selection.geom('geom1', 1);
model.cpl('intop1').selection.named('geom1_csel8_bnd');
model.cpl.duplicate('intop2', 'intop1');
model.cpl('intop2').selection.named('geom1_csel9_bnd');

model.variable.create('var1');
model.variable('var1').model('comp1');
model.variable('var1').set('P1', 'intop1(ewbe.nPoav)');
model.variable('var1').descr('P1', 'Power in upper waveguide');
model.variable('var1').set('P2', 'intop2(ewbe.nPoav)');
model.variable('var1').descr('P2', 'Power in lower waveguide');

model.study('std1').feature('param').setIndex('pname', 'd_cpl', 0);
model.study('std1').feature('param').setIndex('plistarr', 'range(80[um],50[um],430[um])', 0);

model.sol('sol1').study('std1');
model.sol('sol2').copySolution('sol14');
model.sol('sol3').copySolution('sol15');
model.sol('sol4').copySolution('sol16');
model.sol('sol5').copySolution('sol17');

model.result.dataset('dset4').set('solution', 'none');
model.result.dataset('dset3').set('solution', 'none');
model.result.dataset('dset5').set('solution', 'none');
model.result.dataset('dset2').set('solution', 'none');

model.sol('sol1').feature.remove('s1');
model.sol('sol1').feature.remove('v5');
model.sol('sol1').feature.remove('st5');
model.sol('sol1').feature.remove('su4');
model.sol('sol1').feature.remove('e4');
model.sol('sol1').feature.remove('v4');
model.sol('sol1').feature.remove('st4');
model.sol('sol1').feature.remove('su3');
model.sol('sol1').feature.remove('e3');
model.sol('sol1').feature.remove('v3');
model.sol('sol1').feature.remove('st3');
model.sol('sol1').feature.remove('su2');
model.sol('sol1').feature.remove('e2');
model.sol('sol1').feature.remove('v2');
model.sol('sol1').feature.remove('st2');
model.sol('sol1').feature.remove('su1');
model.sol('sol1').feature.remove('e1');
model.sol('sol1').feature.remove('v1');
model.sol('sol1').feature.remove('st1');
model.sol('sol16').copySolution('sol4');
model.sol.remove('sol16');
model.sol('sol4').label('Solution Store 3');

model.result.dataset.remove('dset11');

model.sol('sol15').copySolution('sol3');
model.sol.remove('sol15');
model.sol('sol3').label('Solution Store 2');

model.result.dataset.remove('dset11');

model.sol('sol17').copySolution('sol5');
model.sol.remove('sol17');
model.sol('sol5').label('Solution Store 4');

model.result.dataset.remove('dset11');

model.sol('sol14').copySolution('sol2');
model.sol.remove('sol14');
model.sol('sol2').label('Solution Store 1');

model.result.dataset.remove('dset8');

model.sol('sol1').create('st1', 'StudyStep');
model.sol('sol1').feature('st1').set('study', 'std1');
model.sol('sol1').feature('st1').set('studystep', 'bma');
model.sol('sol1').create('v1', 'Variables');
model.sol('sol1').feature('v1').set('control', 'bma');
model.sol('sol1').create('e1', 'Eigenvalue');
model.sol('sol1').feature('e1').set('neigs', 1);
model.sol('sol1').feature('e1').set('shift', '1');
model.sol('sol1').feature('e1').set('eigref', 'n_core');
model.sol('sol1').feature('e1').set('control', 'bma');
model.sol('sol1').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su1', 'StoreSolution');
model.sol('sol1').feature('su1').set('sol', 'sol2');
model.sol('sol1').feature('su1').label('Solution Store 1');
model.sol('sol1').create('st2', 'StudyStep');
model.sol('sol1').feature('st2').set('study', 'std1');
model.sol('sol1').feature('st2').set('studystep', 'bma1');
model.sol('sol1').create('v2', 'Variables');
model.sol('sol1').feature('v2').set('initmethod', 'sol');
model.sol('sol1').feature('v2').set('initsol', 'sol1');
model.sol('sol1').feature('v2').set('notsolmethod', 'sol');
model.sol('sol1').feature('v2').set('notsol', 'sol1');
model.sol('sol1').feature('v2').set('control', 'bma1');
model.sol('sol1').create('e2', 'Eigenvalue');
model.sol('sol1').feature('e2').set('neigs', 1);
model.sol('sol1').feature('e2').set('shift', '1');
model.sol('sol1').feature('e2').set('eigref', 'n_core');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').set('linpmethod', 'sol');
model.sol('sol1').feature('e2').set('linpsol', 'sol1');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su2', 'StoreSolution');
model.sol('sol1').feature('su2').set('sol', 'sol3');
model.sol('sol1').feature('su2').label('Solution Store 2');
model.sol('sol1').create('st3', 'StudyStep');
model.sol('sol1').feature('st3').set('study', 'std1');
model.sol('sol1').feature('st3').set('studystep', 'bma2');
model.sol('sol1').create('v3', 'Variables');
model.sol('sol1').feature('v3').set('initmethod', 'sol');
model.sol('sol1').feature('v3').set('initsol', 'sol1');
model.sol('sol1').feature('v3').set('notsolmethod', 'sol');
model.sol('sol1').feature('v3').set('notsol', 'sol1');
model.sol('sol1').feature('v3').set('control', 'bma2');
model.sol('sol1').create('e3', 'Eigenvalue');
model.sol('sol1').feature('e3').set('neigs', 1);
model.sol('sol1').feature('e3').set('shift', '1');
model.sol('sol1').feature('e3').set('eigref', 'n_core');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').set('linpmethod', 'sol');
model.sol('sol1').feature('e3').set('linpsol', 'sol1');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su3', 'StoreSolution');
model.sol('sol1').feature('su3').set('sol', 'sol4');
model.sol('sol1').feature('su3').label('Solution Store 3');
model.sol('sol1').create('st4', 'StudyStep');
model.sol('sol1').feature('st4').set('study', 'std1');
model.sol('sol1').feature('st4').set('studystep', 'bma3');
model.sol('sol1').create('v4', 'Variables');
model.sol('sol1').feature('v4').set('initmethod', 'sol');
model.sol('sol1').feature('v4').set('initsol', 'sol1');
model.sol('sol1').feature('v4').set('notsolmethod', 'sol');
model.sol('sol1').feature('v4').set('notsol', 'sol1');
model.sol('sol1').feature('v4').set('control', 'bma3');
model.sol('sol1').create('e4', 'Eigenvalue');
model.sol('sol1').feature('e4').set('neigs', 1);
model.sol('sol1').feature('e4').set('shift', '1');
model.sol('sol1').feature('e4').set('eigref', 'n_core');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').set('linpmethod', 'sol');
model.sol('sol1').feature('e4').set('linpsol', 'sol1');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su4', 'StoreSolution');
model.sol('sol1').feature('su4').set('sol', 'sol5');
model.sol('sol1').feature('su4').label('Solution Store 4');
model.sol('sol1').create('st5', 'StudyStep');
model.sol('sol1').feature('st5').set('study', 'std1');
model.sol('sol1').feature('st5').set('studystep', 'freq');
model.sol('sol1').create('v5', 'Variables');
model.sol('sol1').feature('v5').set('initmethod', 'sol');
model.sol('sol1').feature('v5').set('initsol', 'sol1');
model.sol('sol1').feature('v5').set('notsolmethod', 'sol');
model.sol('sol1').feature('v5').set('notsol', 'sol1');
model.sol('sol1').feature('v5').set('control', 'freq');
model.sol('sol1').create('s1', 'Stationary');
model.sol('sol1').feature('s1').create('p1', 'Parametric');
model.sol('sol1').feature('s1').feature.remove('pDef');
model.sol('sol1').feature('s1').feature('p1').set('pname', {'freq'});
model.sol('sol1').feature('s1').feature('p1').set('plistarr', {'f0'});
model.sol('sol1').feature('s1').feature('p1').set('punit', {'THz'});
model.sol('sol1').feature('s1').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol1').feature('s1').feature('p1').set('preusesol', 'no');
model.sol('sol1').feature('s1').feature('p1').set('pdistrib', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plot', 'off');
model.sol('sol1').feature('s1').feature('p1').set('plotgroup', 'pg1');
model.sol('sol1').feature('s1').feature('p1').set('probesel', 'all');
model.sol('sol1').feature('s1').feature('p1').set('probes', {});
model.sol('sol1').feature('s1').feature('p1').set('control', 'freq');
model.sol('sol1').feature('s1').set('linpmethod', 'sol');
model.sol('sol1').feature('s1').set('linpsol', 'zero');
model.sol('sol1').feature('s1').set('control', 'freq');
model.sol('sol1').feature('s1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('s1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('s1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('s1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('s1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol1').feature('s1').feature.remove('fcDef');

model.result.dataset('dset5').set('solution', 'sol5');
model.result.dataset('dset4').set('solution', 'sol4');
model.result.dataset('dset3').set('solution', 'sol3');
model.result.dataset('dset2').set('solution', 'sol2');

model.sol('sol1').feature('v5').set('notsolnum', 'auto');
model.sol('sol1').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v5').set('solnum', 'auto');
model.sol('sol1').feature('v5').set('solvertype', 'solnum');
model.sol('sol1').feature('e4').set('linpsolnum', 'auto');
model.sol('sol1').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('notsolnum', 'auto');
model.sol('sol1').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('solnum', 'auto');
model.sol('sol1').feature('v4').set('solvertype', 'solnum');
model.sol('sol1').feature('e3').set('linpsolnum', 'auto');
model.sol('sol1').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('notsolnum', 'auto');
model.sol('sol1').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('solnum', 'auto');
model.sol('sol1').feature('v3').set('solvertype', 'solnum');
model.sol('sol1').feature('e2').set('linpsolnum', 'auto');
model.sol('sol1').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('notsolnum', 'auto');
model.sol('sol1').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('solnum', 'auto');
model.sol('sol1').feature('v2').set('solvertype', 'solnum');
model.sol('sol1').attach('std1');

model.batch('p1').feature.remove('so1');
model.batch('p1').create('so1', 'Solutionseq');
model.batch('p1').feature('so1').set('seq', 'sol1');
model.batch('p1').feature('so1').set('store', 'on');
model.batch('p1').feature('so1').set('clear', 'on');
model.batch('p1').feature('so1').set('psol', 'sol6');
model.batch('p1').set('pname', {'d_cpl'});
model.batch('p1').set('plistarr', {'range(80[um],50[um],430[um])'});
model.batch('p1').set('sweeptype', 'sparse');
model.batch('p1').set('probesel', 'all');
model.batch('p1').set('probes', {});
model.batch('p1').set('plot', 'off');
model.batch('p1').set('err', 'on');
model.batch('p1').attach('std1');
model.batch('p1').set('control', 'param');
model.batch('p1').run('compute');

model.result('pg6').run;
model.result('pg7').run;
model.result('pg7').feature('glob1').set('xdataexpr', 'd_cpl');
model.result('pg7').feature('glob1').set('xdataunit', [native2unicode(hex2dec({'00' 'b5'}), 'unicode') 'm']);
model.result('pg7').run;
model.result('pg7').set('legendpos', 'middleright');
model.result('pg7').run;
model.result.create('pg12', 'PlotGroup1D');
model.result('pg12').run;
model.result('pg12').label('Power Difference');
model.result('pg12').set('data', 'dset6');
model.result('pg12').create('glob1', 'Global');
model.result('pg12').feature('glob1').set('markerpos', 'datapoints');
model.result('pg12').feature('glob1').set('linewidth', 'preference');
model.result('pg12').feature('glob1').setIndex('expr', 'abs(P2-P1)', 0);
model.result('pg12').feature('glob1').setIndex('unit', 'W/m', 0);
model.result('pg12').feature('glob1').setIndex('descr', 'Power difference', 0);
model.result('pg12').feature('glob1').set('xdatasolnumtype', 'outer');
model.result('pg12').feature('glob1').set('xdata', 'expr');
model.result('pg12').feature('glob1').set('xdataexpr', 'd_cpl');
model.result('pg12').feature('glob1').set('xdataunit', [native2unicode(hex2dec({'00' 'b5'}), 'unicode') 'm']);
model.result('pg12').run;
model.result('pg12').set('showlegends', false);
model.result('pg12').run;
model.result('pg6').run;
model.result('pg6').run;

model.param('par2').set('d_cpl', '90[um]', 'Length of straight directional coupler waveguides');
model.param('par2').set('d_cpl', '380[um]');
model.param('par2').descr('d_cpl', 'Length of directional coupler waveguides');
model.param('par2').set('d_mz', '100[um]', 'Length of Mach-Zehnder waveguides');
model.param('par2').set('d_mz', '2[cm]');
model.param('par2').descr('d_mz', ['Length of Mach' native2unicode(hex2dec({'20' '13'}), 'unicode') 'Zehnder waveguides']);

model.physics.create('es', 'Electrostatics', 'geom1');
model.physics('es').model('comp1');

model.study('std1').feature('bma').setSolveFor('/physics/es', true);
model.study('std1').feature('bma1').setSolveFor('/physics/es', true);
model.study('std1').feature('bma2').setSolveFor('/physics/es', true);
model.study('std1').feature('bma3').setSolveFor('/physics/es', true);
model.study('std1').feature('freq').setSolveFor('/physics/es', true);

model.geom('geom1').run;

model.material('mat1').propertyGroup('def').set('relpermittivity', {'epsr'});
model.material('mat2').propertyGroup('def').set('relpermittivity', {'epsr'});

model.geom('geom1').create('pol1', 'Polygon');
model.geom('geom1').feature('pol1').set('source', 'table');
model.geom('geom1').feature('pol1').setIndex('table', 'd_dc', 0, 0);
model.geom('geom1').feature('pol1').setIndex('table', '-w', 0, 1);
model.geom('geom1').feature('pol1').setIndex('table', 'd_dc+d_mz', 1, 0);
model.geom('geom1').feature('pol1').setIndex('table', '-w', 1, 1);
model.geom('geom1').feature.duplicate('pol2', 'pol1');
model.geom('geom1').feature('pol2').setIndex('table', 'w', 0, 1);
model.geom('geom1').feature('pol2').setIndex('table', 'w', 1, 1);
model.geom('geom1').runPre('fin');
model.geom('geom1').run;

model.physics('es').create('pot1', 'ElectricPotential', 1);
model.physics('es').feature('pot1').selection.set([84]);
model.physics('es').feature('pot1').set('V0', 'V0');
model.physics('es').create('gnd1', 'Ground', 1);
model.physics('es').feature('gnd1').selection.set([78]);

model.material('mat1').propertyGroup('RefractiveIndex').set('n', {'n_clad-0.5*n_clad^3*r13*es.Ey'});
model.material('mat2').propertyGroup('RefractiveIndex').set('n', {'n_core-0.5*n_core^3*r13*es.Ey'});

model.study('std1').feature('param').setIndex('pname', 'V0', 0);
model.study('std1').feature('param').setIndex('plistarr', 'range(0[V],0.1[V],1[V])', 0);
model.study('std1').create('stat', 'Stationary');
model.study('std1').feature.move('stat', 5);
model.study('std1').feature('freq').setEntry('activate', 'es', false);

model.sol('sol1').study('std1');

model.study('std1').feature('stat').set('notsolnum', 'auto');
model.study('std1').feature('stat').set('notsolvertype', 'solnum');
model.study('std1').feature('stat').set('notsolnumhide', 'off');
model.study('std1').feature('stat').set('notstudyhide', 'off');
model.study('std1').feature('stat').set('notsolhide', 'off');
model.study('std1').feature('stat').set('solnum', 'auto');
model.study('std1').feature('stat').set('solvertype', 'solnum');
model.study('std1').feature('stat').set('solnumhide', 'off');
model.study('std1').feature('stat').set('initstudyhide', 'off');
model.study('std1').feature('stat').set('initsolhide', 'off');

model.sol('sol2').copySolution('sol15');
model.sol('sol3').copySolution('sol16');
model.sol('sol4').copySolution('sol17');
model.sol('sol5').copySolution('sol18');

model.result.dataset('dset4').set('solution', 'none');
model.result.dataset('dset3').set('solution', 'none');
model.result.dataset('dset5').set('solution', 'none');
model.result.dataset('dset2').set('solution', 'none');

model.sol('sol1').feature.remove('s1');
model.sol('sol1').feature.remove('v5');
model.sol('sol1').feature.remove('st5');
model.sol('sol1').feature.remove('su4');
model.sol('sol1').feature.remove('e4');
model.sol('sol1').feature.remove('v4');
model.sol('sol1').feature.remove('st4');
model.sol('sol1').feature.remove('su3');
model.sol('sol1').feature.remove('e3');
model.sol('sol1').feature.remove('v3');
model.sol('sol1').feature.remove('st3');
model.sol('sol1').feature.remove('su2');
model.sol('sol1').feature.remove('e2');
model.sol('sol1').feature.remove('v2');
model.sol('sol1').feature.remove('st2');
model.sol('sol1').feature.remove('su1');
model.sol('sol1').feature.remove('e1');
model.sol('sol1').feature.remove('v1');
model.sol('sol1').feature.remove('st1');
model.sol('sol17').copySolution('sol4');
model.sol.remove('sol17');
model.sol('sol4').label('Solution Store 3');

model.result.dataset.remove('dset11');

model.sol('sol16').copySolution('sol3');
model.sol.remove('sol16');
model.sol('sol3').label('Solution Store 2');

model.result.dataset.remove('dset11');

model.sol('sol18').copySolution('sol5');
model.sol.remove('sol18');
model.sol('sol5').label('Solution Store 4');

model.result.dataset.remove('dset11');

model.sol('sol15').copySolution('sol2');
model.sol.remove('sol15');
model.sol('sol2').label('Solution Store 1');

model.result.dataset.remove('dset8');

model.sol('sol1').create('st1', 'StudyStep');
model.sol('sol1').feature('st1').set('study', 'std1');
model.sol('sol1').feature('st1').set('studystep', 'bma');
model.sol('sol1').create('v1', 'Variables');
model.sol('sol1').feature('v1').set('control', 'bma');
model.sol('sol1').create('e1', 'Eigenvalue');
model.sol('sol1').feature('e1').set('neigs', 1);
model.sol('sol1').feature('e1').set('shift', '1');
model.sol('sol1').feature('e1').set('eigref', 'n_core');
model.sol('sol1').feature('e1').set('control', 'bma');
model.sol('sol1').feature('e1').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e1').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e1').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e1').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e1').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su1', 'StoreSolution');
model.sol('sol1').feature('su1').set('sol', 'sol2');
model.sol('sol1').feature('su1').label('Solution Store 1');
model.sol('sol1').create('st2', 'StudyStep');
model.sol('sol1').feature('st2').set('study', 'std1');
model.sol('sol1').feature('st2').set('studystep', 'bma1');
model.sol('sol1').create('v2', 'Variables');
model.sol('sol1').feature('v2').set('initmethod', 'sol');
model.sol('sol1').feature('v2').set('initsol', 'sol1');
model.sol('sol1').feature('v2').set('notsolmethod', 'sol');
model.sol('sol1').feature('v2').set('notsol', 'sol1');
model.sol('sol1').feature('v2').set('control', 'bma1');
model.sol('sol1').create('e2', 'Eigenvalue');
model.sol('sol1').feature('e2').set('neigs', 1);
model.sol('sol1').feature('e2').set('shift', '1');
model.sol('sol1').feature('e2').set('eigref', 'n_core');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').set('linpmethod', 'sol');
model.sol('sol1').feature('e2').set('linpsol', 'sol1');
model.sol('sol1').feature('e2').set('control', 'bma1');
model.sol('sol1').feature('e2').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e2').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e2').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e2').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e2').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su2', 'StoreSolution');
model.sol('sol1').feature('su2').set('sol', 'sol3');
model.sol('sol1').feature('su2').label('Solution Store 2');
model.sol('sol1').create('st3', 'StudyStep');
model.sol('sol1').feature('st3').set('study', 'std1');
model.sol('sol1').feature('st3').set('studystep', 'bma2');
model.sol('sol1').create('v3', 'Variables');
model.sol('sol1').feature('v3').set('initmethod', 'sol');
model.sol('sol1').feature('v3').set('initsol', 'sol1');
model.sol('sol1').feature('v3').set('notsolmethod', 'sol');
model.sol('sol1').feature('v3').set('notsol', 'sol1');
model.sol('sol1').feature('v3').set('control', 'bma2');
model.sol('sol1').create('e3', 'Eigenvalue');
model.sol('sol1').feature('e3').set('neigs', 1);
model.sol('sol1').feature('e3').set('shift', '1');
model.sol('sol1').feature('e3').set('eigref', 'n_core');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').set('linpmethod', 'sol');
model.sol('sol1').feature('e3').set('linpsol', 'sol1');
model.sol('sol1').feature('e3').set('control', 'bma2');
model.sol('sol1').feature('e3').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e3').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e3').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e3').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e3').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su3', 'StoreSolution');
model.sol('sol1').feature('su3').set('sol', 'sol4');
model.sol('sol1').feature('su3').label('Solution Store 3');
model.sol('sol1').create('st4', 'StudyStep');
model.sol('sol1').feature('st4').set('study', 'std1');
model.sol('sol1').feature('st4').set('studystep', 'bma3');
model.sol('sol1').create('v4', 'Variables');
model.sol('sol1').feature('v4').set('initmethod', 'sol');
model.sol('sol1').feature('v4').set('initsol', 'sol1');
model.sol('sol1').feature('v4').set('notsolmethod', 'sol');
model.sol('sol1').feature('v4').set('notsol', 'sol1');
model.sol('sol1').feature('v4').set('control', 'bma3');
model.sol('sol1').create('e4', 'Eigenvalue');
model.sol('sol1').feature('e4').set('neigs', 1);
model.sol('sol1').feature('e4').set('shift', '1');
model.sol('sol1').feature('e4').set('eigref', 'n_core');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').set('linpmethod', 'sol');
model.sol('sol1').feature('e4').set('linpsol', 'sol1');
model.sol('sol1').feature('e4').set('control', 'bma3');
model.sol('sol1').feature('e4').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('e4').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('e4').feature('aDef').set('matherr', true);
model.sol('sol1').feature('e4').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('e4').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').create('su4', 'StoreSolution');
model.sol('sol1').feature('su4').set('sol', 'sol5');
model.sol('sol1').feature('su4').label('Solution Store 4');
model.sol('sol1').create('st5', 'StudyStep');
model.sol('sol1').feature('st5').set('study', 'std1');
model.sol('sol1').feature('st5').set('studystep', 'stat');
model.sol('sol1').create('v5', 'Variables');
model.sol('sol1').feature('v5').set('initmethod', 'sol');
model.sol('sol1').feature('v5').set('initsol', 'sol1');
model.sol('sol1').feature('v5').set('notsolmethod', 'sol');
model.sol('sol1').feature('v5').set('notsol', 'sol1');
model.sol('sol1').feature('v5').set('control', 'stat');
model.sol('sol1').create('s1', 'Stationary');
model.sol('sol1').feature('s1').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s1').feature('fc1').set('linsolver', 'dDef');
model.sol('sol1').feature('s1').feature.remove('fcDef');
model.sol('sol1').create('su5', 'StoreSolution');
model.sol('sol1').create('st6', 'StudyStep');
model.sol('sol1').feature('st6').set('study', 'std1');
model.sol('sol1').feature('st6').set('studystep', 'freq');
model.sol('sol1').create('v6', 'Variables');
model.sol('sol1').feature('v6').set('initmethod', 'sol');
model.sol('sol1').feature('v6').set('initsol', 'sol1');
model.sol('sol1').feature('v6').set('notsolmethod', 'sol');
model.sol('sol1').feature('v6').set('notsol', 'sol1');
model.sol('sol1').feature('v6').set('control', 'freq');
model.sol('sol1').create('s2', 'Stationary');
model.sol('sol1').feature('s2').create('p1', 'Parametric');
model.sol('sol1').feature('s2').feature.remove('pDef');
model.sol('sol1').feature('s2').feature('p1').set('pname', {'freq'});
model.sol('sol1').feature('s2').feature('p1').set('plistarr', {'f0'});
model.sol('sol1').feature('s2').feature('p1').set('punit', {'THz'});
model.sol('sol1').feature('s2').feature('p1').set('pcontinuationmode', 'no');
model.sol('sol1').feature('s2').feature('p1').set('preusesol', 'no');
model.sol('sol1').feature('s2').feature('p1').set('pdistrib', 'off');
model.sol('sol1').feature('s2').feature('p1').set('plot', 'off');
model.sol('sol1').feature('s2').feature('p1').set('plotgroup', 'pg1');
model.sol('sol1').feature('s2').feature('p1').set('probesel', 'all');
model.sol('sol1').feature('s2').feature('p1').set('probes', {});
model.sol('sol1').feature('s2').feature('p1').set('control', 'freq');
model.sol('sol1').feature('s2').set('linpmethod', 'sol');
model.sol('sol1').feature('s2').set('linpsol', 'zero');
model.sol('sol1').feature('s2').set('control', 'freq');
model.sol('sol1').feature('s2').feature('aDef').set('complexfun', true);
model.sol('sol1').feature('s2').feature('aDef').set('cachepattern', false);
model.sol('sol1').feature('s2').feature('aDef').set('matherr', true);
model.sol('sol1').feature('s2').feature('aDef').set('blocksizeactive', false);
model.sol('sol1').feature('s2').feature('aDef').set('nullfun', 'auto');
model.sol('sol1').feature('s2').create('fc1', 'FullyCoupled');
model.sol('sol1').feature('s2').feature('fc1').set('linsolver', 'dDef');
model.sol('sol1').feature('s2').feature.remove('fcDef');

model.result.dataset('dset5').set('solution', 'sol5');
model.result.dataset('dset4').set('solution', 'sol4');
model.result.dataset('dset3').set('solution', 'sol3');
model.result.dataset('dset2').set('solution', 'sol2');

model.sol('sol1').feature('v6').set('notsolnum', 'auto');
model.sol('sol1').feature('v6').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v6').set('solnum', 'auto');
model.sol('sol1').feature('v6').set('solvertype', 'solnum');
model.sol('sol1').feature('v5').set('notsolnum', 'auto');
model.sol('sol1').feature('v5').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v5').set('solnum', 'auto');
model.sol('sol1').feature('v5').set('solvertype', 'solnum');
model.sol('sol1').feature('e4').set('linpsolnum', 'auto');
model.sol('sol1').feature('e4').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('notsolnum', 'auto');
model.sol('sol1').feature('v4').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v4').set('solnum', 'auto');
model.sol('sol1').feature('v4').set('solvertype', 'solnum');
model.sol('sol1').feature('e3').set('linpsolnum', 'auto');
model.sol('sol1').feature('e3').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('notsolnum', 'auto');
model.sol('sol1').feature('v3').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v3').set('solnum', 'auto');
model.sol('sol1').feature('v3').set('solvertype', 'solnum');
model.sol('sol1').feature('e2').set('linpsolnum', 'auto');
model.sol('sol1').feature('e2').set('linpsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('notsolnum', 'auto');
model.sol('sol1').feature('v2').set('notsolvertype', 'solnum');
model.sol('sol1').feature('v2').set('solnum', 'auto');
model.sol('sol1').feature('v2').set('solvertype', 'solnum');

model.study('std1').feature('stat').set('notsolnum', 'auto');
model.study('std1').feature('stat').set('notsolvertype', 'solnum');
model.study('std1').feature('stat').set('notsolnumhide', 'off');
model.study('std1').feature('stat').set('notstudyhide', 'off');
model.study('std1').feature('stat').set('notsolhide', 'off');
model.study('std1').feature('stat').set('solnum', 'auto');
model.study('std1').feature('stat').set('solvertype', 'solnum');
model.study('std1').feature('stat').set('solnumhide', 'off');
model.study('std1').feature('stat').set('initstudyhide', 'off');
model.study('std1').feature('stat').set('initsolhide', 'off');

model.sol('sol1').attach('std1');

model.batch('p1').feature.remove('so1');
model.batch('p1').create('so1', 'Solutionseq');
model.batch('p1').feature('so1').set('seq', 'sol1');
model.batch('p1').feature('so1').set('store', 'on');
model.batch('p1').feature('so1').set('clear', 'on');
model.batch('p1').feature('so1').set('psol', 'sol6');
model.batch('p1').set('pname', {'V0'});
model.batch('p1').set('plistarr', {'range(0[V],0.1[V],1[V])'});
model.batch('p1').set('sweeptype', 'sparse');
model.batch('p1').set('probesel', 'all');
model.batch('p1').set('probes', {});
model.batch('p1').set('plot', 'off');
model.batch('p1').set('err', 'on');
model.batch('p1').attach('std1');
model.batch('p1').set('control', 'param');
model.batch('p1').run('compute');

model.result('pg6').run;
model.result('pg7').run;
model.result('pg7').feature('glob1').set('xdataexpr', 'V0');
model.result('pg7').run;

model.title(['Mach' native2unicode(hex2dec({'20' '13'}), 'unicode') 'Zehnder Modulator']);

model.description(['A Mach' native2unicode(hex2dec({'20' '13'}), 'unicode') 'Zehnder modulator is used for controlling the amplitude of an optical wave. The input waveguide is split up into two waveguide interferometer arms. If a voltage is applied across one of the arms, a phase shift is induced for the wave passing through that arm. When the two arms are recombined, the phase difference between the two waves is converted to an amplitude modulation.' newline 'This is a multiphysics model, showing how to combine the Electromagnetic Waves, Beam Envelopes user interface with the Electrostatics user interface to describe a realistic waveguide device.']);

model.mesh.clearMeshes;

model.sol('sol1').clearSolutionData;
model.sol('sol6').clearSolutionData;
model.sol('sol4').clearSolutionData;
model.sol('sol3').clearSolutionData;
model.sol('sol5').clearSolutionData;
model.sol('sol2').clearSolutionData;
model.sol('sol15').clearSolutionData;
model.sol('sol16').clearSolutionData;
model.sol('sol17').clearSolutionData;
model.sol('sol18').clearSolutionData;
model.sol('sol19').clearSolutionData;
model.sol('sol20').clearSolutionData;
model.sol('sol21').clearSolutionData;
model.sol('sol22').clearSolutionData;
model.sol('sol23').clearSolutionData;
model.sol('sol24').clearSolutionData;
model.sol('sol25').clearSolutionData;
model.sol('sol26').clearSolutionData;

model.label('mach_zehnder_modulator.mph');

model.modelNode.label('Components');

out = model;
